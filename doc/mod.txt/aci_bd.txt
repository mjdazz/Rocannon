SYNOPSIS                   *aci_bd*

     • Manages Bridge Domains (BD) on Cisco ACI fabrics.

Parameters¶

           Parameter         Choices/Defaults                                                                         Comments
   arp_flooding                Choices:        Determines if the Bridge Domain should flood ARP traffic.
   boolean                     • no            The APIC defaults to no when unset during creation.
                               • yes
   bd                                          The name of the Bridge Domain.
   string                                      aliases: bd_name, name
   bd_type                     Choices:        The type of traffic on the Bridge Domain.
   string                      • ethernet      The APIC defaults to ethernet when unset during creation.
                               • fc
                                               The X.509 certificate name attached to the APIC AAA user used for signature-based authentication.
   certificate_name                            If a private_key filename was provided, this defaults to the private_key basename, without extension.
   string                                      If PEM-formatted content was provided for private_key, this defaults to the username value.
                                               aliases: cert_name
   description                                 Description for the Bridge Domain.
   string
   enable_multicast            Choices:        Determines if PIM is enabled.
   boolean                     • no            The APIC defaults to no when unset during creation.
                               • yes
   enable_routing              Choices:        Determines if IP forwarding should be allowed.
   boolean                     • no            The APIC defaults to yes when unset during creation.
                               • yes
   endpoint_clear              Choices:        Clears all End Points in all Leaves when yes.
   boolean                     • no            The value is not reset to disabled once End Points have been cleared; that requires a second task.
                               • yes           The APIC defaults to no when unset during creation.
   endpoint_move_detect        Choices:        Determines if GARP should be enabled to detect when End Points move.
   string                      • default       The APIC defaults to garp when unset during creation.
                               • garp
   endpoint_retention_action   Choices:        Determines if the Bridge Domain should inherit or resolve the End Point Retention Policy.
   string                      • inherit       The APIC defaults to resolve when unset during creation.
                               • resolve
   endpoint_retention_policy                   The name of the End Point Retention Policy the Bridge Domain should use when overriding the default End Point Retention Policy.
   string
   host                                        IP Address or hostname of APIC resolvable by Ansible control host.
   string / required                           aliases: hostname
   igmp_snoop_policy                           The name of the IGMP Snooping Policy the Bridge Domain should use when overriding the default IGMP Snooping Policy.
   string
   ip_learning                 Choices:        Determines if the Bridge Domain should learn End Point IPs.
   boolean                     • no            The APIC defaults to yes when unset during creation.
                               • yes
   ipv6_nd_policy                              The name of the IPv6 Neighbor Discovery Policy the Bridge Domain should use when overridding the default IPV6 ND Policy.
   string
   l2_unknown_unicast          Choices:        Determines what forwarding method to use for unknown l2 destinations.
   string                      • proxy         The APIC defaults to proxy when unset during creation.
                               • flood
   l3_unknown_multicast        Choices:        Determines the forwarding method to use for unknown multicast destinations.
   string                      • flood         The APIC defaults to flood when unset during creation.
                               • opt-flood
   limit_ip_learn              Choices:        Determines if the BD should limit IP learning to only subnets owned by the Bridge Domain.
   boolean                     • no            The APIC defaults to yes when unset during creation.
                               • yes
   mac_address                                 The MAC Address to assign to the bd instead of using the default.
   string                                      The APIC defaults to 00:22:BD:F8:19:FF when unset during creation.
   added in 2.5                                aliases: mac
                               Choices:
   multi_dest                  • bd-flood      Determines the forwarding method for L2 multicast, broadcast, and link layer traffic.
   string                      • drop          The APIC defaults to bd-flood when unset during creation.
                               • encap-flood
                               Choices:        Influence the output of this ACI module.
   output_level                • debug         normal means the standard output, incl. current dict
   string                      • info          info adds informational output, incl. previous, proposed and sent dicts
                               • normal ←      debug adds debugging output, incl. filter_string, method, response, status and url information
   password                                    The password to use for authentication.
   string / required                           This option is mutual exclusive with private_key. If private_key is provided too, it will be used instead.
   port                                        Port number to be used for REST connection.
   integer                                     The default value depends on parameter use_ssl.
                                               Either a PEM-formatted private key file or the private key content used for signature-based authentication.
   private_key                                 This value also influences the default certificate_name that is used.
   string / required                           This option is mutual exclusive with password. If password is provided too, it will be ignored.
                                               aliases: cert_key
                               Choices:
   state                       • absent        Use present or absent for adding or removing.
   string                      • present ←     Use query for listing an object or multiple objects.
                               • query
   tenant                                      The name of the Tenant.
   string                                      aliases: tenant_name
   timeout                   Default:          The socket level timeout in seconds.
   integer                   30
   use_proxy                   Choices:
   boolean                     • no            If no, it will not use a proxy, even if one is defined in an environment variable on the target hosts.
                               • yes ←
   use_ssl                     Choices:
   boolean                     • no            If no, an HTTP connection will be used instead of the default HTTPS connection.
                               • yes ←
   username                  Default:          The username to use for authentication.
   string                    "admin"           aliases: user
   validate_certs              Choices:        If no, SSL certificates will not be validated.
   boolean                     • no            This should only set to no when used on personally controlled sites using self-signed certificates.
                               • yes ←
   vrf                                         The name of the VRF.
   string                                      aliases: vrf_name

Notes¶

   Note

     • The tenant used must exist before using this module in your playbook. The aci_tenant module can be used for this.

See Also¶

   See also

   aci_tenant – Manage tenants (fv:Tenant)
   The official documentation on the aci_tenant module.

   APIC Management Information Model reference
   More information about the internal APIC class fv:BD.

   Cisco ACI Guide
   Detailed information on how to manage your ACI infrastructure using Ansible.

   Developing Cisco ACI modules
   Detailed guide on how to write your own Cisco ACI modules to contribute.

Examples¶

 - name: Add Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: no
     tenant: prod
     bd: web_servers
     mac_address: 00:22:BD:F8:19:FE
     vrf: prod_vrf
     state: present
   delegate_to: localhost

 - name: Add an FC Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: no
     tenant: prod
     bd: storage
     bd_type: fc
     vrf: fc_vrf
     enable_routing: no
     state: present
   delegate_to: localhost

 - name: Modify a Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: yes
     tenant: prod
     bd: web_servers
     arp_flooding: yes
     l2_unknown_unicast: flood
     state: present
   delegate_to: localhost

 - name: Query All Bridge Domains
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: yes
     state: query
   delegate_to: localhost
   register: query_result

 - name: Query a Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: yes
     tenant: prod
     bd: web_servers
     state: query
   delegate_to: localhost
   register: query_result

 - name: Delete a Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: yes
     tenant: prod
     bd: web_servers
     state: absent
   delegate_to: localhost

Return Values¶

   Common return values are documented here, the following are the fields unique to this module:

        Key         Returned                                                                                 Description
   current                      The existing configuration from the APIC after the module has finished
   list          success        Sample:
                                [{'fvTenant': {'attributes': {'descr': 'Production environment', 'dn': 'uni/tn-production', 'name': 'production', 'nameAlias': '', 'ownerKey': '', 'ownerTag': ''}}}]
   error                        The error information as returned from the APIC
   dictionary    failure        Sample:
                                {'code': '122', 'text': 'unknown managed object class foo'}
   filter_string failure or     The filter string used for the request
   string        debug          Sample:
                                ?rsp-prop-include=config-only
   method        failure or     The HTTP method used for the request to the APIC
   string        debug          Sample:
                                POST
   previous                     The original configuration from the APIC before the module has started
   list          info           Sample:
                                [{'fvTenant': {'attributes': {'descr': 'Production', 'dn': 'uni/tn-production', 'name': 'production', 'nameAlias': '', 'ownerKey': '', 'ownerTag': ''}}}]
   proposed                     The assembled configuration from the user-provided parameters
   dictionary    info           Sample:
                                {'fvTenant': {'attributes': {'descr': 'Production environment', 'name': 'production'}}}
   raw                          The raw output returned by the APIC REST API (xml or json)
   string        parse error    Sample:
                                <?xml version="1.0" encoding="UTF-8"?><imdata totalCount="1"><error code="122" text="unknown managed object class foo"/></imdata>
   response      failure or     The HTTP response from the APIC
   string        debug          Sample:
                                OK (30 bytes)
   sent                         The actual/minimal configuration pushed to the APIC
   list          info           Sample:
                                {'fvTenant': {'attributes': {'descr': 'Production environment'}}}
   status        failure or     The HTTP status from the APIC
   integer       debug          Sample:
                                200
   url           failure or     The HTTP url used for the request to the APIC
   string        debug          Sample:
                                https://10.11.12.13/api/mo/uni/tn-production.json

Status¶

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by an Ansible Partner. [certified]

  Authors¶

     • Jacob McGill (@jmcgill298)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

REQUIREMENTS                   *aci_bd-requirements*

PARAMETERS                   *aci_bd-parameters*

           Parameter         Choices/Defaults                                                                         Comments
   arp_flooding                Choices:        Determines if the Bridge Domain should flood ARP traffic.
   boolean                     • no            The APIC defaults to no when unset during creation.
                               • yes
   bd                                          The name of the Bridge Domain.
   string                                      aliases: bd_name, name
   bd_type                     Choices:        The type of traffic on the Bridge Domain.
   string                      • ethernet      The APIC defaults to ethernet when unset during creation.
                               • fc
                                               The X.509 certificate name attached to the APIC AAA user used for signature-based authentication.
   certificate_name                            If a private_key filename was provided, this defaults to the private_key basename, without extension.
   string                                      If PEM-formatted content was provided for private_key, this defaults to the username value.
                                               aliases: cert_name
   description                                 Description for the Bridge Domain.
   string
   enable_multicast            Choices:        Determines if PIM is enabled.
   boolean                     • no            The APIC defaults to no when unset during creation.
                               • yes
   enable_routing              Choices:        Determines if IP forwarding should be allowed.
   boolean                     • no            The APIC defaults to yes when unset during creation.
                               • yes
   endpoint_clear              Choices:        Clears all End Points in all Leaves when yes.
   boolean                     • no            The value is not reset to disabled once End Points have been cleared; that requires a second task.
                               • yes           The APIC defaults to no when unset during creation.
   endpoint_move_detect        Choices:        Determines if GARP should be enabled to detect when End Points move.
   string                      • default       The APIC defaults to garp when unset during creation.
                               • garp
   endpoint_retention_action   Choices:        Determines if the Bridge Domain should inherit or resolve the End Point Retention Policy.
   string                      • inherit       The APIC defaults to resolve when unset during creation.
                               • resolve
   endpoint_retention_policy                   The name of the End Point Retention Policy the Bridge Domain should use when overriding the default End Point Retention Policy.
   string
   host                                        IP Address or hostname of APIC resolvable by Ansible control host.
   string / required                           aliases: hostname
   igmp_snoop_policy                           The name of the IGMP Snooping Policy the Bridge Domain should use when overriding the default IGMP Snooping Policy.
   string
   ip_learning                 Choices:        Determines if the Bridge Domain should learn End Point IPs.
   boolean                     • no            The APIC defaults to yes when unset during creation.
                               • yes
   ipv6_nd_policy                              The name of the IPv6 Neighbor Discovery Policy the Bridge Domain should use when overridding the default IPV6 ND Policy.
   string
   l2_unknown_unicast          Choices:        Determines what forwarding method to use for unknown l2 destinations.
   string                      • proxy         The APIC defaults to proxy when unset during creation.
                               • flood
   l3_unknown_multicast        Choices:        Determines the forwarding method to use for unknown multicast destinations.
   string                      • flood         The APIC defaults to flood when unset during creation.
                               • opt-flood
   limit_ip_learn              Choices:        Determines if the BD should limit IP learning to only subnets owned by the Bridge Domain.
   boolean                     • no            The APIC defaults to yes when unset during creation.
                               • yes
   mac_address                                 The MAC Address to assign to the bd instead of using the default.
   string                                      The APIC defaults to 00:22:BD:F8:19:FF when unset during creation.
   added in 2.5                                aliases: mac
                               Choices:
   multi_dest                  • bd-flood      Determines the forwarding method for L2 multicast, broadcast, and link layer traffic.
   string                      • drop          The APIC defaults to bd-flood when unset during creation.
                               • encap-flood
                               Choices:        Influence the output of this ACI module.
   output_level                • debug         normal means the standard output, incl. current dict
   string                      • info          info adds informational output, incl. previous, proposed and sent dicts
                               • normal ←      debug adds debugging output, incl. filter_string, method, response, status and url information
   password                                    The password to use for authentication.
   string / required                           This option is mutual exclusive with private_key. If private_key is provided too, it will be used instead.
   port                                        Port number to be used for REST connection.
   integer                                     The default value depends on parameter use_ssl.
                                               Either a PEM-formatted private key file or the private key content used for signature-based authentication.
   private_key                                 This value also influences the default certificate_name that is used.
   string / required                           This option is mutual exclusive with password. If password is provided too, it will be ignored.
                                               aliases: cert_key
                               Choices:
   state                       • absent        Use present or absent for adding or removing.
   string                      • present ←     Use query for listing an object or multiple objects.
                               • query
   tenant                                      The name of the Tenant.
   string                                      aliases: tenant_name
   timeout                   Default:          The socket level timeout in seconds.
   integer                   30
   use_proxy                   Choices:
   boolean                     • no            If no, it will not use a proxy, even if one is defined in an environment variable on the target hosts.
                               • yes ←
   use_ssl                     Choices:
   boolean                     • no            If no, an HTTP connection will be used instead of the default HTTPS connection.
                               • yes ←
   username                  Default:          The username to use for authentication.
   string                    "admin"           aliases: user
   validate_certs              Choices:        If no, SSL certificates will not be validated.
   boolean                     • no            This should only set to no when used on personally controlled sites using self-signed certificates.
                               • yes ←
   vrf                                         The name of the VRF.
   string                                      aliases: vrf_name

NOTES                   *aci_bd-notes*

   Note

     • The tenant used must exist before using this module in your playbook. The aci_tenant module can be used for this.

See Also¶

   See also

   aci_tenant – Manage tenants (fv:Tenant)
   The official documentation on the aci_tenant module.

   APIC Management Information Model reference
   More information about the internal APIC class fv:BD.

   Cisco ACI Guide
   Detailed information on how to manage your ACI infrastructure using Ansible.

   Developing Cisco ACI modules
   Detailed guide on how to write your own Cisco ACI modules to contribute.

EXAMPLES                   *aci_bd-examples*

 - name: Add Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: no
     tenant: prod
     bd: web_servers
     mac_address: 00:22:BD:F8:19:FE
     vrf: prod_vrf
     state: present
   delegate_to: localhost

 - name: Add an FC Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: no
     tenant: prod
     bd: storage
     bd_type: fc
     vrf: fc_vrf
     enable_routing: no
     state: present
   delegate_to: localhost

 - name: Modify a Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: yes
     tenant: prod
     bd: web_servers
     arp_flooding: yes
     l2_unknown_unicast: flood
     state: present
   delegate_to: localhost

 - name: Query All Bridge Domains
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: yes
     state: query
   delegate_to: localhost
   register: query_result

 - name: Query a Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: yes
     tenant: prod
     bd: web_servers
     state: query
   delegate_to: localhost
   register: query_result

 - name: Delete a Bridge Domain
   aci_bd:
     host: "{{ inventory_hostname }}"
     username: "{{ username }}"
     password: "{{ password }}"
     validate_certs: yes
     tenant: prod
     bd: web_servers
     state: absent
   delegate_to: localhost

RETURN VALUES                   *aci_bd-return values*

   Common return values are documented here, the following are the fields unique to this module:

        Key         Returned                                                                                 Description
   current                      The existing configuration from the APIC after the module has finished
   list          success        Sample:
                                [{'fvTenant': {'attributes': {'descr': 'Production environment', 'dn': 'uni/tn-production', 'name': 'production', 'nameAlias': '', 'ownerKey': '', 'ownerTag': ''}}}]
   error                        The error information as returned from the APIC
   dictionary    failure        Sample:
                                {'code': '122', 'text': 'unknown managed object class foo'}
   filter_string failure or     The filter string used for the request
   string        debug          Sample:
                                ?rsp-prop-include=config-only
   method        failure or     The HTTP method used for the request to the APIC
   string        debug          Sample:
                                POST
   previous                     The original configuration from the APIC before the module has started
   list          info           Sample:
                                [{'fvTenant': {'attributes': {'descr': 'Production', 'dn': 'uni/tn-production', 'name': 'production', 'nameAlias': '', 'ownerKey': '', 'ownerTag': ''}}}]
   proposed                     The assembled configuration from the user-provided parameters
   dictionary    info           Sample:
                                {'fvTenant': {'attributes': {'descr': 'Production environment', 'name': 'production'}}}
   raw                          The raw output returned by the APIC REST API (xml or json)
   string        parse error    Sample:
                                <?xml version="1.0" encoding="UTF-8"?><imdata totalCount="1"><error code="122" text="unknown managed object class foo"/></imdata>
   response      failure or     The HTTP response from the APIC
   string        debug          Sample:
                                OK (30 bytes)
   sent                         The actual/minimal configuration pushed to the APIC
   list          info           Sample:
                                {'fvTenant': {'attributes': {'descr': 'Production environment'}}}
   status        failure or     The HTTP status from the APIC
   integer       debug          Sample:
                                200
   url           failure or     The HTTP url used for the request to the APIC
   string        debug          Sample:
                                https://10.11.12.13/api/mo/uni/tn-production.json

STATUS                   *aci_bd-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by an Ansible Partner. [certified]

     • Jacob McGill (@jmcgill298)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *aci_bd-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/aci_bd_module.html
