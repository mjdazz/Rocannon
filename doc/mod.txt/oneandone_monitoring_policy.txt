SYNOPSIS                   *oneandone_monitoring_policy*

     • Create, remove, update monitoring policies (and add/remove ports, processes, and servers). This module has a dependency on 1and1 >= 1.0

REQUIREMENTS                   *oneandone_monitoring_policy-requirements*

   The below requirements are needed on the host that executes this module.

     • 1and1
     • python >= 2.6

PARAMETERS                   *oneandone_monitoring_policy-parameters*

        Parameter       Choices/Defaults                                                                           Comments
   add_ports                              Ports to add to the monitoring policy.
   -
   add_processes                          Processes to add to the monitoring policy.
   -
   add_servers                            Servers to add to the monitoring policy.
   -
   agent                                  Set true for using agent.
   - / required
   api_url                                Custom API URL. Overrides the ONEANDONE_API_URL environement variable.
   -
   auth_token                             Authenticating API token provided by 1&1.
   - / required
   description                            Monitoring policy description. maxLength=256
   -
   email                                  User's email. maxLength=128
   - / required
   monitoring_policy                      The identifier (id or name) of the monitoring policy used with update state.
   - / required
   name                                   Monitoring policy name used with present state. Used as identifier (id or name) when used with absent state. maxLength=128
   - / required
   ports                                  Array of ports that will be monitoring.
   - / required
    alert_if             Choices:
    - / required         • RESPONDING     Case of alert.
                         • NOT_RESPONDING
    email_notification                    Set true for sending e-mail notifications.
    - / required
    port                                  Port number. minimum=1, maximum=65535
    - / required
    protocol             Choices:
    - / required         • TCP            Internet protocol.
                         • UDP
   processes                              Array of processes that will be monitoring.
   - / required
    alert_if             Choices:
    - / required         • RUNNING        Case of alert.
                         • NOT_RUNNING
    process                               Name of the process. maxLength=50
    - / required
   remove_ports                           Ports to remove from the monitoring policy.
   -
   remove_processes                       Processes to remove from the monitoring policy.
   -
   remove_servers                         Servers to remove from the monitoring policy.
   -
                         Choices:
   state                 • present ←      Define a monitoring policy's state to create, remove, update.
   -                     • absent
                         • update
   thresholds                             Monitoring policy thresholds. Each of the suboptions have warning and critical, which both have alert and value suboptions. Warning is used to set limits
   - / required                           for warning alerts, critical is used to set critical alerts. alert enables alert, and value is used to advise when the value is exceeded.
    cpu                                   Consumption limits of CPU.
    - / required
    disk                                  Consumption limits of hard disk.
    - / required
    internal_ping                         Response limits of internal ping.
    - / required
    ram                                   Consumption limits of RAM.
    - / required
    transfer                              Consumption limits for transfer.
    - / required
   update_ports                           Ports to be updated on the monitoring policy.
   -
   update_processes                       Processes to be updated on the monitoring policy.
   -
   wait                  Choices:
   boolean               • no             wait for the instance to be in state 'running' before returning
                         • yes ←
   wait_interval       Default:           Defines the number of seconds to wait when using the _wait_for methods
   -                   5
   wait_timeout        Default:           how long before wait gives up, in seconds
   -                   600

EXAMPLES                   *oneandone_monitoring_policy-examples*

 # Provisioning example. Create and destroy a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     name: ansible monitoring policy
     description: Testing creation of a monitoring policy with ansible
     email: [email protected]
     agent: true
     thresholds:
      -
        cpu:
          warning:
            value: 80
            alert: false
          critical:
            value: 92
            alert: false
      -
        ram:
          warning:
            value: 80
            alert: false
          critical:
            value: 90
            alert: false
      -
        disk:
          warning:
            value: 80
            alert: false
          critical:
            value: 90
            alert: false
      -
        internal_ping:
          warning:
            value: 50
            alert: false
          critical:
            value: 100
            alert: false
      -
        transfer:
          warning:
            value: 1000
            alert: false
          critical:
            value: 2000
            alert: false
     ports:
      -
        protocol: TCP
        port: 22
        alert_if: RESPONDING
        email_notification: false
     processes:
      -
        process: test
        alert_if: NOT_RUNNING
        email_notification: false
     wait: true

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     state: absent
     name: ansible monitoring policy

 # Update a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy
     name: ansible monitoring policy updated
     description: Testing creation of a monitoring policy with ansible updated
     email: [email protected]
     thresholds:
      -
        cpu:
          warning:
            value: 70
            alert: false
          critical:
            value: 90
            alert: false
      -
        ram:
          warning:
            value: 70
            alert: false
          critical:
            value: 80
            alert: false
      -
        disk:
          warning:
            value: 70
            alert: false
          critical:
            value: 80
            alert: false
      -
        internal_ping:
          warning:
            value: 60
            alert: false
          critical:
            value: 90
            alert: false
      -
        transfer:
          warning:
            value: 900
            alert: false
          critical:
            value: 1900
            alert: false
     wait: true
     state: update

 # Add a port to a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy updated
     add_ports:
      -
        protocol: TCP
        port: 33
        alert_if: RESPONDING
        email_notification: false
     wait: true
     state: update

 # Update existing ports of a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy updated
     update_ports:
      -
        id: existing_port_id
        protocol: TCP
        port: 34
        alert_if: RESPONDING
        email_notification: false
      -
        id: existing_port_id
        protocol: TCP
        port: 23
        alert_if: RESPONDING
        email_notification: false
     wait: true
     state: update

 # Remove a port from a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy updated
     remove_ports:
      - port_id
     state: update

 # Add a process to a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy updated
     add_processes:
      -
        process: test_2
        alert_if: NOT_RUNNING
        email_notification: false
     wait: true
     state: update

 # Update existing processes of a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy updated
     update_processes:
      -
        id: process_id
        process: test_1
        alert_if: NOT_RUNNING
        email_notification: false
      -
        id: process_id
        process: test_3
        alert_if: NOT_RUNNING
        email_notification: false
     wait: true
     state: update

 # Remove a process from a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy updated
     remove_processes:
      - process_id
     wait: true
     state: update

 # Add server to a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy updated
     add_servers:
      - server id or name
     wait: true
     state: update

 # Remove server from a monitoring policy.

 - oneandone_moitoring_policy:
     auth_token: oneandone_private_api_key
     monitoring_policy: ansible monitoring policy updated
     remove_servers:
      - server01
     wait: true
     state: update

RETURN VALUES                   *oneandone_monitoring_policy-return values*

   Common return values are documented here, the following are the fields unique to this module:

          Key        Returned                                                                               Description
   monitoring_policy          Information about the monitoring policy that was processed
   dictionary        always   Sample:
                              {"id": "92B74394A397ECC3359825C1656D67A6", "name": "Default Policy"}

STATUS                   *oneandone_monitoring_policy-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Amel Ajdinovic (@aajdinov)
     • Ethan Devenport (@edevenport)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *oneandone_monitoring_policy-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/oneandone_monitoring_policy_module.html
