SYNOPSIS                   *consul_session*

     • Allows the addition, modification and deletion of sessions in a consul cluster. These sessions can then be used in conjunction with key value pairs to implement distributed locks. In depth
       documentation for working with sessions can be found at http://www.consul.io/docs/internals/sessions.html

REQUIREMENTS                   *consul_session-requirements*

   The below requirements are needed on the host that executes this module.

     • python-consul
     • requests

PARAMETERS                   *consul_session-parameters*

     Parameter    Choices/Defaults                                                                              Comments
   behavior         Choices:
   string           • delete       The optional behavior that can be attached to the session when it is created. This controls the behavior when a session is invalidated.
                    • release ←
   checks                          Checks that will be used to verify the session health. If all the checks fail, the session will be invalidated and any locks associated with the session will be
   list                            release and can be acquired once the associated lock delay has expired.
   datacenter                      The name of the datacenter in which the session exists or should be created.
   string
   delay          Default:         The optional lock delay that can be attached to the session when it is created. Locks for invalidated sessions ar blocked from being acquired until this delay has
   integer        15               expired. Durations are in seconds.
   host           Default:         The host of the consul agent defaults to localhost.
   string         "localhost"
   id                              ID of the session, required when state is either info or remove.
   string
   name                            The name that should be associated with the session. Required when state=node is used.
   string
   node                            The name of the node that with which the session will be associated. by default this is the name of the agent.
   string
   port           Default:         The port on which the consul agent is running.
   integer        8500
   scheme         Default:         The protocol scheme on which the consul agent is running.
   string         "http"
                    Choices:
                    • absent       Whether the session should be present i.e. created if it doesn't exist, or absent, removed if present. If created, the id for the session is returned in the
   state            • info         output. If absent, id is required to remove the session. Info for a single session, all the sessions for a node or all available sessions can be retrieved by
   string           • list         specifying info, node or list for the state; for node or info, the node name or session id is required as parameter.
                    • node
                    • present ←
   validate_certs   Choices:
   boolean          • no           Whether to verify the TLS certificate of the consul agent.
                    • yes ←

EXAMPLES                   *consul_session-examples*

 - name: register basic session with consul
   consul_session:
     name: session1

 - name: register a session with an existing check
   consul_session:
     name: session_with_check
     checks:
       - existing_check_name

 - name: register a session with lock_delay
   consul_session:
     name: session_with_delay
     delay: 20s

 - name: retrieve info about session by id
   consul_session:
     id: session_id
     state: info

 - name: retrieve active sessions
   consul_session:
     state: list

STATUS                   *consul_session-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Steve Gargan (@sgargan)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *consul_session-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/consul_session_module.html
