SYNOPSIS                   *avi_api_session*

     • This module can be used for calling any resources defined in Avi REST API. https://avinetworks.com/
     • This module is useful for invoking HTTP Patch methods and accessing resources that do not have an REST object associated with them.

REQUIREMENTS                   *avi_api_session-requirements*

   The below requirements are needed on the host that executes this module.

     • avisdk

PARAMETERS                   *avi_api_session-parameters*

               Parameter             Choices/Defaults                                                                    Comments
   api_context                                        Avi API context that includes current session ID and CSRF Token.
   dictionary                                         This allows user to perform single login and re-use the session.
   added in 2.5
   api_version                       Default:         Avi API version of to use for Avi API and objects.
   string                            "16.4.4"
   avi_credentials
   dictionary                                         Avi Credentials dictionary which can be used in lieu of enumerating Avi Controller login details.
   added in 2.5
               api_version           Default:         Avi controller version
               -                     "16.4.4"
               controller                             Avi controller IP or SQDN
               -
               csrftoken                              Avi controller API csrftoken to reuse existing session with session id
               -
               password                               Avi controller password
               -
               port                                   Avi controller port
               -
               session_id                             Avi controller API session id to reuse existing session with csrftoken
               -
               tenant                Default:         Avi controller tenant
               -                     "admin"
               tenant_uuid                            Avi controller tenant UUID
               -
               timeout               Default:         Avi controller request timeout
               -                     300
               token                                  Avi controller API token
               -
               username                               Avi controller username
               -
   avi_disable_session_cache_as_fact   Choices:
   boolean                             • no           It disables avi session information to be cached as a fact.
   added in 2.6                        • yes
   controller                        Default:         IP address or hostname of the controller. The default value is the environment variable AVI_CONTROLLER.
   string                            ""
   data                                               HTTP body in YAML or JSON format.
   -
                                       Choices:
                                       • get
   http_method                         • put          Allowed HTTP methods for RESTful services and are supported by Avi Controller.
   - / required                        • post
                                       • patch
                                       • delete
   params                                             Query parameters passed to the HTTP API.
   -
   password                          Default:         Password of Avi user in Avi controller. The default value is the environment variable AVI_PASSWORD.
   string                            ""
   path                                               Path for Avi API resource. For example, path: virtualservice will translate to api/virtualserivce.
   -
   tenant                            Default:         Name of tenant used for all Avi API calls and context of object.
   string                            "admin"
   tenant_uuid                       Default:         UUID of tenant used for all Avi API calls and context of object.
   string                            ""
   timeout                           Default:         Timeout (in seconds) for Avi API calls.
   -                                 60
   username                          Default:         Username used for accessing Avi controller. The default value is the environment variable AVI_USERNAME.
   string                            ""

NOTES                   *avi_api_session-notes*

   Note

     • For more information on using Ansible to manage Avi Network devices see https://www.ansible.com/ansible-avi-networks.

EXAMPLES                   *avi_api_session-examples*

 - name: Get Pool Information using avi_api_session
   avi_api_session:
     controller: "{{ controller }}"
     username: "{{ username }}"
     password: "{{ password }}"
     http_method: get
     path: pool
     params:
       name: "{{ pool_name }}"
     api_version: 16.4
   register: pool_results

 - name: Patch Pool with list of servers
   avi_api_session:
     controller: "{{ controller }}"
     username: "{{ username }}"
     password: "{{ password }}"
     http_method: patch
     path: "{{ pool_path }}"
     api_version: 16.4
     data:
       add:
         servers:
           - ip:
               addr: 10.10.10.10
               type: V4
           - ip:
               addr: 20.20.20.20
               type: V4
   register: updated_pool

 - name: Fetch Pool metrics bandwidth and connections rate
   avi_api_session:
     controller: "{{ controller }}"
     username: "{{ username }}"
     password: "{{ password }}"
     http_method: get
     path: analytics/metrics/pool
     api_version: 16.4
     params:
       name: "{{ pool_name }}"
       metric_id: l4_server.avg_bandwidth,l4_server.avg_complete_conns
       step: 300
       limit: 10
   register: pool_metrics

RETURN VALUES                   *avi_api_session-return values*

   Common return values are documented here, the following are the fields unique to this module:

      Key         Returned                                                                                  Description
   obj        success, changed Avi REST resource
   dictionary

STATUS                   *avi_api_session-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Gaurav Rastogi (@grastogi23) <grastogi@avinetworks.com>

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *avi_api_session-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/avi_api_session_module.html
