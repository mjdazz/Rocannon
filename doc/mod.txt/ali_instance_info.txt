SYNOPSIS                   *ali_instance_info*

     • This module fetches data from the Open API in Alicloud. The module must be called from within the ECS instance itself.
     • This module was called ali_instance_facts before Ansible 2.9. The usage did not change.

   Aliases: ali_instance_facts

REQUIREMENTS                   *ali_instance_info-requirements*

   The below requirements are needed on the host that executes this module.

     • footmark >= 1.1.16
     • python >= 2.6

PARAMETERS                   *ali_instance_info-parameters*

          Parameter        Choices/Defaults                                                                         Comments
   alicloud_access_key                      Aliyun Cloud access key.
   string                                   If not set then the value of environment variable ALICLOUD_ACCESS_KEY, ALICLOUD_ACCESS_KEY_ID will be used instead.
                                            aliases: access_key_id, access_key
   alicloud_region                          The Aliyun Cloud region to use.
   string                                   If not specified then the value of environment variable ALICLOUD_REGION, ALICLOUD_REGION_ID will be used instead.
                                            aliases: region, region_id
   alicloud_secret_key                      Aliyun Cloud secret key.
   string                                   If not set then the value of environment variable ALICLOUD_SECRET_KEY, ALICLOUD_SECRET_ACCESS_KEY will be used instead.
                                            aliases: secret_access_key, secret_key
   alicloud_security_token                  The Aliyun Cloud security token.
   string                                   If not specified then the value of environment variable ALICLOUD_SECURITY_TOKEN will be used instead.
                                            aliases: security_token
   availability_zone                        Aliyun availability zone ID in which to launch the instance
   -                                        aliases: alicloud_zone
   instance_ids                             A list of ECS instance ids.
   -                                        aliases: ids
   instance_names                           A list of ECS instance names.
   -                                        aliases: names
   instance_tags                            A hash/dictionaries of instance tags. {"key":"value"}
   -                                        aliases: tags

NOTES                   *ali_instance_info-notes*

   Note

     • If parameters are not set within the module, the following environment variables can be used in decreasing order of precedence ALICLOUD_ACCESS_KEY or ALICLOUD_ACCESS_KEY_ID,
       ALICLOUD_SECRET_KEY or ALICLOUD_SECRET_ACCESS_KEY, ALICLOUD_REGION or ALICLOUD_REGION_ID, ALICLOUD_SECURITY_TOKEN
     • ALICLOUD_REGION or ALICLOUD_REGION_ID can be typically be used to specify the ALICLOUD region, when required, but this can also be configured in the footmark config file

EXAMPLES                   *ali_instance_info-examples*

 # Fetch instances details according to setting different filters
 - name: fetch instances details example
   hosts: localhost
   vars:
     alicloud_access_key: <your-alicloud-access-key>
     alicloud_secret_key: <your-alicloud-secret-key>
     alicloud_region: cn-beijing
     availability_zone: cn-beijing-a

   tasks:
     - name: Find all instances in the specified region
       ali_instance_info:
         alicloud_access_key: '{{ alicloud_access_key }}'
         alicloud_secret_key: '{{ alicloud_secret_key }}'
         alicloud_region: '{{ alicloud_region }}'
       register: all_instances

     - name: Find all instances based on the specified ids
       ali_instance_info:
         alicloud_access_key: '{{ alicloud_access_key }}'
         alicloud_secret_key: '{{ alicloud_secret_key }}'
         alicloud_region: '{{ alicloud_region }}'
         instance_ids:
           - "i-35b333d9"
           - "i-ddav43kd"
       register: instances_by_ids

     - name: Find all instances based on the specified names/name-prefixes
       ali_instance_info:
         alicloud_access_key: '{{ alicloud_access_key }}'
         alicloud_secret_key: '{{ alicloud_secret_key }}'
         alicloud_region: '{{ alicloud_region }}'
         instance_names:
           - "ecs_instance-1"
           - "ecs_instance_2"
       register: instances_by_ids

RETURN VALUES                   *ali_instance_info-return values*

   Common return values are documented here, the following are the fields unique to this module:

               Key              Returned                                                                         Description
   ids                                   List of ECS instance IDs
   list                         always   Sample:
                                         ['i-12345er', 'i-3245fs']
   instances                    always   List of ECS instances
   complex
     availability_zone                   The availability zone of the instance is in.
     string                     always   Sample:
                                         cn-beijing-a
     block_device_mappings      always   Any block device mapping entries for the instance.
     complex
         attach_time                     The time stamp when the attachment initiated.
         string                 always   Sample:
                                         2018-06-25T04:08:26Z
         delete_on_termination           Indicates whether the volume is deleted on instance termination.
         boolean                always   Sample:
                                         True
         device_name                     The device name exposed to the instance (for example, /dev/xvda).
         string                 always   Sample:
                                         /dev/xvda
         status                          The attachment state.
         string                 always   Sample:
                                         in_use
         volume_id                       The ID of the cloud disk.
         string                 always   Sample:
                                         d-2zei53pjsi117y6gf9t6
     cpu                                 The CPU core count of the instance.
     integer                    always   Sample:
                                         4
     creation_time                       The time the instance was created.
     string                     always   Sample:
                                         2018-06-25T04:08Z
     description                         The instance description.
     string                     always   Sample:
                                         my ansible instance
     eip                        always   The attribution of EIP associated with the instance.
     complex
         allocation_id                   The ID of the EIP.
         string                 always   Sample:
                                         eip-12345
         internet_charge_type            The internet charge type of the EIP.
         string                 always   Sample:
                                         paybybandwidth
         ip_address                      EIP address.
         string                 always   Sample:
                                         42.10.2.2
     expired_time                        The time the instance will expire.
     string                     always   Sample:
                                         2099-12-31T15:59Z
     gpu                        always   The attribution of instance GPU.
     complex
         amount                 always   The count of the GPU.
         integer
         spec                   always   The specification of the GPU.
         string
     host_name                           The host name of the instance.
     string                     always   Sample:
                                         iZ2zewaoZ
     id                                  Alias of instance_id.
     string                     always   Sample:
                                         i-abc12345
     image_id                            The ID of the image used to launch the instance.
     string                     always   Sample:
                                         m-0011223344
     inner_ip_address                    The inner IPv4 address of the classic instance.
     string                     always   Sample:
                                         10.0.0.2
     instance_charge_type                The instance charge type.
     string                     always   Sample:
                                         PostPaid
     instance_id                         ECS instance resource ID.
     string                     always   Sample:
                                         i-abc12345
     instance_name                       The name of the instance.
     string                     always   Sample:
                                         my-ecs
     instance_type                       The instance type of the running instance.
     string                     always   Sample:
                                         ecs.sn1ne.xlarge
     internet_charge_type                The billing method of the network bandwidth.
     string                     always   Sample:
                                         PayByBandwidth
     internet_max_bandwidth_in           Maximum incoming bandwidth from the internet network.
     integer                    always   Sample:
                                         200
     internet_max_bandwidth_out          Maximum incoming bandwidth from the internet network.
     integer                    always   Sample:
                                         20
     io_optimized               always   Indicates whether the instance is optimized for EBS I/O.
     boolean
     memory                              Memory size of the instance.
     integer                    always   Sample:
                                         8192
     network_interfaces         always   One or more network interfaces for the instance.
     complex
         mac_address                     The MAC address.
         string                 always   Sample:
                                         00:11:22:33:44:55
         network_interface_id            The ID of the network interface.
         string                 always   Sample:
                                         eni-01234567
         primary_ip_address              The primary IPv4 address of the network interface within the vswitch.
         string                 always   Sample:
                                         10.0.0.1
     osname                              The operation system name of the instance owned.
     string                     always   Sample:
                                         CentOS
     ostype                              The operation system type of the instance owned.
     string                     always   Sample:
                                         linux
     private_ip_address                  The IPv4 address of the network interface within the subnet.
     string                     always   Sample:
                                         10.0.0.1
     public_ip_address                   The public IPv4 address assigned to the instance
     string                     always   Sample:
                                         43.0.0.1
     resource_group_id                   The id of the resource group to which the instance belongs.
     string                     always   Sample:
                                         my-ecs-group
     security_groups            always   One or more security groups for the instance.
     list of complex
         group_id                        The ID of the security group.
         string                 always   Sample:
                                         sg-0123456
         group_name                      The name of the security group.
         string                 always   Sample:
                                         my-security-group
     status                              The current status of the instance.
     string                     always   Sample:
                                         running
     tags                       always   Any tags assigned to the instance.
     dictionary
     vpc_id                              The ID of the VPC the instance is in.
     dictionary                 always   Sample:
                                         vpc-0011223344
     vswitch_id                          The ID of the vswitch in which the instance is running.
     string                     always   Sample:
                                         vsw-dew00abcdef

STATUS                   *ali_instance_info-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • He Guimin (@xiaozhu36)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *ali_instance_info-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/ali_instance_info_module.html
