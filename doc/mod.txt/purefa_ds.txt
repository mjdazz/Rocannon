SYNOPSIS                   *purefa_ds*

     • Set or erase configuration for the directory service. There is no facility to SSL certificates at this time. Use the FlashArray GUI for this additional configuration work.
     • To modify an existing directory service configuration you must first delete an existing configuration and then recreate with new settings.

REQUIREMENTS                   *purefa_ds-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • purestorage

PARAMETERS                   *purefa_ds-parameters*

     Parameter   Choices/Defaults                                                                              Comments
   aa_group                       Sets the common Name (CN) of the directory service group containing administrators with full privileges when managing the FlashArray. The name should be just the
   string                         Common Name of the group without the CN= specifier. Common Names should not exceed 64 characters in length.
                                  Not Supported from Purity 5.2.0 or higher. Use purefa_dsrole module.
   api_token
   string /                       FlashArray API token for admin privileged user.
   required
   base_dn                        Sets the base of the Distinguished Name (DN) of the directory service groups. The base should consist of only Domain Components (DCs). The base_dn will populate
   string /                       with a default value when a URI is entered by parsing domain components from the URI. The base DN should specify DC= for each domain component and multiple DCs
   required                       should be separated by commas.
   bind_password                  Sets the password of the bind_user user name account.
   string
   bind_user                      Sets the user name that can be used to bind to and query the directory.
   string                         For Active Directory, enter the username - often referred to as sAMAccountName or User Logon Name - of the account that is used to perform directory lookups.
                                  For OpenLDAP, enter the full DN of the user.
   enable          Choices:
   boolean         • no ←         Whether to enable or disable directory service support.
                   • yes
   fa_url
   string /                       FlashArray management IPv4 address or Hostname.
   required
                                  Specifies where the configured groups are located in the directory tree. This field consists of Organizational Units (OUs) that combine with the base DN attribute
   group_base                     and the configured group CNs to complete the full Distinguished Name of the groups. The group base should specify OU= for each OU and multiple OUs should be
   string                         separated by commas. The order of OUs is important and should get larger in scope from left to right. Each OU should not exceed 64 characters in length.
                                  Not Supported from Purity 5.2.0 or higher. Use purefa_dsrole module.
   ro_group                       Sets the common Name (CN) of the configured directory service group containing users with read-only privileges on the FlashArray. This name should be just the
   string                         Common Name of the group without the CN= specifier. Common Names should not exceed 64 characters in length.
                                  Not Supported from Purity 5.2.0 or higher. Use purefa_dsrole module.
   sa_group                       Sets the common Name (CN) of the configured directory service group containing administrators with storage-related privileges on the FlashArray. This name should
   string                         be just the Common Name of the group without the CN= specifier. Common Names should not exceed 64 characters in length.
                                  Not Supported from Purity 5.2.0 or higher. Use purefa_dsrole module.
   state           Choices:
   string          • absent       Create or delete directory service configuration
                   • present ←
   uri                            A list of up to 30 URIs of the directory servers. Each URI must include the scheme ldap:// or ldaps:// (for LDAP over SSL), a hostname, and a domain name or IP
   list                           address. For example, ldap://ad.company.com configures the directory service with the hostname "ad" in the domain "company.com" while specifying the unencrypted
                                  LDAP protocol.

NOTES                   *purefa_ds-notes*

   Note

     • This module requires the purestorage Python library
     • You must set PUREFA_URL and PUREFA_API environment variables if fa_url and api_token arguments are not passed to the module directly

EXAMPLES                   *purefa_ds-examples*

 - name: Delete existing directory service
   purefa_ds:
     state: absent
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

 - name: Create directory service (disabled) - Pre-5.2.0
   purefa_ds:
     uri: "ldap://lab.purestorage.com"
     base_dn: "DC=lab,DC=purestorage,DC=com"
     bind_user: Administrator
     bind_password: password
     group_base: "OU=Pure-Admin"
     ro_group: PureReadOnly
     sa_group: PureStorage
     aa_group: PureAdmin
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

 - name: Create directory service (disabled) - 5.2.0 or higher
   purefa_ds:
     uri: "ldap://lab.purestorage.com"
     base_dn: "DC=lab,DC=purestorage,DC=com"
     bind_user: Administrator
     bind_password: password
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

 - name: Enable existing directory service
   purefa_ds:
     enable: true
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

 - name: Disable existing directory service
   purefa_ds:
     enable: false
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

 - name: Create directory service (enabled) - Pre-5.2.0
   purefa_ds:
     enable: true
     uri: "ldap://lab.purestorage.com"
     base_dn: "DC=lab,DC=purestorage,DC=com"
     bind_user: Administrator
     bind_password: password
     group_base: "OU=Pure-Admin"
     ro_group: PureReadOnly
     sa_group: PureStorage
     aa_group: PureAdmin
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

 - name: Create directory service (enabled) - 5.2.0 or higher
   purefa_ds:
     enable: true
     uri: "ldap://lab.purestorage.com"
     base_dn: "DC=lab,DC=purestorage,DC=com"
     bind_user: Administrator
     bind_password: password
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

STATUS                   *purefa_ds-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Pure Storage Ansible Team (@sdodsley) <pure-ansible-team@purestorage.com>

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *purefa_ds-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/purefa_ds_module.html
