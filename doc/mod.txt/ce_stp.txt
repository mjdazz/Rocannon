SYNOPSIS                   *ce_stp*

     • Manages STP configurations on HUAWEI CloudEngine switches.

PARAMETERS                   *ce_stp-parameters*

          Parameter        Choices/Defaults                                                                         Comments
   bpdu_filter               Choices:
   -                         • enable       Specify a port as a BPDU filter port.
                             • disable
   bpdu_protection           Choices:
   -                         • enable       Configure BPDU protection on an edge port. This function prevents network flapping caused by attack packets.
                             • disable
   cost                                     Set the path cost of the current port. The default instance is 0.
   -
   edged_port                Choices:
   -                         • enable       Set the current port as an edge port.
                             • disable
   interface                                Interface name. If the value is all, will apply configuration to all interfaces. if the value is a special name, only support input the full name.
   -
   loop_protection           Choices:
   -                         • enable       Enable loop protection on the current port.
                             • disable
   root_protection           Choices:
   -                         • enable       Enable root protection on the current port.
                             • disable
   state                     Choices:
   -                         • present ←    Specify desired state of the resource.
                             • absent
   stp_converge              Choices:
   -                         • fast         STP convergence mode. Fast means set STP aging mode to Fast. Normal means set STP aging mode to Normal.
                             • normal
   stp_enable                Choices:
   -                         • enable       Enable or disable STP on a switch.
                             • disable
                             Choices:
   stp_mode                  • stp          Set an operation mode for the current MSTP process. The mode can be STP, RSTP, or MSTP.
   -                         • rstp
                             • mstp
   tc_protection             Choices:
   -                         • enable       Configure the TC BPDU protection function for an MSTP process.
                             • disable
   tc_protection_interval                   Set the time the MSTP device takes to handle the maximum number of TC BPDUs and immediately refresh forwarding entries. The value is an integer ranging
   -                                        from 1 to 600, in seconds.
   tc_protection_threshold                  Set the maximum number of TC BPDUs that the MSTP can handle. The value is an integer ranging from 1 to 255. The default value is 1 on the switch.
   -

NOTES                   *ce_stp-notes*

   Note

     • Recommended connection is network_cli.
     • This module also works with local connections for legacy playbooks.

EXAMPLES                   *ce_stp-examples*

 - name: CloudEngine stp test
   hosts: cloudengine
   connection: local
   gather_facts: no
   vars:
     cli:
       host: "{{ inventory_hostname }}"
       port: "{{ ansible_ssh_port }}"
       username: "{{ username }}"
       password: "{{ password }}"
       transport: cli

   tasks:

   - name: "Config stp mode"
     ce_stp:
       state: present
       stp_mode: stp
       provider: "{{ cli }}"

   - name: "Undo stp mode"
     ce_stp:
       state: absent
       stp_mode: stp
       provider: "{{ cli }}"

   - name: "Enable bpdu protection"
     ce_stp:
       state: present
       bpdu_protection: enable
       provider: "{{ cli }}"

   - name: "Disable bpdu protection"
     ce_stp:
       state: present
       bpdu_protection: disable
       provider: "{{ cli }}"

RETURN VALUES                   *ce_stp-return values*

   Common return values are documented here, the following are the fields unique to this module:

      Key     Returned                                                                                  Description
   changed             check to see if a change was made on the device
   boolean    always   Sample:
                       True
   end_state           k/v pairs of aaa params after module execution
   dictionary always   Sample:
                       {'bpdu_protection': 'enable'}
   existing            k/v pairs of existing aaa server
   dictionary always   Sample:
                       {'bpdu_protection': 'disable'}
   proposed            k/v pairs of parameters passed into module
   dictionary always   Sample:
                       {'bpdu_protection': 'enable', 'state': 'present'}
   updates             command sent to the device
   list       always   Sample:
                       ['stp bpdu-protection']

STATUS                   *ce_stp-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • wangdezhuang (@QijunPan)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *ce_stp-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/ce_stp_module.html
