SYNOPSIS                   *win_domain_group*

     • Creates, modifies or removes groups in Active Directory.
     • For local groups, use the win_group module instead.

PARAMETERS                   *win_domain_group-parameters*

        Parameter       Choices/Defaults                                                                           Comments
   attributes                             A dict of custom LDAP attributes to set on the group.
   dictionary                             This can be used to set custom attributes that are not exposed as module parameters, e.g. mail.
                                          See the examples on how to format this parameter.
   category              Choices:         The category of the group, this is the value to assign to the LDAP groupType attribute.
   string                • distribution   If a new group is created then security will be used by default.
                         • security
   description                            The value to be assigned to the LDAP description attribute.
   string
   display_name                           The value to assign to the LDAP displayName attribute.
   string
   domain_password                        The password for username.
   string
   domain_server                          Specifies the Active Directory Domain Services instance to connect to.
   string                                 Can be in the form of an FQDN or NetBIOS name.
   added in 2.5                           If not specified then the value is based on the domain of the computer running PowerShell.
   domain_username                        The username to use when interacting with AD.
   string                                 If this is not set then the user Ansible used to log in with will be used instead.
   ignore_protection     Choices:         Will ignore the ProtectedFromAccidentalDeletion flag when deleting or moving a group.
   boolean               • no ←           The module will fail if one of these actions need to occur and this value is set to no.
                         • yes
   managed_by                             The value to be assigned to the LDAP managedBy attribute.
   string                                 This value can be in the forms Distinguished Name, objectGUID, objectSid or sAMAccountName, see examples for more details.
   name                                   The name of the group to create, modify or remove.
   string / required                      This value can be in the forms Distinguished Name, objectGUID, objectSid or sAMAccountName, see examples for more details.
                                          The full LDAP path to create or move the group to.
   organizational_unit                    This should be the path to the parent object to create or move the group to.
   string                                 See examples for details of how this path is formed.
                                          aliases: ou, path
   protect               Choices:         Will set the ProtectedFromAccidentalDeletion flag based on this value.
   boolean               • no             This flag stops a user from deleting or moving a group to a different path.
                         • yes
                         Choices:
   scope                 • domainlocal    The scope of the group.
   string                • global         If state=present and the group doesn't exist then this must be set.
                         • universal
   state                 Choices:         If state=present this module will ensure the group is created and is configured accordingly.
   string                • absent         If state=absent this module will delete the group if it exists
                         • present ←

NOTES                   *win_domain_group-notes*

   Note

     • This must be run on a host that has the ActiveDirectory powershell module installed.

SEE ALSO                   *win_domain_group-see also*

   See also

   win_domain – Ensures the existence of a Windows domain
   The official documentation on the win_domain module.

   win_domain_controller – Manage domain controller/member server state for a Windows host
   The official documentation on the win_domain_controller module.

   win_domain_computer – Manage computers in Active Directory
   The official documentation on the win_domain_computer module.

   win_domain_membership – Manage domain/workgroup membership for a Windows host
   The official documentation on the win_domain_membership module.

   win_domain_user – Manages Windows Active Directory user accounts
   The official documentation on the win_domain_user module.

   win_group – Add and remove local groups
   The official documentation on the win_group module.

   win_group_membership – Manage Windows local group membership
   The official documentation on the win_group_membership module.

EXAMPLES                   *win_domain_group-examples*

 - name: Ensure the group Cow exists using sAMAccountName
   win_domain_group:
     name: Cow
     scope: global
     path: OU=groups,DC=ansible,DC=local

 - name: Ensure the group Cow doesn't exist using the Distinguished Name
   win_domain_group:
     name: CN=Cow,OU=groups,DC=ansible,DC=local
     state: absent

 - name: Delete group ignoring the protection flag
   win_domain_group:
     name: Cow
     state: absent
     ignore_protection: yes

 - name: Create group with delete protection enabled and custom attributes
   win_domain_group:
     name: Ansible Users
     scope: domainlocal
     category: security
     attributes:
       mail: [email protected]
       wWWHomePage: www.ansible.com
     ignore_protection: yes

 - name: Change the OU of a group using the SID and ignore the protection flag
   win_domain_group:
     name: S-1-5-21-2171456218-3732823212-122182344-1189
     scope: global
     organizational_unit: OU=groups,DC=ansible,DC=local
     ignore_protection: yes

 - name: Add managed_by user
   win_domain_group:
     name: Group Name Here
     managed_by: Domain Admins

 - name: Add group and specify the AD domain services to use for the create
   win_domain_group:
     name: Test Group
     domain_username: [email protected]
     domain_password: Password01!
     domain_server: corp-DC12.corp.ansible.com
     scope: domainlocal

RETURN VALUES                   *win_domain_group-return values*

   Common return values are documented here, the following are the fields unique to this module:

                  Key                     Returned                                                                       Description
                                      group exists and  Custom attributes that were set by the module. This does not show all the custom attributes rather just the ones that were set by the module.
   attributes                         attributes are    Sample:
   dictionary                         set on the module {'mail': '[email protected]', 'wWWHomePage': 'www.ansible.com'}
                                      invocation
   canonical_name                                       The canonical name of the group.
   string                             group exists      Sample:
                                                        ansible.local/groups/Cow
   category                                             The Group type value of the group, i.e. Security or Distribution.
   string                             group exists      Sample:
                                                        Security
   created                                              Whether a group was created
   boolean                            always            Sample:
                                                        True
   description                                          The Description of the group.
   string                             group exists      Sample:
                                                        Group Description
   display_name                                         The Display name of the group.
   string                             group exists      Sample:
                                                        Users who connect through RDP
   distinguished_name                                   The full Distinguished Name of the group.
   string                             group exists      Sample:
                                                        CN=Cow,OU=groups,DC=ansible,DC=local
   group_scope                                          The Group scope value of the group.
   string                             group exists      Sample:
                                                        Universal
   guid                                                 The guid of the group.
   string                             group exists      Sample:
                                                        512a9adb-3fc0-4a26-9df0-e6ea1740cf45
   managed_by                                           The full Distinguished Name of the AD object that is set on the managedBy attribute.
   string                             group exists      Sample:
                                                        CN=Domain Admins,CN=Users,DC=ansible,DC=local
   name                                                 The name of the group.
   string                             group exists      Sample:
                                                        Cow
   protected_from_accidental_deletion                   Whether the group is protected from accidental deletion.
   boolean                            group exists      Sample:
                                                        True
   sid                                                  The Security ID of the group.
   string                             group exists      Sample:
                                                        S-1-5-21-2171456218-3732823212-122182344-1189

STATUS                   *win_domain_group-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Jordan Borean (@jborean93)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *win_domain_group-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/win_domain_group_module.html
