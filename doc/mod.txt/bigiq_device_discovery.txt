SYNOPSIS                   *bigiq_device_discovery*

     • Discovers and imports BIG-IP device configuration on the BIG-IQ.

PARAMETERS                   *bigiq_device_discovery-parameters*

           Parameter          Choices/Defaults                                                                         Comments
                               Choices:
   access_conflict_policy      • use_bigiq       Sets the conflict resolution policy for Access module apm objects, only used when apm module is specified.
   string                      • use_bigip
                               • keep_version
   access_group_first_device   Choices:
   boolean                     • no              Specifies if the imported device is the first device in the access group to import shared configuration for that access group.
                               • yes ←
   access_group_name                             Access group name to import Access configuration for devices, once set it cannot be changed.
   string
   conflict_policy             Choices:
   string                      • use_bigiq ←     Sets the conflict resolution policy for shared objects across BIG-IP devices, except LTM profiles and monitors.
                               • use_bigip
   device_address                                The IP address of the BIG-IP device to be imported/managed.
   string / required
   device_conflict_policy      Choices:
   string                      • use_bigiq ←     Sets the conflict resolution policy for objects that are specific to a particular to a BIG-IP device and not shared among BIG-IP devices.
                               • use_bigip
   device_password                               The administrator password for the BIG-IP device.
   string                                        This parameter is only required when adding a new BIG-IP device to be managed.
   device_port               Default:            The port on which a device trust setup between BIG-IQ and BIG-IP should happen.
   integer                   443
   device_username                               The administrator username for the BIG-IP device.
   string                                        This parameter is only required when adding a new BIG-IP device to be managed.
   force                       Choices:
   boolean                     • no ←            Forces rediscovery and import of existing modules on the managed BIG-IP
                               • yes
   ha_name                                       DSC cluster name of the BIG-IP device to be managed.
   string                                        This is optional if the managed device is not a part of a cluster group.
                                                 When use_bigiq_sync is set to yes then this parameter becomes mandatory.
                               Choices:
                               • ltm
                               • asm             List of modules to be discovered and imported into the device.
   modules                     • apm             These modules must be provisioned on the target device otherwise operation will fail.
   list                        • afm             The ltm module must always be specified when performing discovery or re-discovery of the the device.
                               • dns             When asm or afm are specified shared_security module needs to also be declared.
                               • websafe
                               • security_shared
   provider
   dictionary                                    A dict object containing connection details.
   added in 2.5
        auth_provider                            Configures the auth provider for to obtain authentication tokens from the remote device.
        string                                   This option is really used when working with BIG-IQ devices.
        password                                 The password for the user account used to connect to the BIG-IP.
        string / required                        You may omit this option by setting the environment variable F5_PASSWORD.
                                                 aliases: pass, pwd
        server                                   The BIG-IP host.
        string / required                        You may omit this option by setting the environment variable F5_SERVER.
        server_port          Default:            The BIG-IP server port.
        integer              443                 You may omit this option by setting the environment variable F5_SERVER_PORT.
        ssh_keyfile                              Specifies the SSH keyfile to use to authenticate the connection to the remote device. This argument is only used for cli transports.
        path                                     You may omit this option by setting the environment variable ANSIBLE_NET_SSH_KEYFILE.
        timeout                                  Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded
        integer                                  before the operation is completed, the module will error.
        transport              Choices:
        string                 • cli             Configures the transport connection to use when connecting to the remote device.
                               • rest ←
        user                                     The username to connect to the BIG-IP with. This user must have administrative privileges on the device.
        string / required                        You may omit this option by setting the environment variable F5_USER.
        validate_certs         Choices:          If no, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.
        boolean                • no              You may omit this option by setting the environment variable F5_VALIDATE_CERTS.
                               • yes ←
   state                       Choices:          The state of the managed device on the system.
   string                      • absent          When present, enables new device addition as well as device rediscovery/import.
                               • present ←       When absent, completely removes the device from the system.
   statistics                                    Specify the statistics collection for discovered device.
   dictionary
        enable                 Choices:
        boolean                • no ←            Enables statistics collection on a device
                               • yes
                               Choices:
        interval               • 30
        integer                • 60 ←            Specify the interval in seconds the data is collected from the discovered device.
                               • 120
                               • 500
                               Choices:
                               • device ←
        stat_modules           • ltm ←
        list                   • dns             Specifies for which modules the data is being collected.

                             Default:
                             ["device", "ltm"]
        zone                 Default:            Specify in which DCD zone is collecting the data from device.
        string               "default"
   use_bigiq_sync              Choices:
   boolean                     • no ←            When set to true, BIG-IQ will manually synchronize configuration changes between members in a DSC cluster.
                               • yes
                               Choices:
   versioned_conflict_policy   • use_bigiq       Sets the conflict resolution policy for LTM profile and monitor objects that are specific to a BIG-IP software version.
   string                      • use_bigip
                               • keep_version

NOTES                   *bigiq_device_discovery-notes*

   Note

     • BIG-IQ >= 6.1.0.
     • This module does not support atomic removal of discovered modules on the device.
     • For more information on using Ansible to manage F5 Networks devices see https://www.ansible.com/integrations/networks/f5.
     • Requires BIG-IP software version >= 12.
     • The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the
       bigip_config module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.

EXAMPLES                   *bigiq_device_discovery-examples*

 - name: Discover a new device and import config, use default conflict policy.
   bigiq_device_discovery:
     device_address: 192.168.1.1
     device_username: bigipadmin
     device_password: bigipsecret
     modules:
       - ltm
       - afm
       - shared_security
     provider:
       password: secret
       server: lb.mydomain.com
       user: admin
   delegate_to: localhost

 - name: Discover a new device and import config, use non- default conflict policy.
   bigiq_device_discovery:
     device_address: 192.168.1.1
     modules:
       - ltm
       - dns
     conflict_policy: use_bigip
     provider:
       password: secret
       server: lb.mydomain.com
       user: admin
   delegate_to: localhost

 - name: Force full device rediscovery
   bigiq_device_discovery:
     device_address: 192.168.1.1
     modules:
       - ltm
       - afm
       - dns
       - shared_security
     force: yes
     provider:
       password: secret
       server: lb.mydomain.com
       user: admin
   delegate_to: localhost

 - name: Remove discovered device and its config
   bigiq_device_discovery:
     device_address: 192.168.1.1
     state: absent
     provider:
       password: secret
       server: lb.mydomain.com
       user: admin
   delegate_to: localhost

RETURN VALUES                   *bigiq_device_discovery-return values*

   Common return values are documented here, the following are the fields unique to this module:

              Key            Returned                                                                           Description
   access_conflict_policy             Sets the conflict resolution policy for Access module apm objects.
   string                    changed  Sample:
                                      keep_version
   access_group_first_device          First device in the access group to import shared configuration for that access group.
   boolean                   changed  Sample:
                                      True
   access_group_name                  Access group name to import Access configuration for devices.
   string                    changed  Sample:
                                      foo_group
   conflict_policy                    Sets the conflict resolution policy for shared objects across BIG-IP devices.
   string                    changed  Sample:
                                      use_bigip
   device_address                     The IP address of the BIG-IP device to be imported/managed.
   string                    changed  Sample:
                                      192.168.1.1
   device_conflict_policy             Sets the conflict resolution policy for objects that are specific to a particular to a BIG-IP device.
   string                    changed  Sample:
                                      use_bigip
   device_port                        The port on which a device trust setup between BIG-IQ and BIG-IP should happen.
   integer                   changed  Sample:
                                      10443
   ha_name                            DSC cluster name of the BIG-IP device to be managed.
   string                    changed  Sample:
                                      GROUP_1
   modules                            List of modules to be discovered and imported into the device.
   list                      changed  Sample:
                                      ['ltm', 'dns']
   use_bigiq_sync                     Indicate if BIG-IQ should manually synchronise DSC configuration.
   boolean                   changed  Sample:
                                      True
   versioned_conflict_policy          Sets the conflict resolution policy for LTM profile and monitor objects.
   string                    changed  Sample:
                                      keep_version

STATUS                   *bigiq_device_discovery-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by an Ansible Partner. [certified]

     • Wojciech Wypior (@wojtek0806)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *bigiq_device_discovery-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/bigiq_device_discovery_module.html
