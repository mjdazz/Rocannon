SYNOPSIS                   *vertica_user*

     • Adds or removes Vertica database user and, optionally, assigns roles.
     • A user will not be removed until all the dependencies have been dropped.
     • In such a situation, if the module tries to remove the user it will fail and only remove roles granted to the user.

REQUIREMENTS                   *vertica_user-requirements*

   The below requirements are needed on the host that executes this module.

     • unixODBC
     • pyodbc

PARAMETERS                   *vertica_user-parameters*

     Parameter    Choices/Defaults                                                                              Comments
   cluster        Default:         Name of the Vertica cluster.
   -              "localhost"
   db                              Name of the Vertica database.
   -
   expired          Choices:
   boolean          • no           Sets the user's password expiration.
                    • yes
   ldap             Choices:       Set to true if users are authenticated via LDAP.
   boolean          • no           The user will be created with password expired and set to $ldap$.
                    • yes
   login_password                  The password used to authenticate with.
   -
   login_user     Default:         The username used to authenticate with.
   -              "dbadmin"
   name                            Name of the user to add or remove.
   - / required
   password                        The user's password encrypted by the MD5 algorithm.
   -                               The password must be generated with the format "md5" + md5[password + username], resulting in a total of 35 characters. An easy way to do this is by querying the
                                   Vertica database with select 'md5'||md5('<user_password><user_name>').
   port           Default:         Vertica cluster port to connect to.
   -              5433
   profile                         Sets the user's profile.
   -
   resource_pool                   Sets the user's resource pool.
   -
   roles                           Comma separated list of roles to assign to the user.
   -                               aliases: role
                    Choices:
   state            • present ←    Whether to create present, drop absent or lock locked a user.
   -                • absent
                    • locked

NOTES                   *vertica_user-notes*

   Note

     • The default authentication assumes that you are either logging in as or sudo’ing to the dbadmin account on the host.
     • This module uses pyodbc, a Python ODBC database adapter. You must ensure that unixODBC and pyodbc is installed on the host and properly configured.
     • Configuring unixODBC for Vertica requires Driver = /opt/vertica/lib64/libverticaodbc.so to be added to the Vertica section of either /etc/odbcinst.ini or $HOME/.odbcinst.ini and both
       ErrorMessagesPath = /opt/vertica/lib64 and DriverManagerEncoding = UTF-16 to be added to the Driver section of either /etc/vertica.ini or $HOME/.vertica.ini.

EXAMPLES                   *vertica_user-examples*

 - name: creating a new vertica user with password
   vertica_user: name=user_name password=md5<encrypted_password> db=db_name state=present

 - name: creating a new vertica user authenticated via ldap with roles assigned
   vertica_user:
     name=user_name
     ldap=true
     db=db_name
     roles=schema_name_ro
     state=present

STATUS                   *vertica_user-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Dariusz Owczarek (@dareko)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *vertica_user-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/vertica_user_module.html
