SYNOPSIS                   *avi_analyticsprofile*

     • This module is used to configure AnalyticsProfile object
     • more examples at https://github.com/avinetworks/devops

REQUIREMENTS                   *avi_analyticsprofile-requirements*

   The below requirements are needed on the host that executes this module.

     • avisdk

PARAMETERS                   *avi_analyticsprofile-parameters*

                      Parameter                    Choices/Defaults                                                             Comments
                                                                    If a client receives an http response in less than the satisfactory latency threshold, the request is considered satisfied.
                                                                    It is considered tolerated if it is not satisfied and less than tolerated latency factor multiplied by the satisfactory latency
   apdex_response_threshold                                         threshold.
   -                                                                Greater than this number and the client's request is considered frustrated.
                                                                    Allowed values are 1-30000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 500.
                                                                    Client tolerated response latency factor.
   apdex_response_tolerated_factor                                  Client must receive a response within this factor times the satisfactory threshold (apdex_response_threshold) to be considered
   -                                                                tolerated.
                                                                    Allowed values are 1-1000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 4.0.
   apdex_rtt_threshold                                              Satisfactory client to avi round trip time(rtt).
   -                                                                Allowed values are 1-2000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 250.
                                                                    Tolerated client to avi round trip time(rtt) factor.
   apdex_rtt_tolerated_factor                                       It is a multiple of apdex_rtt_tolerated_factor.
   -                                                                Allowed values are 1-1000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 4.0.
                                                                    If a client is able to load a page in less than the satisfactory latency threshold, the pageload is considered satisfied.
                                                                    It is considered tolerated if it is greater than satisfied but less than the tolerated latency multiplied by satisfied latency.
   apdex_rum_threshold                                              Greater than this number and the client's request is considered frustrated.
   -                                                                A pageload includes the time for dns lookup, download of all http objects, and page render time.
                                                                    Allowed values are 1-30000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 5000.
   apdex_rum_tolerated_factor                                       Virtual service threshold factor for tolerated page load time (plt) as multiple of apdex_rum_threshold.
   -                                                                Allowed values are 1-1000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 4.0.
                                                                    A server http response is considered satisfied if latency is less than the satisfactory latency threshold.
   apdex_server_response_threshold                                  The response is considered tolerated when it is greater than satisfied but less than the tolerated latency factor " s_latency.
   -                                                                Greater than this number and the server response is considered frustrated.
                                                                    Allowed values are 1-30000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 400.
                                                                    Server tolerated response latency factor.
   apdex_server_response_tolerated_factor                           Servermust response within this factor times the satisfactory threshold (apdex_server_response_threshold) to be considered
   -                                                                tolerated.
                                                                    Allowed values are 1-1000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 4.0.
   apdex_server_rtt_threshold                                       Satisfactory client to avi round trip time(rtt).
   -                                                                Allowed values are 1-2000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 125.
                                                                    Tolerated client to avi round trip time(rtt) factor.
   apdex_server_rtt_tolerated_factor                                It is a multiple of apdex_rtt_tolerated_factor.
   -                                                                Allowed values are 1-1000.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 4.0.
   api_context                                                      Avi API context that includes current session ID and CSRF Token.
   dictionary                                                       This allows user to perform single login and re-use the session.
   added in 2.5
   api_version                                     Default:         Avi API version of to use for Avi API and objects.
   string                                          "16.4.4"
   avi_api_patch_op                                  Choices:
   -                                                 • add          Patch operation to use when using avi_api_update_method as patch.
   added in 2.5                                      • replace
                                                     • delete
   avi_api_update_method                             Choices:       Default method for object update is HTTP PUT.
   -                                                 • put ←        Setting to patch will override that behavior to use HTTP PATCH.
   added in 2.5                                      • patch
   avi_credentials
   dictionary                                                       Avi Credentials dictionary which can be used in lieu of enumerating Avi Controller login details.
   added in 2.5
                       api_version                 Default:         Avi controller version
                       -                           "16.4.4"
                       controller                                   Avi controller IP or SQDN
                       -
                       csrftoken                                    Avi controller API csrftoken to reuse existing session with session id
                       -
                       password                                     Avi controller password
                       -
                       port                                         Avi controller port
                       -
                       session_id                                   Avi controller API session id to reuse existing session with csrftoken
                       -
                       tenant                      Default:         Avi controller tenant
                       -                           "admin"
                       tenant_uuid                                  Avi controller tenant UUID
                       -
                       timeout                     Default:         Avi controller request timeout
                       -                           300
                       token                                        Avi controller API token
                       -
                       username                                     Avi controller username
                       -
   avi_disable_session_cache_as_fact                 Choices:
   boolean                                           • no           It disables avi session information to be cached as a fact.
   added in 2.6                                      • yes
   client_log_config                                                Configure which logs are sent to the avi controller from ses and how they are processed.
   -
   client_log_streaming_config                                      Configure to stream logs to an external server.
   -                                                                Field introduced in 17.1.1.
   added in 2.4
   conn_lossy_ooo_threshold                                         A connection between client and avi is considered lossy when more than this percentage of out of order packets are received.
   -                                                                Allowed values are 1-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 50.
                                                                    A connection between client and avi is considered lossy when more than this percentage of packets are retransmitted due to
   conn_lossy_timeo_rexmt_threshold                                 timeout.
   -                                                                Allowed values are 1-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 20.
   conn_lossy_total_rexmt_threshold                                 A connection between client and avi is considered lossy when more than this percentage of packets are retransmitted.
   -                                                                Allowed values are 1-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 50.
                                                                    A client connection is considered lossy when percentage of times a packet could not be transmitted due to tcp zero window is
   conn_lossy_zero_win_size_event_threshold                         above this threshold.
   -                                                                Allowed values are 0-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 2.
   conn_server_lossy_ooo_threshold                                  A connection between avi and server is considered lossy when more than this percentage of out of order packets are received.
   -                                                                Allowed values are 1-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 50.
                                                                    A connection between avi and server is considered lossy when more than this percentage of packets are retransmitted due to
   conn_server_lossy_timeo_rexmt_threshold                          timeout.
   -                                                                Allowed values are 1-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 20.
   conn_server_lossy_total_rexmt_threshold                          A connection between avi and server is considered lossy when more than this percentage of packets are retransmitted.
   -                                                                Allowed values are 1-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 50.
                                                                    A server connection is considered lossy when percentage of times a packet could not be transmitted due to tcp zero window is
   conn_server_lossy_zero_win_size_event_threshold                  above this threshold.
   -                                                                Allowed values are 0-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 2.
   controller                                      Default:         IP address or hostname of the controller. The default value is the environment variable AVI_CONTROLLER.
   string                                          ""
   description                                                      User defined description for the object.
   -
                                                                    Virtual service (vs) metrics are processed only when there is live data traffic on the vs.
   disable_ondemand_metrics                          Choices:       In case, vs is idle for a period of time as specified by ondemand_metrics_idle_timeout then metrics processing is suspended for
   boolean                                           • no           that vs.
   added in 2.9                                      • yes          Field introduced in 18.1.1.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as False.
   disable_se_analytics                              Choices:       Disable node (service engine) level analytics forvs metrics.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
                                                     Choices:       Disable analytics on backend servers.
   disable_server_analytics                          • no           This may be desired in container environment when there are large number of ephemeral servers.
   boolean                                           • yes          Additionally, no healthscore of servers is computed when server analytics is disabled.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as False.
   disable_vs_analytics                              Choices:       Disable virtualservice (frontend) analytics.
   boolean                                           • no           This flag disables metrics and healthscore for virtualservice.
   added in 2.9                                      • yes          Field introduced in 18.2.1.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                                    Enables advanced analytics features like anomaly detection.
   enable_advanced_analytics                         Choices:       If set to false, anomaly computation (and associated rules/events) for vs, pool and server metrics will be disabled.
   boolean                                           • no           However, setting it to false reduces cpu and memory requirements for analytics subsystem.
   added in 2.9                                      • yes          Field introduced in 17.2.13, 18.1.5, 18.2.1.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as True.
   exclude_client_close_before_request_as_error      Choices:       Exclude client closed connection before an http request could be completed from being classified as an error.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_dns_policy_drop_as_significant            Choices:       Exclude dns policy drops from the list of errors.
   boolean                                           • no           Field introduced in 17.2.2.
   added in 2.5                                      • yes          Default value when not specified in API or module is interpreted by Avi Controller as False.
   exclude_gs_down_as_error                          Choices:       Exclude queries to gslb services that are operationally down from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_http_error_codes                                         List of http status codes to be excluded from being classified as an error.
   -                                                                Error connections or responses impacts health score, are included as significant logs, and may be classified as part of a dos
                                                                    attack.
   exclude_invalid_dns_domain_as_error               Choices:       Exclude dns queries to domains outside the domains configured in the dns application profile from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_invalid_dns_query_as_error                Choices:       Exclude invalid dns queries from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_no_dns_record_as_error                    Choices:       Exclude queries to domains that did not have configured services/records from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_no_valid_gs_member_as_error               Choices:       Exclude queries to gslb services that have no available members from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_persistence_change_as_error               Choices:       Exclude persistence server changed while load balancing' from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_server_dns_error_as_error                 Choices:       Exclude server dns error response from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_server_tcp_reset_as_error                 Choices:       Exclude server tcp reset from errors.
   boolean                                           • no           It is common for applications like ms exchange.
                                                     • yes          Default value when not specified in API or module is interpreted by Avi Controller as False.
   exclude_sip_error_codes                                          List of sip status codes to be excluded from being classified as an error.
   -                                                                Field introduced in 17.2.13, 18.1.5, 18.2.1.
   added in 2.9
   exclude_syn_retransmit_as_error                   Choices:       Exclude 'server unanswered syns' from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_tcp_reset_as_error                        Choices:       Exclude tcp resets by client from the list of potential errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
   exclude_unsupported_dns_query_as_error            Choices:       Exclude unsupported dns queries from the list of errors.
   boolean                                           • no           Default value when not specified in API or module is interpreted by Avi Controller as False.
                                                     • yes
                                                                    Skips health score computation of pool servers when number of servers in a pool is more than this setting.
   healthscore_max_server_limit                                     Allowed values are 0-5000.
   -                                                                Special values are 0- 'server health score is disabled'.
   added in 2.9                                                     Field introduced in 17.2.13, 18.1.4.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 20.
   hs_event_throttle_window                                         Time window (in secs) within which only unique health change events should occur.
   -                                                                Default value when not specified in API or module is interpreted by Avi Controller as 1209600.
   hs_max_anomaly_penalty                                           Maximum penalty that may be deducted from health score for anomalies.
   -                                                                Allowed values are 0-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 10.
   hs_max_resources_penalty                                         Maximum penalty that may be deducted from health score for high resource utilization.
   -                                                                Allowed values are 0-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 25.
   hs_max_security_penalty                                          Maximum penalty that may be deducted from health score based on security assessment.
   -                                                                Allowed values are 0-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 100.
   hs_min_dos_rate                                                  Dos connection rate below which the dos security assessment will not kick in.
   -                                                                Default value when not specified in API or module is interpreted by Avi Controller as 1000.
                                                                    Adds free performance score credits to health score.
   hs_performance_boost                                             It can be used for compensating health score for known slow applications.
   -                                                                Allowed values are 0-100.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 0.
   hs_pscore_traffic_threshold_l4_client                            Threshold number of connections in 5min, below which apdexr, apdexc, rum_apdex, and other network quality metrics are not
   -                                                                computed.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 10.0.
   hs_pscore_traffic_threshold_l4_server                            Threshold number of connections in 5min, below which apdexr, apdexc, rum_apdex, and other network quality metrics are not
   -                                                                computed.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 10.0.
   hs_security_certscore_expired                                    Score assigned when the certificate has expired.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 0.0.
   hs_security_certscore_gt30d                                      Score assigned when the certificate expires in more than 30 days.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 5.0.
   hs_security_certscore_le07d                                      Score assigned when the certificate expires in less than or equal to 7 days.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 2.0.
   hs_security_certscore_le30d                                      Score assigned when the certificate expires in less than or equal to 30 days.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 4.0.
   hs_security_chain_invalidity_penalty                             Penalty for allowing certificates with invalid chain.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 1.0.
   hs_security_cipherscore_eq000b                                   Score assigned when the minimum cipher strength is 0 bits.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 0.0.
   hs_security_cipherscore_ge128b                                   Score assigned when the minimum cipher strength is greater than equal to 128 bits.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 5.0.
   hs_security_cipherscore_lt128b                                   Score assigned when the minimum cipher strength is less than 128 bits.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 3.5.
   hs_security_encalgo_score_none                                   Score assigned when no algorithm is used for encryption.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 0.0.
   hs_security_encalgo_score_rc4                                    Score assigned when rc4 algorithm is used for encryption.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 2.5.
   hs_security_hsts_penalty                                         Penalty for not enabling hsts.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 1.0.
   hs_security_nonpfs_penalty                                       Penalty for allowing non-pfs handshakes.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 1.0.
   hs_security_selfsignedcert_penalty                               Deprecated.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 1.0.
   hs_security_ssl30_score                                          Score assigned when supporting ssl3.0 encryption protocol.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 3.5.
   hs_security_tls10_score                                          Score assigned when supporting tls1.0 encryption protocol.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 5.0.
   hs_security_tls11_score                                          Score assigned when supporting tls1.1 encryption protocol.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 5.0.
   hs_security_tls12_score                                          Score assigned when supporting tls1.2 encryption protocol.
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 5.0.
   hs_security_weak_signature_algo_penalty                          Penalty for allowing weak signature algorithm(s).
   -                                                                Allowed values are 0-5.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 1.0.
   name                                                             The name of the analytics profile.
   - / required
   ondemand_metrics_idle_timeout                                    This flag sets the time duration of no live data traffic after which virtual service metrics processing is suspended.
   -                                                                It is applicable only when disable_ondemand_metrics is set to false.
   added in 2.9                                                     Field introduced in 18.1.1.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 1800.
   password                                        Default:         Password of Avi user in Avi controller. The default value is the environment variable AVI_PASSWORD.
   string                                          ""
   ranges                                                           List of http status code ranges to be excluded from being classified as an error.
   -
   resp_code_block                                                  Block of http response codes to be excluded from being classified as an error.
   -                                                                Enum options - AP_HTTP_RSP_4XX, AP_HTTP_RSP_5XX.
   sensitive_log_profile                                            Rules applied to the http application log for filtering sensitive information.
   -                                                                Field introduced in 17.2.10, 18.1.2.
   added in 2.9
                                                                    Maximum number of sip messages added in logs for a sip transaction.
   sip_log_depth                                                    By default, this value is 20.
   -                                                                Allowed values are 1-1000.
   added in 2.9                                                     Field introduced in 17.2.13, 18.1.5, 18.2.1.
                                                                    Default value when not specified in API or module is interpreted by Avi Controller as 20.
   state                                             Choices:
   -                                                 • absent       The state that should be applied on the entity.
                                                     • present ←
   tenant                                          Default:         Name of tenant used for all Avi API calls and context of object.
   string                                          "admin"
   tenant_ref                                                       It is a reference to an object of type tenant.
   -
   tenant_uuid                                     Default:         UUID of tenant used for all Avi API calls and context of object.
   string                                          ""
   url                                                              Avi controller URL of the object.
   -
   username                                        Default:         Username used for accessing Avi controller. The default value is the environment variable AVI_USERNAME.
   string                                          ""
   uuid                                                             Uuid of the analytics profile.
   -

NOTES                   *avi_analyticsprofile-notes*

   Note

     • For more information on using Ansible to manage Avi Network devices see https://www.ansible.com/ansible-avi-networks.

EXAMPLES                   *avi_analyticsprofile-examples*

 - name: Create a custom Analytics profile object
   avi_analyticsprofile:
     controller: '{{ controller }}'
     username: '{{ username }}'
     password: '{{ password }}'
     apdex_response_threshold: 500
     apdex_response_tolerated_factor: 4.0
     apdex_rtt_threshold: 250
     apdex_rtt_tolerated_factor: 4.0
     apdex_rum_threshold: 5000
     apdex_rum_tolerated_factor: 4.0
     apdex_server_response_threshold: 400
     apdex_server_response_tolerated_factor: 4.0
     apdex_server_rtt_threshold: 125
     apdex_server_rtt_tolerated_factor: 4.0
     conn_lossy_ooo_threshold: 50
     conn_lossy_timeo_rexmt_threshold: 20
     conn_lossy_total_rexmt_threshold: 50
     conn_lossy_zero_win_size_event_threshold: 2
     conn_server_lossy_ooo_threshold: 50
     conn_server_lossy_timeo_rexmt_threshold: 20
     conn_server_lossy_total_rexmt_threshold: 50
     conn_server_lossy_zero_win_size_event_threshold: 2
     disable_se_analytics: false
     disable_server_analytics: false
     exclude_client_close_before_request_as_error: false
     exclude_persistence_change_as_error: false
     exclude_server_tcp_reset_as_error: false
     exclude_syn_retransmit_as_error: false
     exclude_tcp_reset_as_error: false
     hs_event_throttle_window: 1209600
     hs_max_anomaly_penalty: 10
     hs_max_resources_penalty: 25
     hs_max_security_penalty: 100
     hs_min_dos_rate: 1000
     hs_performance_boost: 20
     hs_pscore_traffic_threshold_l4_client: 10.0
     hs_pscore_traffic_threshold_l4_server: 10.0
     hs_security_certscore_expired: 0.0
     hs_security_certscore_gt30d: 5.0
     hs_security_certscore_le07d: 2.0
     hs_security_certscore_le30d: 4.0
     hs_security_chain_invalidity_penalty: 1.0
     hs_security_cipherscore_eq000b: 0.0
     hs_security_cipherscore_ge128b: 5.0
     hs_security_cipherscore_lt128b: 3.5
     hs_security_encalgo_score_none: 0.0
     hs_security_encalgo_score_rc4: 2.5
     hs_security_hsts_penalty: 0.0
     hs_security_nonpfs_penalty: 1.0
     hs_security_selfsignedcert_penalty: 1.0
     hs_security_ssl30_score: 3.5
     hs_security_tls10_score: 5.0
     hs_security_tls11_score: 5.0
     hs_security_tls12_score: 5.0
     hs_security_weak_signature_algo_penalty: 1.0
     name: jason-analytics-profile
     tenant_ref: Demo

RETURN VALUES                   *avi_analyticsprofile-return values*

   Common return values are documented here, the following are the fields unique to this module:

      Key         Returned                                                                                  Description
   obj        success, changed AnalyticsProfile (api/analyticsprofile) object
   dictionary

STATUS                   *avi_analyticsprofile-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Gaurav Rastogi (@grastogi23) <grastogi@avinetworks.com>

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *avi_analyticsprofile-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/avi_analyticsprofile_module.html
