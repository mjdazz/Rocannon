SYNOPSIS                   *mongodb_replicaset*

     • Initialises a MongoDB replicaset in a new deployment.
     • Validates the replicaset name for existing deployments.

REQUIREMENTS                   *mongodb_replicaset-requirements*

   The below requirements are needed on the host that executes this module.

     • pymongo

PARAMETERS                   *mongodb_replicaset-parameters*

          Parameter          Choices/Defaults                                                                          Comments
   arbiter_at_index                              Identifies the position of the member in the array that is an arbiter.
   integer
   chaining_allowed          Choices:            When settings.chaining_allowed=true, the replicaset allows secondary members to replicate from other secondary members.
   boolean                   • no                When settings.chaining_allowed=false, secondaries can replicate only from the primary.
                             • yes ←
   election_timeout_millis Default:              The time limit in milliseconds for detecting when a replicaset's primary is unreachable.
   integer                 10000
   heartbeat_timeout_secs  Default:              Number of seconds that the replicaset members wait for a successful heartbeat from each other.
   integer                 10                    If a member does not respond in time, other members mark the delinquent member as inaccessible.
                                                 The setting only applies when using protocol_version=0. When using protocol_version=1 the relevant setting is settings.election_timeout_millis.
   login_database          Default:              The database where login credentials are stored.
   string                  "admin"
   login_host              Default:              The MongoDB hostname.
   string                  "localhost"
   login_password                                The password to authenticate with.
   string
   login_port              Default:              The MongoDB port to login to.
   integer                 27017
   login_user                                    The username to authenticate with.
   string
   members                                       A comma-separated string or a yaml list consisting of the replicaset members.
   list                                          Supply as a simple csv string, i.e. mongodb1:27017,mongodb2:27017,mongodb3:27017.
                                                 If a port number is not provided then 27017 is assumed.
   protocol_version          Choices:
   integer                   • 0                 Version of the replicaset election protocol.
                             • 1 ←
   replica_set             Default:              Replicaset name.
   string                  "rs0"
   ssl                       Choices:
   boolean                   • no ←              Whether to use an SSL connection when connecting to the database
                             • yes
                             Choices:
   ssl_cert_reqs             • CERT_NONE         Specifies whether a certificate is required from the other side of the connection, and whether it will be validated if provided.
   string                    • CERT_OPTIONAL
                             • CERT_REQUIRED ←
   validate                  Choices:
   boolean                   • no                Performs some basic validation on the provided replicaset config.
                             • yes ←

NOTES                   *mongodb_replicaset-notes*

   Note

     • Requires the pymongo Python package on the remote host, version 2.4.2+. This can be installed using pip or the OS package manager. @see
       http://api.mongodb.org/python/current/installation.html

EXAMPLES                   *mongodb_replicaset-examples*

 # Create a replicaset called 'rs0' with the 3 provided members
 - name: Ensure replicaset rs0 exists
   mongodb_replicaset:
     login_host: localhost
     login_user: admin
     login_password: admin
     replica_set: rs0
     members:
     - mongodb1:27017
     - mongodb2:27017
     - mongodb3:27017
   when: groups.mongod.index(inventory_hostname) == 0

 # Create two single-node replicasets on the localhost for testing
 - name: Ensure replicaset rs0 exists
   mongodb_replicaset:
     login_host: localhost
     login_port: 3001
     login_user: admin
     login_password: secret
     login_database: admin
     replica_set: rs0
     members: localhost:3001
     validate: no

 - name: Ensure replicaset rs1 exists
   mongodb_replicaset:
     login_host: localhost
     login_port: 3002
     login_user: admin
     login_password: secret
     login_database: admin
     replica_set: rs1
     members: localhost:3002
     validate: no

RETURN VALUES                   *mongodb_replicaset-return values*

   Common return values are documented here, the following are the fields unique to this module:

          Key         Returned                                                                              Description
   mongodb_replicaset success  The name of the replicaset that has been created.
   string

STATUS                   *mongodb_replicaset-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Rhys Campbell (@rhysmeister)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *mongodb_replicaset-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/mongodb_replicaset_module.html
