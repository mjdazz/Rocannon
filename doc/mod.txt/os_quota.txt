SYNOPSIS                   *os_quota*

     • Manage OpenStack Quotas. Quotas can be created, updated or deleted using this module. A quota will be updated if matches an existing project and is present.

REQUIREMENTS                   *os_quota-requirements*

   The below requirements are needed on the host that executes this module.

     • keystoneauth1 >= 3.4.0
     • openstacksdk >= 0.12.0
     • openstacksdk >= 0.13.0
     • python >= 2.7

PARAMETERS                   *os_quota-parameters*

        Parameter       Choices/Defaults                                                                           Comments
   api_timeout                           How long should the socket layer wait before timing out for API calls. If this is omitted, nothing will be passed to the requests library.
   integer
                                         Dictionary containing auth information as needed by the cloud's auth plugin strategy. For the default password plugin, this would contain auth_url,
   auth                                  username, password, project_name and any information about domains (for example, os_user_domain_name or os_project_domain_name) if the cloud supports them.
   dictionary                            For other plugins, this param will need to contain whatever parameters that auth plugin requires. This parameter is not needed if a named cloud is provided
                                         or OpenStack OS_" environment variables are present.
   auth_type                             Name of the auth plugin to use. If the cloud uses something other than password authentication, the name of the plugin should be indicated here and the
   string                                contents of the auth parameter should be updated accordingly.
   availability_zone                     Ignored. Present for backwards compatibility
   -
   backup_gigabytes                      Maximum size of backups in GB's.
   -
   backups                               Maximum number of backups allowed.
   -
   ca_cert                               A path to a CA Cert bundle that can be used as part of verifying SSL API requests.
   string                                aliases: cacert
   client_cert                           A path to a client certificate to use as part of the SSL transaction.
   string                                aliases: cert
   client_key                            A path to a client key to use as part of the SSL transaction.
   string                                aliases: key
   cloud                                 Named cloud or cloud config to operate against. If cloud is a string, it references a named cloud config as defined in an OpenStack clouds.yaml file.
   raw                                   Provides default values for auth and auth_type. This parameter is not needed if auth is provided or if OpenStack OS_" environment variables are present. If
                                         cloud is a dict, it contains a complete cloud configuration like would be in a section of clouds.yaml.
   cores                                 Maximum number of CPU's per project.
   -
   fixed_ips                             Number of fixed IP's to allow.
   -
   floating_ips                          Number of floating IP's to allow in Compute.
   -                                     aliases: compute_floating_ips
   floatingip                            Number of floating IP's to allow in Network.
   -                                     aliases: network_floating_ips
   gigabytes                             Maximum volume storage allowed for project.
   -
   gigabytes_lvm                         Maximum size in GB's of individual lvm volumes.
   -
   injected_file_size                    Maximum file size in bytes.
   -
   injected_files                        Number of injected files to allow.
   -
   injected_path_size                    Maximum path size.
   -
   instances                             Maximum number of instances allowed.
   -
                          Choices:
   interface              • admin        Endpoint URL type to fetch from the service catalog.
   string                 • internal     aliases: endpoint_type
                          • public ←
   key_pairs                             Number of key pairs to allow.
   -
   loadbalancer
   -                                     Number of load balancers to allow.
   added in 2.4
   name                                  Name of the OpenStack Project to manage.
   - / required
   network                               Number of networks to allow.
   -
   per_volume_gigabytes                  Maximum size in GB's of individual volumes.
   -
   pool
   -                                     Number of load balancer pools to allow.
   added in 2.4
   port                                  Number of Network ports to allow, this needs to be greater than the instances limit.
   -
   properties                            Number of properties to allow.
   -
   ram                                   Maximum amount of ram in MB to allow.
   -
   rbac_policy                           Number of policies to allow.
   -
   region_name                           Name of the region.
   string
   router                                Number of routers to allow.
   -
   security_group                        Number of security groups to allow.
   -
   security_group_rule                   Number of rules per security group to allow.
   -
   server_group_members                  Number of server group members to allow.
   -
   server_groups                         Number of server groups to allow.
   -
   snapshots                             Number of snapshots to allow.
   -
   snapshots_lvm                         Number of LVM snapshots to allow.
   -
   state                Default:         A value of present sets the quota and a value of absent resets the quota to system defaults.
   -                    "present"
   subnet                                Number of subnets to allow.
   -
   subnetpool                            Number of subnet pools to allow.
   -
   timeout              Default:         How long should ansible wait for the requested resource.
   integer              180
   validate_certs         Choices:       Whether or not SSL API requests should be verified.
   boolean                • no ←         Before Ansible 2.3 this defaulted to yes.
                          • yes          aliases: verify
   volumes                               Number of volumes to allow.
   -
   volumes_lvm                           Number of LVM volumes to allow.
   -
   wait                   Choices:
   boolean                • no           Should ansible wait until the requested resource is complete.
                          • yes ←

NOTES                   *os_quota-notes*

   Note

     • The standard OpenStack environment variables, such as OS_USERNAME may be used instead of providing explicit values.
     • Auth information is driven by openstacksdk, which means that values can come from a yaml config file in /etc/ansible/openstack.yaml, /etc/openstack/clouds.yaml or
       ~/.config/openstack/clouds.yaml, then from standard environment variables, then finally by explicit parameters in plays. More information can be found at
       https://docs.openstack.org/openstacksdk/

EXAMPLES                   *os_quota-examples*

 # List a Project Quota
 - os_quota:
     cloud: mycloud
     name: demoproject

 # Set a Project back to the defaults
 - os_quota:
     cloud: mycloud
     name: demoproject
     state: absent

 # Update a Project Quota for cores
 - os_quota:
     cloud: mycloud
     name: demoproject
     cores: 100

 # Update a Project Quota
 - os_quota:
     name: demoproject
     cores: 1000
     volumes: 20
     volumes_type:
       - volume_lvm: 10

 # Complete example based on list of projects
 - name: Update quotas
   os_quota:
     name: "{{ item.name }}"
     backup_gigabytes: "{{ item.backup_gigabytes }}"
     backups: "{{ item.backups }}"
     cores: "{{ item.cores }}"
     fixed_ips: "{{ item.fixed_ips }}"
     floating_ips: "{{ item.floating_ips }}"
     floatingip: "{{ item.floatingip }}"
     gigabytes: "{{ item.gigabytes }}"
     injected_file_size: "{{ item.injected_file_size }}"
     injected_files: "{{ item.injected_files }}"
     injected_path_size: "{{ item.injected_path_size }}"
     instances: "{{ item.instances }}"
     key_pairs: "{{ item.key_pairs }}"
     loadbalancer: "{{ item.loadbalancer }}"
     per_volume_gigabytes: "{{ item.per_volume_gigabytes }}"
     pool: "{{ item.pool }}"
     port: "{{ item.port }}"
     properties: "{{ item.properties }}"
     ram: "{{ item.ram }}"
     security_group_rule: "{{ item.security_group_rule }}"
     security_group: "{{ item.security_group }}"
     server_group_members: "{{ item.server_group_members }}"
     server_groups: "{{ item.server_groups }}"
     snapshots: "{{ item.snapshots }}"
     volumes: "{{ item.volumes }}"
     volumes_types:
       volumes_lvm: "{{ item.volumes_lvm }}"
     snapshots_types:
       snapshots_lvm: "{{ item.snapshots_lvm }}"
     gigabytes_types:
       gigabytes_lvm: "{{ item.gigabytes_lvm }}"
   with_items:
     - "{{ projects }}"
   when: item.state == "present"

RETURN VALUES                   *os_quota-return values*

   Common return values are documented here, the following are the fields unique to this module:

         Key         Returned                                                                               Description
                               Dictionary describing the project quota.
                    Regardless Sample:
   openstack_quotas if changes {'openstack_quotas': {'compute': {'cores': 150, 'fixed_ips': -1, 'floating_ips': 10, 'injected_file_content_bytes': 10240, 'injected_file_path_bytes': 255,
   complex          where made 'injected_files': 5, 'instances': 100, 'key_pairs': 100, 'metadata_items': 128, 'ram': 153600, 'security_group_rules': 20, 'security_groups': 10,
                    or not     'server_group_members': 10, 'server_groups': 10}, 'network': {'floatingip': 50, 'loadbalancer': 10, 'network': 10, 'pool': 10, 'port': 160, 'rbac_policy': 10,
                               'router': 10, 'security_group': 10, 'security_group_rule': 100, 'subnet': 10, 'subnetpool': -1}, 'volume': {'backup_gigabytes': 1000, 'backups': 10, 'gigabytes':
                               1000, 'gigabytes_lvm': -1, 'per_volume_gigabytes': -1, 'snapshots': 10, 'snapshots_lvm': -1, 'volumes': 10, 'volumes_lvm': -1}}}

STATUS                   *os_quota-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Michael Gale (@mgale) <gale.michael@gmail.com>

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *os_quota-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/os_quota_module.html
