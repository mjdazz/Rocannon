SYNOPSIS                   *ovirt_affinity_label*

     • This module manage affinity labels in oVirt/RHV. It can also manage assignments of those labels to hosts and VMs.

REQUIREMENTS                   *ovirt_affinity_label-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • ovirt-engine-sdk-python >= 4.3.0

PARAMETERS                   *ovirt_affinity_label-parameters*

         Parameter        Choices/Defaults                                                                          Comments
   auth                                    Dictionary with values needed to create HTTP/HTTPS connection to oVirt:
   dictionary / required
                                           A PEM file containing the trusted CA certificates.
       ca_file                             The certificate presented by the server will be verified using these CA certificates.
       string                              If ca_file parameter is not set, system wide CA certificate store is used.
                                           Default value is set by OVIRT_CAFILE environment variable.
       headers                             Dictionary of HTTP headers to be added to each API call.
       dictionary
       hostname                            A string containing the hostname of the server, usually something like `server.example.com`.
       string                              Default value is set by OVIRT_HOSTNAME environment variable.
                                           Either url or hostname is required.
       insecure             Choices:
       boolean              • no           A boolean flag that indicates if the server TLS certificate and host name should be checked.
                            • yes
       kerberos             Choices:
       boolean              • no           A boolean flag indicating if Kerberos authentication should be used instead of the default basic authentication.
                            • yes
       password                            The password of the user.
       string / required                   Default value is set by OVIRT_PASSWORD environment variable.
       token                               Token to be used instead of login with username/password.
       string                              Default value is set by OVIRT_TOKEN environment variable.
       url                                 A string containing the API URL of the server, usually something like `https://server.example.com/ovirt-engine/api`.
       string                              Default value is set by OVIRT_URL environment variable.
                                           Either url or hostname is required.
       username                            The name of the user, something like [email protected].
       string / required                   Default value is set by OVIRT_USERNAME environment variable.
   cluster                                 Name of the cluster where vms and hosts resides.
   -
   fetch_nested             Choices:       If True the module will fetch additional data from the API.
   boolean                  • no           It will fetch IDs of the VMs disks, snapshots, etc. User can configure to fetch other attributes of the nested entities by specifying nested_attributes.
                            • yes
   hosts                                   List of the hosts names, which should have assigned this affinity label.
   -
   name                                    Name of the affinity label to manage.
   - / required
   nested_attributes                       Specifies list of the attributes which should be fetched from the API.
   list                                    This parameter apply only when fetch_nested is true.
   poll_interval          Default:         Number of the seconds the module waits until another poll request on entity status is sent.
   integer                3
   state                    Choices:
   -                        • present ←    Should the affinity label be present or absent.
                            • absent
   timeout                Default:         The amount of time in seconds the module should wait for the instance to get into desired state.
   integer                180
   vms                                     List of the VMs names, which should have assigned this affinity label.
   -
   wait                     Choices:
   boolean                  • no           yes if the module should wait for the entity to get into desired state.
                            • yes ←

NOTES                   *ovirt_affinity_label-notes*

   Note

     • In order to use this module you have to install oVirt Python SDK. To ensure it’s installed with correct version you can create the following task: pip: name=ovirt-engine-sdk-python
       version=4.3.0

EXAMPLES                   *ovirt_affinity_label-examples*

 # Examples don't contain auth parameter for simplicity,
 # look at ovirt_auth module to see how to reuse authentication:

 # Create(if not exists) and assign affinity label to vms vm1 and vm2 and host host1
 - ovirt_affinity_label:
     name: mylabel
     cluster: mycluster
     vms:
       - vm1
       - vm2
     hosts:
       - host1

 # To detach all VMs from label
 - ovirt_affinity_label:
     name: mylabel
     cluster: mycluster
     vms: []

 # Remove affinity label
 - ovirt_affinity_label:
     state: absent
     name: mylabel

RETURN VALUES                   *ovirt_affinity_label-return values*

   Common return values are documented here, the following are the fields unique to this module:

        Key       Returned                                                                                Description
                  On
                  success
   affinity_label if       Dictionary of all the affinity label attributes. Affinity label attributes can be found on your oVirt/RHV instance at following url:
   dictionary     affinity http://ovirt.github.io/ovirt-engine-api-model/master/#types/affinity_label.
                  label is
                  found.
                  On
                  success  ID of the affinity label which is managed
   id             if       Sample:
   string         affinity 7de90f31-222c-436c-a1ca-7e655bd5b60c
                  label is
                  found.

STATUS                   *ovirt_affinity_label-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Ondra Machacek (@machacekondra)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *ovirt_affinity_label-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/ovirt_affinity_label_module.html
