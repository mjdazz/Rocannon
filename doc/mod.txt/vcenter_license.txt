SYNOPSIS                   *vcenter_license*

     • Add and delete vCenter, ESXi server license keys.

REQUIREMENTS                   *vcenter_license-requirements*

   The below requirements are needed on the host that executes this module.

     • pyVmomi

PARAMETERS                   *vcenter_license-parameters*

       Parameter       Choices/Defaults                                                                             Comments
   cluster_name
   string                                  Name of the cluster to apply vSAN license.
   added in 2.9
   datacenter
   string                                  The datacenter name to use for the operation.
   added in 2.9
   esxi_hostname                           The hostname of the ESXi server to which the specified license will be assigned.
   string                                  This parameter is optional.
   added in 2.8
   hostname                                The hostname or IP address of the vSphere vCenter server.
   string                                  If the value is not specified in the task, the value of environment variable VMWARE_HOST will be used instead.
                                           Environment variable supported added in Ansible 2.6.
   labels            Default:              The optional labels of the license key to manage in vSphere vCenter.
   dictionary        {"source": "ansible"} This is dictionary with key/value pair.
   license                                 The license key to manage in vSphere vCenter.
   string / required
                                           The password of the vSphere vCenter server.
   password                                If the value is not specified in the task, the value of environment variable VMWARE_PASSWORD will be used instead.
   string                                  Environment variable supported added in Ansible 2.6.
                                           aliases: pass, pwd
   port              Default:              The port number of the vSphere vCenter server.
   integer           443                   If the value is not specified in the task, the value of environment variable VMWARE_PORT will be used instead.
   added in 2.5                            Environment variable supported added in Ansible 2.6.
   proxy_host                              Address of a proxy that will receive all HTTPS requests and relay them.
   string                                  The format is a hostname or a IP.
   added in 2.9                            If the value is not specified in the task, the value of environment variable VMWARE_PROXY_HOST will be used instead.
   proxy_port                              Port of the HTTP proxy that will receive all HTTPS requests and relay them.
   integer                                 If the value is not specified in the task, the value of environment variable VMWARE_PROXY_PORT will be used instead.
   added in 2.9
   state               Choices:
   string              • absent            Whether to add (present) or remove (absent) the license key.
                       • present ←
                                           The username of the vSphere vCenter server.
   username                                If the value is not specified in the task, the value of environment variable VMWARE_USER will be used instead.
   string                                  Environment variable supported added in Ansible 2.6.
                                           aliases: admin, user
                       Choices:            Allows connection when SSL certificates are not valid. Set to false when certificates are not trusted.
   validate_certs      • no                If the value is not specified in the task, the value of environment variable VMWARE_VALIDATE_CERTS will be used instead.
   boolean             • yes ←             Environment variable supported added in Ansible 2.6.
                                           If set to yes, please make sure Python >= 2.7.9 is installed on the given machine.

NOTES                   *vcenter_license-notes*

   Note

     • This module will also auto-assign the current vCenter to the license key if the product matches the license key, and vCenter us currently assigned an evaluation license only.
     • The evaluation license (00000-00000-00000-00000-00000) is not listed when unused.
     • If esxi_hostname is specified, then will assign the license key to the ESXi host.

EXAMPLES                   *vcenter_license-examples*

 - name: Add a new vCenter license
   vcenter_license:
     hostname: '{{ vcenter_hostname }}'
     username: '{{ vcenter_username }}'
     password: '{{ vcenter_password }}'
     license: f600d-21ae3-5592b-249e0-cc341
     state: present
   delegate_to: localhost

 - name: Remove an (unused) vCenter license
   vcenter_license:
     hostname: '{{ vcenter_hostname }}'
     username: '{{ vcenter_username }}'
     password: '{{ vcenter_password }}'
     license: f600d-21ae3-5592b-249e0-cc341
     state: absent
   delegate_to: localhost

 - name: Add ESXi license and assign to the ESXi host
   vcenter_license:
     hostname: '{{ vcenter_hostname }}'
     username: '{{ vcenter_username }}'
     password: '{{ vcenter_password }}'
     esxi_hostname: '{{ esxi_hostname }}'
     license: f600d-21ae3-5592b-249e0-dd502
     state: present
   delegate_to: localhost

 - name: Add vSAN license and assign to the given cluster
   vcenter_license:
     hostname: '{{ vcenter_hostname }}'
     username: '{{ vcenter_username }}'
     password: '{{ vcenter_password }}'
     datacenter: '{{ datacenter_name }}'
     cluster_name: '{{ cluster_name }}'
     license: f600d-21ae3-5592b-249e0-dd502
     state: present
   delegate_to: localhost

RETURN VALUES                   *vcenter_license-return values*

   Common return values are documented here, the following are the fields unique to this module:

     Key    Returned                                                                                   Description
   licenses          list of license keys after module executed
   list     always   Sample:
                     ['f600d-21ae3-5592b-249e0-cc341', '143cc-0e942-b2955-3ea12-d006f']

STATUS                   *vcenter_license-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Dag Wieers (@dagwieers)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *vcenter_license-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/vcenter_license_module.html
