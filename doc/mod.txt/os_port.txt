SYNOPSIS                   *os_port*

     • Add, Update or Remove ports from an OpenStack cloud. A state of ‘present’ will ensure the port is created or updated if required.

REQUIREMENTS                   *os_port-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • openstacksdk >= 0.12.0

PARAMETERS                   *os_port-parameters*

         Parameter         Choices/Defaults                                                                          Comments
   admin_state_up          Choices:
   boolean                 • no               Sets admin state.
                           • yes
   allowed_address_pairs                      Allowed address pairs list. Allowed address pairs are supported with dictionary structure. e.g. allowed_address_pairs: - ip_address: 10.1.0.12
   -                                          mac_address: ab:cd:ef:12:34:56 - ip_address: ...
   api_timeout                                How long should the socket layer wait before timing out for API calls. If this is omitted, nothing will be passed to the requests library.
   integer
                                              Dictionary containing auth information as needed by the cloud's auth plugin strategy. For the default password plugin, this would contain auth_url,
   auth                                       username, password, project_name and any information about domains (for example, os_user_domain_name or os_project_domain_name) if the cloud supports
   dictionary                                 them. For other plugins, this param will need to contain whatever parameters that auth plugin requires. This parameter is not needed if a named cloud
                                              is provided or OpenStack OS_" environment variables are present.
   auth_type                                  Name of the auth plugin to use. If the cloud uses something other than password authentication, the name of the plugin should be indicated here and the
   string                                     contents of the auth parameter should be updated accordingly.
   availability_zone                          Ignored. Present for backwards compatibility
   -
   ca_cert                                    A path to a CA Cert bundle that can be used as part of verifying SSL API requests.
   string                                     aliases: cacert
   client_cert                                A path to a client certificate to use as part of the SSL transaction.
   string                                     aliases: cert
   client_key                                 A path to a client key to use as part of the SSL transaction.
   string                                     aliases: key
   cloud                                      Named cloud or cloud config to operate against. If cloud is a string, it references a named cloud config as defined in an OpenStack clouds.yaml file.
   raw                                        Provides default values for auth and auth_type. This parameter is not needed if auth is provided or if OpenStack OS_" environment variables are
                                              present. If cloud is a dict, it contains a complete cloud configuration like would be in a section of clouds.yaml.
   device_id                                  Device ID of device using this port.
   -
   device_owner                               The ID of the entity that uses this port.
   -
   extra_dhcp_opts                            Extra dhcp options to be assigned to this port. Extra options are supported with dictionary structure. e.g. extra_dhcp_opts: - opt_name: opt name1
   -                                          opt_value: value1 - opt_name: ...
   fixed_ips                                  Desired IP and/or subnet for this port. Subnet is referenced by subnet_id and IP is referenced by ip_address.
   -
                           Choices:
   interface               • admin            Endpoint URL type to fetch from the service catalog.
   string                  • internal         aliases: endpoint_type
                           • public ←
   mac_address                                MAC address of this port.
   -
   name                                       Name that has to be given to the port.
   -
   network                                    Network ID or name this port belongs to.
   - / required
   no_security_groups      Choices:
   boolean                 • no ←             Do not associate a security group with this port.
                           • yes
   port_security_enabled   Choices:
   boolean                 • no               Whether to enable or disable the port security on the network.
   added in 2.8            • yes
   region_name                                Name of the region.
   string
   security_groups                            Security group(s) ID(s) or name(s) associated with the port (comma separated string or YAML list)
   -
   state                   Choices:
   -                       • present ←        Should the resource be present or absent.
                           • absent
   timeout               Default:             How long should ansible wait for the requested resource.
   integer               180
   validate_certs          Choices:           Whether or not SSL API requests should be verified.
   boolean                 • no ←             Before Ansible 2.3 this defaulted to yes.
                           • yes              aliases: verify
                           Choices:
                           • normal
   vnic_type               • direct
   -                       • direct-physical  The type of the port that should be created
   added in 2.8            • macvtap
                           • baremetal
                           • virtio-forwarder
   wait                    Choices:
   boolean                 • no               Should ansible wait until the requested resource is complete.
                           • yes ←

NOTES                   *os_port-notes*

   Note

     • The standard OpenStack environment variables, such as OS_USERNAME may be used instead of providing explicit values.
     • Auth information is driven by openstacksdk, which means that values can come from a yaml config file in /etc/ansible/openstack.yaml, /etc/openstack/clouds.yaml or
       ~/.config/openstack/clouds.yaml, then from standard environment variables, then finally by explicit parameters in plays. More information can be found at
       https://docs.openstack.org/openstacksdk/

EXAMPLES                   *os_port-examples*

 # Create a port
 - os_port:
     state: present
     auth:
       auth_url: https://identity.example.com
       username: admin
       password: admin
       project_name: admin
     name: port1
     network: foo

 # Create a port with a static IP
 - os_port:
     state: present
     auth:
       auth_url: https://identity.example.com
       username: admin
       password: admin
       project_name: admin
     name: port1
     network: foo
     fixed_ips:
       - ip_address: 10.1.0.21

 # Create a port with No security groups
 - os_port:
     state: present
     auth:
       auth_url: https://identity.example.com
       username: admin
       password: admin
       project_name: admin
     name: port1
     network: foo
     no_security_groups: True

 # Update the existing 'port1' port with multiple security groups (version 1)
 - os_port:
     state: present
     auth:
       auth_url: https://identity.example.com
       username: admin
       password: admin
       project_name: admin
     name: port1
     security_groups: 1496e8c7-4918-482a-9172-f4f00fc4a3a5,057d4bdf-6d4d-472...

 # Update the existing 'port1' port with multiple security groups (version 2)
 - os_port:
     state: present
     auth:
       auth_url: https://identity.example.com
       username: admin
       password: admin
       project_name: admin
     name: port1
     security_groups:
       - 1496e8c7-4918-482a-9172-f4f00fc4a3a5
       - 057d4bdf-6d4d-472...

 # Create port of type 'direct'
 - os_port:
     state: present
     auth:
       auth_url: https://identity.example.com
       username: admin
       password: admin
       project_name: admin
     name: port1
     network: foo
     vnic_type: direct

RETURN VALUES                   *os_port-return values*

   Common return values are documented here, the following are the fields unique to this module:

            Key          Returned                                                                             Description
   admin_state_up        success  Admin state up flag for this port.
   boolean
   allowed_address_pairs success  Allowed address pairs with this port.
   list
   fixed_ips             success  Fixed ip(s) associated with this port.
   list
   id                    success  Unique UUID.
   string
   name                  success  Name given to the port.
   string
   network_id            success  Network ID this port belongs in.
   string
   port_security_enabled success  Port security state on the network.
   boolean
   security_groups       success  Security group(s) associated with this port.
   list
   status                success  Port's status.
   string
   tenant_id             success  Tenant id associated with this port.
   string
   vnic_type             success  Type of the created port
   string

STATUS                   *os_port-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Davide Agnello (@dagnello)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *os_port-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/os_port_module.html
