SYNOPSIS                   *cli_config*

     • This module provides platform agnostic way of pushing text based configuration to network devices over network_cli connection plugin.

PARAMETERS                   *cli_config-parameters*

        Parameter      Choices/Defaults                                                                           Comments
   backup                Choices:       This argument will cause the module to create a full backup of the current running config from the remote device before any changes are made. If the
   boolean               • no ←         backup_options value is not given, the backup file is written to the backup folder in the playbook root directory or role root directory, if playbook is part
   added in 2.8          • yes          of an ansible role. If the directory does not exist, it is created.
   backup_options                       This is a dict object containing configurable options related to backup file path. The value of this option is read only when backup is set to yes, if backup
   dictionary                           is set to no this option will be silently ignored.
   added in 2.8
                                        This option provides the path ending with directory name in which the backup configuration file will be stored. If the directory does not exist it will be
          dir_path                      first created and the filename is either the value of filename or default filename as described in filename options description. If the path value is not
          path                          given in that case a backup directory will be created in the current working directory and backup configuration will be copied in filename within backup
                                        directory.
          filename                      The filename to be used to store the backup configuration. If the the filename is not given it will be generated based on the hostname, current time and date
          -                             in format defined by <hostname>_config.<current-date>@<current-time>
   commit                Choices:
   boolean               • no           The commit argument instructs the module to push the configuration to the device. This is mapped to module check mode.
                         • yes
   commit_comment                       The commit_comment argument specifies a text string to be used when committing the configuration. If the commit argument is set to False, this argument is
   string                               silently ignored. This argument is only valid for the platforms that support commit operation with comment.
   config                               The config to be pushed to the network device. This argument is mutually exclusive with rollback and either one of the option should be given as input. The
   string                               config should have indentation that the device uses.
   defaults              Choices:       The defaults argument will influence how the running-config is collected from the device. When the value is set to true, the command used to collect the
   boolean               • no ←         running-config is append with the all keyword. When the value is set to false, the command is issued without the all keyword.
                         • yes
   diff_ignore_lines                    Use this argument to specify one or more lines that should be ignored during the diff. This is used for lines in the configuration that are automatically
   -                                    updated by the system. This argument takes a list of regular expressions or exact line matches. Note that this parameter will be ignored if the platform has
                                        onbox diff support.
                         Choices:       Instructs the module on the way to perform the matching of the set of commands against the current device config. If diff_match is set to line, commands are
   diff_match            • line         matched line by line. If diff_match is set to strict, command lines are matched with respect to position. If diff_match is set to exact, command lines must
   -                     • strict       be an equal match. Finally, if diff_match is set to none, the module will not attempt to compare the source configuration with the running configuration on
                         • exact        the remote device. Note that this parameter will be ignored if the platform has onbox diff support.
                         • none
                         Choices:       Instructs the module on the way to perform the configuration on the device. If the diff_replace argument is set to line then the modified lines are pushed to
   diff_replace          • line         the device in configuration mode. If the argument is set to block then the entire command block is pushed to the device in configuration mode if any line is
   -                     • block        not correct. Note that this parameter will be ignored if the platform has onbox diff support.
                         • config
   multiline_delimiter                  This argument is used when pushing a multiline configuration element to the device. It specifies the character to use as the delimiting character. This only
   string                               applies to the configuration action.
                                        If the replace argument is set to yes, it will replace the entire running-config of the device with the config argument value. For devices that support
   replace                              replacing running configuration from file on device like NXOS/JUNOS, the replace argument takes path to the file on the device that will be used for
   string                               replacing the entire running-config. The value of config option should be None for such devices. Nexus 9K devices only support replace. Use net_put or
                                        nxos_file_copy in case of NXOS module to copy the flat file to remote device and then use set the fullpath to this argument.
   rollback                             The rollback argument instructs the module to rollback the current configuration to the identifier specified in the argument. If the specified rollback
   -                                    identifier does not exist on the remote device, the module will fail. To rollback to the most recent commit, set the rollback argument to 0. This option is
                                        mutually exclusive with config.

NOTES                   *cli_config-notes*

   Note

     • This module is supported on ansible_network_os network platforms. See the Network Platform Options for details.

EXAMPLES                   *cli_config-examples*

 - name: configure device with config
   cli_config:
     config: "{{ lookup('template', 'basic/config.j2') }}"

 - name: multiline config
   cli_config:
     config: |
       hostname foo
       feature nxapi

 - name: configure device with config with defaults enabled
   cli_config:
     config: "{{ lookup('template', 'basic/config.j2') }}"
     defaults: yes

 - name: Use diff_match
   cli_config:
     config: "{{ lookup('file', 'interface_config') }}"
     diff_match: none

 - name: nxos replace config
   cli_config:
     replace: 'bootflash:nxoscfg'

 - name: junos replace config
   cli_config:
     replace: '/var/home/ansible/junos01.cfg'

 - name: commit with comment
   cli_config:
     config: set system host-name foo
     commit_comment: this is a test

 - name: configurable backup path
   cli_config:
     config: "{{ lookup('template', 'basic/config.j2') }}"
     backup: yes
     backup_options:
       filename: backup.cfg
       dir_path: /home/user

RETURN VALUES                   *cli_config-return values*

   Common return values are documented here, the following are the fields unique to this module:

       Key          Returned                                                                                  Description
   backup_path                    The full path to the backup file
   string      when backup is yes Sample:
                                  /playbooks/ansible/backup/[email protected]:28:34
   commands                       The set of commands that will be pushed to the remote device
   list        always             Sample:
                                  ['interface Loopback999', 'no shutdown']

STATUS                   *cli_config-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Network Team. [network]

RED HAT SUPPORT                   *cli_config-red hat support*

     • Trishna Guha (@trishnaguha)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *cli_config-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/cli_config_module.html
