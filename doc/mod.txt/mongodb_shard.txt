SYNOPSIS                   *mongodb_shard*

     • Add and remove shards from a MongoDB Cluster.

REQUIREMENTS                   *mongodb_shard-requirements*

   The below requirements are needed on the host that executes this module.

     • pymongo

PARAMETERS                   *mongodb_shard-parameters*

     Parameter      Choices/Defaults                                                                              Comments
   login_database Default:              The database where login credentials are stored.
   -              "admin"
   login_host     Default:              The host to login to.
   -              "localhost"           This must be a mongos.
   login_password                       The password used to authenticate with.
   -
   login_port     Default:              The port to login to.
   -              27017
   login_user                           The user to login with.
   -
   shard          Default:              The shard connection string.
   - / required   null                  Should be supplied in the form <replicaset>/host:port as detailed in https://docs.mongodb.com/manual/tutorial/add-shards-to-shard-cluster/.
                                        For example rs0/example1.mongodb.com:27017.
   ssl              Choices:
   boolean          • no ←              Whether to use an SSL connection when connecting to the database.
                    • yes
                    Choices:
   ssl_cert_reqs    • CERT_REQUIRED ←   Specifies whether a certificate is required from the other side of the connection, and whether it will be validated if provided.
   -                • CERT_OPTIONAL
                    • CERT_NONE
   state            Choices:
   -                • present ←         Whether the shard should be present or absent from the Cluster.
                    • absent

NOTES                   *mongodb_shard-notes*

   Note

     • Requires the pymongo Python package on the remote host, version 2.4.2+.
     • This can be installed using pip or the OS package manager. @see http://api.mongodb.org/python/current/installation.html.

EXAMPLES                   *mongodb_shard-examples*

 # add a replicaset shard named rs1 with a member running on port 27018 on mongodb0.example.net
 - mongodb_shard:
     login_user: admin
     login_password: admin
     shard: "rs1/mongodb0.example.net:27018"
     state: present

 # add a standalone mongod shard running on port 27018 of mongodb0.example.net
 - mongodb_shard:
     login_user: admin
     login_password: admin
     shard: "mongodb0.example.net:27018"
     state: present

 # To remove a shard called 'rs1'
 - mongodb_shard:
     login_user: admin
     login_password: admin
     shard: rs1
     state: absent

 # Single node shard running on localhost
 - name: Ensure shard rs0 exists
   mongodb_shard:
     login_user: admin
     login_password: secret
     shard: "rs0/localhost:3001"
     state: present

 # Single node shard running on localhost
 - name: Ensure shard rs1 exists
   mongodb_shard:
     login_user: admin
     login_password: secret
     shard: "rs1/localhost:3002"
     state: present

RETURN VALUES                   *mongodb_shard-return values*

   Common return values are documented here, the following are the fields unique to this module:

        Key      Returned                                                                                 Description
   mongodb_shard success  The name of the shard to create.
   string

STATUS                   *mongodb_shard-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Rhys Campbell (@rhysmeister)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *mongodb_shard-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/mongodb_shard_module.html
