SYNOPSIS                   *ce_bgp_af*

     • Manages BGP Address-family configurations on HUAWEI CloudEngine switches.

PARAMETERS                   *ce_bgp_af-parameters*

             Parameter           Choices/Defaults                                                                      Comments
                                   Choices:
   active_route_advertise          • no_use ←     If the value is true, BGP is enabled to advertise only optimal routes in the RM to peers. If the value is false, BGP is not enabled to advertise
   -                               • true         only optimal routes in the RM to peers.
                                   • false
   add_path_sel_num                               Number of Add-Path routes. The value is an integer ranging from 2 to 64.
   -
                                   Choices:
                                   • ipv4uni
   af_type                         • ipv4multi
   - / required                    • ipv4vpn      Address family type of a BGP instance.
                                   • ipv6uni
                                   • ipv6vpn
                                   • evpn
                                   Choices:
   allow_invalid_as                • no_use ←     Allow routes with BGP origin AS validation result Invalid to be selected. If the value is true, invalid routes can participate in route selection.
   -                               • true         If the value is false, invalid routes cannot participate in route selection.
                                   • false
                                   Choices:
   always_compare_med              • no_use ←     If the value is true, the MEDs of routes learned from peers in different autonomous systems are compared when BGP selects an optimal route. If the
   -                               • true         value is false, the MEDs of routes learned from peers in different autonomous systems are not compared when BGP selects an optimal route.
                                   • false
                                   Choices:
   as_path_neglect                 • no_use ←     If the value is true, the AS path attribute is ignored when BGP selects an optimal route. If the value is false, the AS path attribute is not
   -                               • true         ignored when BGP selects an optimal route. An AS path with a smaller length has a higher priority.
                                   • false
                                   Choices:
   auto_frr_enable                 • no_use ←     If the value is true, BGP auto FRR is enabled. If the value is false, BGP auto FRR is disabled.
   -                               • true
                                   • false
   default_local_pref                             Set the Local-Preference attribute. The value is an integer. The value is an integer ranging from 0 to 4294967295.
   -
   default_med                                    Specify the Multi-Exit-Discriminator (MED) of BGP routes. The value is an integer ranging from 0 to 4294967295.
   -
                                   Choices:
   default_rt_import_enable        • no_use ←     If the value is true, importing default routes to the BGP routing table is allowed. If the value is false, importing default routes to the BGP
   -                               • true         routing table is not allowed.
                                   • false
                                   Choices:
   determin_med                    • no_use ←     If the value is true, BGP deterministic-MED is enabled. If the value is false, BGP deterministic-MED is disabled.
   -                               • true
                                   • false
                                   Choices:
   ebgp_ecmp_nexthop_changed       • no_use ←     If the value is true, the next hop of an advertised route is changed to the advertiser itself in EBGP load-balancing scenarios. If the value is
   -                               • true         false, the next hop of an advertised route is not changed to the advertiser itself in EBGP load-balancing scenarios.
                                   • false
                                   Choices:       If the value is true, after the fast EBGP interface awareness function is enabled, EBGP sessions on an interface are deleted immediately when the
   ebgp_if_sensitive               • no_use ←     interface goes Down. If the value is false, after the fast EBGP interface awareness function is enabled, EBGP sessions on an interface are not
   -                               • true         deleted immediately when the interface goes Down.
                                   • false
                                   Choices:
   ecmp_nexthop_changed            • no_use ←     If the value is true, the next hop of an advertised route is changed to the advertiser itself in BGP load-balancing scenarios. If the value is
   -                               • true         false, the next hop of an advertised route is not changed to the advertiser itself in BGP load-balancing scenarios.
                                   • false
                                   Choices:
   ibgp_ecmp_nexthop_changed       • no_use ←     If the value is true, the next hop of an advertised route is changed to the advertiser itself in IBGP load-balancing scenarios. If the value is
   -                               • true         false, the next hop of an advertised route is not changed to the advertiser itself in IBGP load-balancing scenarios.
                                   • false
                                   Choices:
   igp_metric_ignore               • no_use ←     If the value is true, the metrics of next-hop IGP routes are not compared when BGP selects an optimal route. If the value is false, the metrics of
   -                               • true         next-hop IGP routes are not compared when BGP selects an optimal route. A route with a smaller metric has a higher priority.
                                   • false
   import_process_id                              Process ID of an imported routing protocol. The value is an integer ranging from 0 to 4294967295.
   -
                                   Choices:
                                   • direct
                                   • ospf
   import_protocol                 • isis         Routing protocol from which routes can be imported.
   -                               • static
                                   • rip
                                   • ospfv3
                                   • ripng
   ingress_lsp_policy_name                        Ingress lsp policy name.
   -
                                   Choices:
   load_balancing_as_path_ignore   • no_use ←     Load balancing as path ignore.
   -                               • true
                                   • false
                                   Choices:
   lowest_priority                 • no_use ←     If the value is true, enable reduce priority to advertise route. If the value is false, disable reduce priority to advertise route.
   -                               • true
                                   • false
   mask_len                                       Specify the mask length of an IP address. The value is an integer ranging from 0 to 128.
   -
   max_load_ebgp_num                              Specify the maximum number of equal-cost EBGP routes. The value is an integer ranging from 1 to 65535.
   -
   max_load_ibgp_num                              Specify the maximum number of equal-cost IBGP routes. The value is an integer ranging from 1 to 65535.
   -
   maximum_load_balance                           Specify the maximum number of equal-cost routes in the BGP routing table. The value is an integer ranging from 1 to 65535.
   -
                                   Choices:
   med_none_as_maximum             • no_use ←     If the value is true, when BGP selects an optimal route, the system uses 4294967295 as the MED value of a route if the route's attribute does not
   -                               • true         carry a MED value. If the value is false, the system uses 0 as the MED value of a route if the route's attribute does not carry a MED value.
                                   • false
   network_address                                Specify the IP address advertised by BGP. The value is a string of 0 to 255 characters.
   -
                                   Choices:
   next_hop_sel_depend_type        • default ←    Next hop select depend type.
   -                               • dependTunnel
                                   • dependIp
                                   Choices:
   nexthop_third_party             • no_use ←     If the value is true, the third-party next hop function is enabled. If the value is false, the third-party next hop function is disabled.
   -                               • true
                                   • false
   nhp_relay_route_policy_name                    Specify the name of a route-policy for route iteration. The value is a string of 1 to 40 characters.
   -
                                   Choices:
   originator_prior                • no_use ←     Originator prior.
   -                               • true
                                   • false
                                   Choices:
   policy_ext_comm_enable          • no_use ←     If the value is true, modifying extended community attributes is allowed. If the value is false, modifying extended community attributes is not
   -                               • true         allowed.
                                   • false
                                   Choices:
   policy_vpn_target               • no_use ←     If the value is true, VPN-Target filtering function is performed for received VPN routes. If the value is false, VPN-Target filtering function is
   -                               • true         not performed for received VPN routes.
                                   • false
   preference_external                            Set the protocol priority of EBGP routes. The value is an integer ranging from 1 to 255.
   -
   preference_internal                            Set the protocol priority of IBGP routes. The value is an integer ranging from 1 to 255.
   -
   preference_local                               Set the protocol priority of a local BGP route. The value is an integer ranging from 1 to 255.
   -
   prefrence_policy_name                          Set a routing policy to filter routes so that a configured priority is applied to the routes that match the specified policy. The value is a string
   -                                              of 1 to 40 characters.
                                   Choices:
   reflect_between_client          • no_use ←     If the value is true, route reflection is enabled between clients. If the value is false, route reflection is disabled between clients.
   -                               • true
                                   • false
                                   Choices:
   reflect_chg_path                • no_use ←     If the value is true, the route reflector is enabled to modify route path attributes based on an export policy. If the value is false, the route
   -                               • true         reflector is disabled from modifying route path attributes based on an export policy.
                                   • false
   reflector_cluster_id                           Set a cluster ID. Configuring multiple RRs in a cluster can enhance the stability of the network. The value is an integer ranging from 1 to
   -                                              4294967295.
   reflector_cluster_ipv4                         Set a cluster ipv4 address. The value is expressed in the format of an IPv4 address.
   -
                                   Choices:
   relay_delay_enable              • no_use ←     If the value is true, relay delay enable. If the value is false, relay delay disable.
   -                               • true
                                   • false
                                   Choices:
   rib_only_enable                 • no_use ←     If the value is true, BGP routes cannot be advertised to the IP routing table. If the value is false, Routes preferred by BGP are advertised to the
   -                               • true         IP routing table.
                                   • false
   rib_only_policy_name                           Specify the name of a routing policy. The value is a string of 1 to 40 characters.
   -
   route_sel_delay                                Route selection delay. The value is an integer ranging from 0 to 3600.
   -
   router_id                                      ID of a router that is in IPv4 address format. The value is a string of 0 to 255 characters. The value is in dotted decimal notation.
   -
                                   Choices:
   router_id_neglect               • no_use ←     If the value is true, the router ID attribute is ignored when BGP selects the optimal route. If the value is false, the router ID attribute is not
   -                               • true         ignored when BGP selects the optimal route.
                                   • false
   rr_filter_number                               Set the number of the extended community filter supported by an RR group. The value is a string of 1 to 51 characters.
   -
   state                           Choices:
   -                               • present ←    Specify desired state of the resource.
                                   • absent
                                   Choices:
   summary_automatic               • no_use ←     If the value is true, automatic aggregation is enabled for locally imported routes. If the value is false, automatic aggregation is disabled for
   -                               • true         locally imported routes.
                                   • false
                                   Choices:
   supernet_label_adv              • no_use ←     If the value is true, the function to advertise supernetwork label is enabled. If the value is false, the function to advertise supernetwork label
   -                               • true         is disabled.
                                   • false
                                   Choices:
   supernet_uni_adv                • no_use ←     If the value is true, the function to advertise supernetwork unicast routes is enabled. If the value is false, the function to advertise
   -                               • true         supernetwork unicast routes is disabled.
                                   • false
   vrf_name                                       Name of a BGP instance. The name is a case-sensitive string of characters. The BGP instance can be used only after the corresponding VPN instance
   - / required                                   is created. The value is a string of 1 to 31 case-sensitive characters.
                                   Choices:
   vrf_rid_auto_sel                • no_use ←     If the value is true, VPN BGP instances are enabled to automatically select router IDs. If the value is false, VPN BGP instances are disabled from
   -                               • true         automatically selecting router IDs.
                                   • false

NOTES                   *ce_bgp_af-notes*

   Note

     • This module requires the netconf system service be enabled on the remote device being managed.
     • Recommended connection is netconf.
     • This module also works with local connections for legacy playbooks.

EXAMPLES                   *ce_bgp_af-examples*

 - name: CloudEngine BGP address family test
   hosts: cloudengine
   connection: local
   gather_facts: no
   vars:
     cli:
       host: "{{ inventory_hostname }}"
       port: "{{ ansible_ssh_port }}"
       username: "{{ username }}"
       password: "{{ password }}"
       transport: cli
   tasks:
   - name: "Config BGP Address_Family"
     ce_bgp_af:
       state: present
       vrf_name: js
       af_type: ipv4uni
       provider: "{{ cli }}"
   - name: "Undo BGP Address_Family"
     ce_bgp_af:
       state: absent
       vrf_name: js
       af_type: ipv4uni
       provider: "{{ cli }}"
   - name: "Config import route"
     ce_bgp_af:
       state: present
       vrf_name: js
       af_type: ipv4uni
       import_protocol: ospf
       import_process_id: 123
       provider: "{{ cli }}"
   - name: "Undo import route"
     ce_bgp_af:
       state: absent
       vrf_name: js
       af_type: ipv4uni
       import_protocol: ospf
       import_process_id: 123
       provider: "{{ cli }}"
   - name: "Config network route"
     ce_bgp_af:
       state: present
       vrf_name: js
       af_type: ipv4uni
       network_address: 1.1.1.1
       mask_len: 24
       provider: "{{ cli }}"
   - name: "Undo network route"
     ce_bgp_af:
       state: absent
       vrf_name: js
       af_type: ipv4uni
       network_address: 1.1.1.1
       mask_len: 24
       provider: "{{ cli }}"

RETURN VALUES                   *ce_bgp_af-return values*

   Common return values are documented here, the following are the fields unique to this module:

      Key     Returned                                                                                  Description
   changed             check to see if a change was made on the device
   boolean    always   Sample:
                       True
   end_state           k/v pairs of aaa params after module execution
   dictionary always   Sample:
                       {'af_type': 'ipv4uni', 'vrf_name': 'js'}
   existing   always   k/v pairs of existing aaa server
   dictionary
   proposed            k/v pairs of parameters passed into module
   dictionary always   Sample:
                       {'af_type': 'ipv4uni', 'state': 'present', 'vrf_name': 'js'}
   updates             command sent to the device
   list       always   Sample:
                       ['ipv4-family vpn-instance js']

STATUS                   *ce_bgp_af-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • wangdezhuang (@QijunPan)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *ce_bgp_af-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/ce_bgp_af_module.html
