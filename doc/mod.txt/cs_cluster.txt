SYNOPSIS                   *cs_cluster*

     • Create, update and remove clusters.

REQUIREMENTS                   *cs_cluster-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.6
     • cs >= 0.6.10

PARAMETERS                   *cs_cluster-parameters*

        Parameter        Choices/Defaults                                                                            Comments
                         Choices:            HTTP method used to query the API endpoint.
   api_http_method       • get               If not given, the CLOUDSTACK_METHOD env variable is considered.
   string                • post              As the last option, the value is taken from the ini config file, also see the notes.
                                             Fallback value is get if not specified.
   api_key                                   API key of the CloudStack API.
   string                                    If not given, the CLOUDSTACK_KEY env variable is considered.
                                             As the last option, the value is taken from the ini config file, also see the notes.
   api_region          Default:              Name of the ini section in the cloustack.ini file.
   string              "cloudstack"          If not given, the CLOUDSTACK_REGION env variable is considered.
   api_secret                                Secret key of the CloudStack API.
   string                                    If not set, the CLOUDSTACK_SECRET env variable is considered.
                                             As the last option, the value is taken from the ini config file, also see the notes.
                                             HTTP timeout in seconds.
   api_timeout                               If not given, the CLOUDSTACK_TIMEOUT env variable is considered.
   integer                                   As the last option, the value is taken from the ini config file, also see the notes.
                                             Fallback value is 10 seconds if not specified.
   api_url                                   URL of the CloudStack API e.g. https://cloud.example.com/client/api.
   string                                    If not given, the CLOUDSTACK_ENDPOINT env variable is considered.
                                             As the last option, the value is taken from the ini config file, also see the notes.
   cluster_type          Choices:            Type of the cluster.
   string                • CloudManaged      Required if state=present
                         • ExternalManaged
   guest_vswitch_name                        Name of virtual switch used for guest traffic in the cluster.
   string                                    This would override zone wide traffic label setting.
   guest_vswitch_type    Choices:            Type of virtual switch used for guest traffic in the cluster.
   string                • vmwaresvs         Allowed values are, vmwaresvs (for VMware standard vSwitch) and vmwaredvs (for VMware distributed vSwitch)
                         • vmwaredvs
   hypervisor                                Name the hypervisor to be used.
   string                                    Required if state=present.
                                             Possible values are KVM, VMware, BareMetal, XenServer, LXC, HyperV, UCS, OVM, Simulator.
   name                                      name of the cluster.
   string / required
   ovm3_cluster                              Ovm3 native OCFS2 clustering enabled for cluster.
   string
   ovm3_pool                                 Ovm3 native pooling enabled for cluster.
   string
   ovm3_vip                                  Ovm3 vip to use for pool (and cluster).
   string
   password                                  Password for the cluster.
   string
   pod                                       Name of the pod in which the cluster belongs to.
   string
   public_vswitch_name                       Name of virtual switch used for public traffic in the cluster.
   string                                    This would override zone wide traffic label setting.
   public_vswitch_type   Choices:            Type of virtual switch used for public traffic in the cluster.
   string                • vmwaresvs         Allowed values are, vmwaresvs (for VMware standard vSwitch) and vmwaredvs (for VMware distributed vSwitch)
                         • vmwaredvs
                         Choices:
   state                 • present ←
   string                • absent            State of the cluster.
                         • disabled
                         • enabled
   url                                       URL for the cluster
   string
   username                                  Username for the cluster.
   string
   vms_ip_address                            IP address of the VSM associated with this cluster.
   string
   vms_password                              Password for the VSM associated with this cluster.
   string
   vms_username                              Username for the VSM associated with this cluster.
   string
   zone                                      Name of the zone in which the cluster belongs to.
   string                                    If not set, default zone is used.

NOTES                   *cs_cluster-notes*

   Note

     • Ansible uses the cs library’s configuration method if credentials are not provided by the arguments api_url, api_key, api_secret. Configuration is read from several locations, in the
       following order. The CLOUDSTACK_ENDPOINT, CLOUDSTACK_KEY, CLOUDSTACK_SECRET and CLOUDSTACK_METHOD. CLOUDSTACK_TIMEOUT environment variables. A CLOUDSTACK_CONFIG environment variable pointing
       to an .ini file. A cloudstack.ini file in the current working directory. A .cloudstack.ini file in the users home directory. Optionally multiple credentials and endpoints can be specified
       using ini sections in cloudstack.ini. Use the argument api_region to select the section name, default section is cloudstack. See https://github.com/exoscale/cs for more information.
     • A detailed guide about cloudstack modules can be found in the CloudStack Cloud Guide.
     • This module supports check mode.

EXAMPLES                   *cs_cluster-examples*

 - name: Ensure a cluster is present
   cs_cluster:
     name: kvm-cluster-01
     zone: ch-zrh-ix-01
     hypervisor: KVM
     cluster_type: CloudManaged
   delegate_to: localhost

 - name: Ensure a cluster is disabled
   cs_cluster:
     name: kvm-cluster-01
     zone: ch-zrh-ix-01
     state: disabled
   delegate_to: localhost

 - name: Ensure a cluster is enabled
   cs_cluster:
     name: kvm-cluster-01
     zone: ch-zrh-ix-01
     state: enabled
   delegate_to: localhost

 - name: Ensure a cluster is absent
   cs_cluster:
     name: kvm-cluster-01
     zone: ch-zrh-ix-01
     state: absent
   delegate_to: localhost

RETURN VALUES                   *cs_cluster-return values*

   Common return values are documented here, the following are the fields unique to this module:

             Key           Returned                                                                            Description
   allocation_state                 State of the cluster.
   string                  success  Sample:
                                    Enabled
   cluster_type                     Type of the cluster.
   string                  success  Sample:
                                    ExternalManaged
   cpu_overcommit_ratio             The CPU overcommit ratio of the cluster.
   string                  success  Sample:
                                    1.0
   hypervisor                       Hypervisor of the cluster
   string                  success  Sample:
                                    VMware
   id                               UUID of the cluster.
   string                  success  Sample:
                                    04589590-ac63-4ffc-93f5-b698b8ac38b6
   managed_state                    Whether this cluster is managed by CloudStack.
   string                  success  Sample:
                                    Managed
   memory_overcommit_ratio          The memory overcommit ratio of the cluster.
   string                  success  Sample:
                                    1.0
   name                             Name of the cluster.
   string                  success  Sample:
                                    cluster01
   ovm3_vip                         Ovm3 VIP to use for pooling and/or clustering
   string                  success  Sample:
                                    10.10.10.101
   pod                              Name of pod the cluster is in.
   string                  success  Sample:
                                    pod01
   zone                             Name of zone the cluster is in.
   string                  success  Sample:
                                    ch-gva-2

STATUS                   *cs_cluster-status*

     • This module is guaranteed to have backward compatible interface changes going forward. [stableinterface]
     • This module is maintained by the Ansible Community. [community]

     • René Moser (@resmo)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *cs_cluster-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/cs_cluster_module.html
