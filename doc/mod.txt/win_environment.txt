SYNOPSIS                   *win_environment*

     • Uses .net Environment to set or remove environment variables and can set at User, Machine or Process level.
     • User level environment variables will be set, but not available until the user has logged off and on again.

PARAMETERS                   *win_environment-parameters*

       Parameter     Choices/Defaults                                                                            Comments
                       Choices:       The level at which to set the environment variable.
   level               • machine      Use machine to set for all users.
   string / required   • process      Use user to set for the current user that ansible is connected as.
                       • user         Use process to set for the current process. Probably not that useful.
   name                               The name of the environment variable.
   string / required
   state               Choices:       Set to present to ensure environment variable is set.
   string              • absent       Set to absent to ensure it is removed.
                       • present ←
   value                              The value to store in the environment variable.
   string                             Must be set when state=present and cannot be an empty string.
                                      Can be omitted for state=absent.

NOTES                   *win_environment-notes*

   Note

     • This module is best-suited for setting the entire value of an environment variable. For safe element-based management of path-like environment vars, use the win_path module.
     • This module does not broadcast change events. This means that the minority of windows applications which can have their environment changed without restarting will not be notified and
       therefore will need restarting to pick up new environment settings. User level environment variables will require the user to log out and in again before they become available.

SEE ALSO                   *win_environment-see also*

   See also

   win_path – Manage Windows path environment variables
   The official documentation on the win_path module.

EXAMPLES                   *win_environment-examples*

 - name: Set an environment variable for all users
   win_environment:
     state: present
     name: TestVariable
     value: Test value
     level: machine

 - name: Remove an environment variable for the current user
   win_environment:
     state: absent
     name: TestVariable
     level: user

RETURN VALUES                   *win_environment-return values*

   Common return values are documented here, the following are the fields unique to this module:

       Key      Returned                                                                                 Description
   before_value          the value of the environment key before a change, this is null if it didn't exist
   string       always   Sample:
                         C:\Windows\System32
   value                 the value the environment key has been set to, this is null if removed
   string       always   Sample:
                         C:\Program Files\jdk1.8

STATUS                   *win_environment-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Jon Hawkesworth (@jhawkesworth)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *win_environment-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/win_environment_module.html
