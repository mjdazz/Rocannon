SYNOPSIS                   *win_rds_cap*

     • Creates, removes and configures a Remote Desktop connection authorization policy (RD CAP).
     • A RD CAP allows you to specify the users who can connect to a Remote Desktop Gateway server.

REQUIREMENTS                   *win_rds_cap-requirements*

   The below requirements are needed on the host that executes this module.

     • Windows Server 2008R2 (6.1) or higher.
     • The Windows Feature “RDS-Gateway” must be enabled.

PARAMETERS                   *win_rds_cap-parameters*

          Parameter         Choices/Defaults                                                                         Comments
   allow_only_sdrts_servers   Choices:
   boolean                    • no           Specifies whether connections are allowed only to Remote Desktop Session Host servers that enforce Remote Desktop Gateway redirection policy.
                              • yes
                              Choices:
   auth_method                • both         Specifies how the RD Gateway server authenticates users.
   string                     • none         When a new CAP is created, the default value is password.
                              • password
                              • smartcard
   computer_groups                           A list of computer groups that is allowed to connect to the Remote Gateway server.
   list
   idle_timeout                              Specifies the time interval, in minutes, after which an idle session is disconnected.
   integer                                   A value of zero disables idle timeout.
   name                                      Name of the connection authorization policy.
   string / required
                                             Evaluation order of the policy.
   order                                     The CAP in which order is set to a value of '1' is evaluated first.
   integer                                   By default, a newly created CAP will take the first position.
                                             If the given value exceed the total number of existing policies, the policy will take the last position but the evaluation order will be capped to this
                                             number.
   redirect_clipboard         Choices:
   boolean                    • no           Allow clipboard redirection.
                              • yes
   redirect_drives            Choices:
   boolean                    • no           Allow disk drive redirection.
                              • yes
   redirect_pnp               Choices:
   boolean                    • no           Allow Plug and Play devices redirection.
                              • yes
   redirect_printers          Choices:
   boolean                    • no           Allow printers redirection.
                              • yes
   redirect_serial            Choices:
   boolean                    • no           Allow serial port redirection.
                              • yes
   session_timeout                           The maximum time, in minutes, that a session can be idle.
   integer                                   A value of zero disables session timeout.
   session_timeout_action     Choices:       The action the server takes when a session times out.
   string                     • disconnect ← disconnect: disconnect the session.
                              • reauth       reauth: silently reauthenticate and reauthorize the session.
                              Choices:       The state of connection authorization policy.
   state                      • absent       If absent will ensure the policy is removed.
   string                     • enabled      If present will ensure the policy is configured and exists.
                              • disabled     If enabled will ensure the policy is configured, exists and enabled.
                              • present ←    If disabled will ensure the policy is configured, exists, but disabled.
   user_groups                               A list of user groups that is allowed to connect to the Remote Gateway server.
   list                                      Required when a new CAP is created.

SEE ALSO                   *win_rds_cap-see also*

   See also

   win_rds_cap – Manage Connection Authorization Policies (CAP) on a Remote Desktop Gateway server
   The official documentation on the win_rds_cap module.

   win_rds_rap – Manage Resource Authorization Policies (RAP) on a Remote Desktop Gateway server
   The official documentation on the win_rds_rap module.

   win_rds_settings – Manage main settings of a Remote Desktop Gateway server
   The official documentation on the win_rds_settings module.

EXAMPLES                   *win_rds_cap-examples*

 - name: Create a new RDS CAP with a 30 minutes timeout and clipboard redirection enabled
   win_rds_cap:
     name: My CAP
     user_groups:
       - BUILTIN\users
     session_timeout: 30
     session_timeout_action: disconnect
     allow_only_sdrts_servers: yes
     redirect_clipboard: yes
     redirect_drives: no
     redirect_printers: no
     redirect_serial: no
     redirect_pnp: no
     state: enabled

STATUS                   *win_rds_cap-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Kevin Subileau (@ksubileau)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *win_rds_cap-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/win_rds_cap_module.html
