SYNOPSIS                   *vyos_config*

     • This module provides configuration file management of VyOS devices. It provides arguments for managing both the configuration file and state of the active configuration. All configuration
       statements are based on set and delete commands in the device configuration.

PARAMETERS                   *vyos_config-parameters*

     Parameter    Choices/Defaults                                                                              Comments
   backup           Choices:       The backup argument will backup the current devices active configuration to the Ansible control host prior to making any changes. If the backup_options value is
   boolean          • no ←         not given, the backup file will be located in the backup folder in the playbook root directory or role root directory, if playbook is part of an ansible role. If
                    • yes          the directory does not exist, it is created.
   backup_options                  This is a dict object containing configurable options related to backup file path. The value of this option is read only when backup is set to yes, if backup is
   dictionary                      set to no this option will be silently ignored.
   added in 2.8
     dir_path                      This option provides the path ending with directory name in which the backup configuration file will be stored. If the directory does not exist it will be first
     path                          created and the filename is either the value of filename or default filename as described in filename options description. If the path value is not given in that
                                   case a backup directory will be created in the current working directory and backup configuration will be copied in filename within backup directory.
     filename                      The filename to be used to store the backup configuration. If the the filename is not given it will be generated based on the hostname, current time and date in
     -                             format defined by <hostname>_config.<current-date>@<current-time>
   comment        Default:         Allows a commit description to be specified to be included when the configuration is committed. If the configuration is not changed or committed, this argument is
   -              "configured by   ignored.
                  vyos_config"
   config                          The config argument specifies the base configuration to use to compare against the desired configuration. If this value is not specified, the module will
   -                               automatically retrieve the current active configuration from the remote device.
   lines                           The ordered set of configuration lines to be managed and compared with the existing configuration on the remote device.
   -
   match            Choices:       The match argument controls the method used to match against the current active configuration. By default, the desired config is matched against the active config
   -                • line ←       and the deltas are loaded. If the match argument is set to none the active configuration is ignored and the configuration is always loaded.
                    • none
                                   Deprecated
                                   Starting with Ansible 2.5 we recommend using connection: network_cli.
   provider                        For more information please see the Network Guide.
   dictionary
                                   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

                                   A dict object containing connection details.
     host                          Specifies the DNS host name or address for connecting to the remote device over the specified transport. The value of host is used as the destination address for
     string /                      the transport.
     required
     password                      Specifies the password to use to authenticate the connection to the remote device. This value is used to authenticate the SSH session. If the value is not
     string                        specified in the task, the value of environment variable ANSIBLE_NET_PASSWORD will be used instead.
     port         Default:         Specifies the port to use when building the connection to the remote device.
     integer      22
     ssh_keyfile                   Specifies the SSH key to use to authenticate the connection to the remote device. This value is the path to the key used to authenticate the SSH session. If the
     path                          value is not specified in the task, the value of environment variable ANSIBLE_NET_SSH_KEYFILE will be used instead.
     timeout      Default:         Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the
     integer      10               operation is completed, the module will error.
     username                      Configures the username to use to authenticate the connection to the remote device. This value is used to authenticate the SSH session. If the value is not
     string                        specified in the task, the value of environment variable ANSIBLE_NET_USERNAME will be used instead.
   save             Choices:       The save argument controls whether or not changes made to the active configuration are saved to disk. This is independent of committing the config. When set to
   boolean          • no ←         True, the active configuration is saved.
                    • yes
   src                             The src argument specifies the path to the source config file to load. The source config file can either be in bracket format or set format. The source file can
   -                               include Jinja2 template variables.

NOTES                   *vyos_config-notes*

   Note

     • Tested against VyOS 1.1.8 (helium).
     • This module works with connection network_cli. See the VyOS OS Platform Options.
     • For more information on using Ansible to manage network devices see the Ansible Network Guide

EXAMPLES                   *vyos_config-examples*

 - name: configure the remote device
   vyos_config:
     lines:
       - set system host-name {{ inventory_hostname }}
       - set service lldp
       - delete service dhcp-server

 - name: backup and load from file
   vyos_config:
     src: vyos.cfg
     backup: yes

 - name: render a Jinja2 template onto the VyOS router
   vyos_config:
     src: vyos_template.j2

 - name: for idempotency, use full-form commands
   vyos_config:
     lines:
       # - set int eth eth2 description 'OUTSIDE'
       - set interface ethernet eth2 description 'OUTSIDE'

 - name: configurable backup path
   vyos_config:
     backup: yes
     backup_options:
       filename: backup.cfg
       dir_path: /home/user

RETURN VALUES                   *vyos_config-return values*

   Common return values are documented here, the following are the fields unique to this module:

       Key                                  Returned                                                                                  Description
   backup_path                                                                    The full path to the backup file
   string      when backup is yes                                                 Sample:
                                                                                  /playbooks/ansible/backup/[email protected]:28:34
   commands                                                                       The list of configuration commands sent to the device
   list        always                                                             Sample:
                                                                                  ['...', '...']
   date                                                                           The date extracted from the backup file name
   string      when backup is yes                                                 Sample:
                                                                                  2016-07-16
   filename                                                                       The name of the backup file
   string      when backup is yes and filename is not specified in backup options Sample:
                                                                                  [email protected]:28:34
   filtered                                                                       The list of configuration commands removed to avoid a load failure
   list        always                                                             Sample:
                                                                                  ['...', '...']
   shortname                                                                      The full path to the backup file excluding the timestamp
   string      when backup is yes and filename is not specified in backup options Sample:
                                                                                  /playbooks/ansible/backup/vyos_config
   time                                                                           The time extracted from the backup file name
   string      when backup is yes                                                 Sample:
                                                                                  22:28:34

STATUS                   *vyos_config-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Network Team. [network]

RED HAT SUPPORT                   *vyos_config-red hat support*

     • Nathaniel Case (@Qalthos)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *vyos_config-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/vyos_config_module.html
