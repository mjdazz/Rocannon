SYNOPSIS                   *netapp_e_volume*

     • Create or remove volumes (standard and thin) for NetApp E/EF-series storage arrays.

PARAMETERS                   *netapp_e_volume-parameters*

               Parameter              Choices/Defaults                                                                    Comments
   api_password                                        The password to authenticate with the SANtricity Web Services Proxy or Embedded Web Services API.
   string / required
   api_url                                             The url to the SANtricity Web Services Proxy or Embedded Web Services API. Example https://prod-1.wahoo.acme.com/devmgr/v2
   string / required
   api_username                                        The username to authenticate with the SANtricity Web Services Proxy or Embedded Web Services API.
   string / required
   cache_without_batteries              Choices:       Indicates whether caching should be used without battery backup.
   boolean                              • no ←         Warning, cache_without_batteries==true and the storage system looses power and there is no battery backup, data will be lost!
   added in 2.9                         • yes
   data_assurance_enabled               Choices:       Determines whether data assurance (DA) should be enabled for the volume
   boolean                              • no ←         Only available when creating a new volume and on a storage pool with drives supporting the DA capability.
                                        • yes
   initialization_timeout                              Duration in seconds before the wait_for_initialization operation will terminate.
   integer                                             wait_for_initialization==True to have any effect on module's operations.
   added in 2.9
                                                       Dictionary containing meta data for the use, user, location, etc of the volume (dictionary is arbitrarily defined for whatever the user deems
   metadata                                            useful)
   dictionary                                          When workload_name exists on the storage array but the metadata is different then the workload definition will be updated. (Changes will
   added in 2.8                                        update all associated volumes!)
                                                       workload_name must be specified when metadata are defined.
   name                                                The name of the volume to manage.
   - / required
   owning_controller                    Choices:       Specifies which controller will be the primary owner of the volume
   -                                    • A            Not specifying will allow the controller to choose ownership.
   added in 2.9                         • B
   read_ahead_enable                    Choices:       Indicates whether or not automatic cache read-ahead is enabled.
   boolean                              • no           This option has no effect on thinly provisioned volumes since the architecture for thin volumes cannot benefit from read ahead caching.
   added in 2.8                         • yes ←
   read_cache_enable                    Choices:
   boolean                              • no           Indicates whether read caching should be enabled for the volume.
   added in 2.8                         • yes ←
                                                       Segment size of the volume
                                                       All values are in kibibytes.
   segment_size_kb                    Default:         Some common choices include '8', '16', '32', '64', '128', '256', and '512' but options are system dependent.
   -                                  "128"            Retrieve the definitive system list from netapp_e_facts under segment_sizes.
                                                       When the storage pool is a raidDiskPool then the segment size must be 128kb.
                                                       Segment size migrations are not allowed in this module
                                                       Required only when state=='present'.
   size                                                Size of the volume in size_unit.
   - / required                                        Size of the virtual volume in the case of a thin volume in size_unit.
                                                       Maximum virtual volume size of a thin provisioned volume is 256tb; however other OS-level restrictions may exist.
                                        Choices:
                                        • bytes
                                        • b
                                        • kb
   size_unit                            • mb
   -                                    • gb ←         The unit used to interpret the size parameter
                                        • tb
                                        • pb
                                        • eb
                                        • zb
                                        • yb
   ssd_cache_enabled                    Choices:       Whether an existing SSD cache should be enabled on the volume (fails if no SSD cache defined)
   boolean                              • no ←         The default value is to ignore existing SSD cache setting.
                                        • yes
   ssid                               Default:         The ID of the array to manage. This value must be unique for each array.
   string                             1
   state                                Choices:
   - / required                         • present      Whether the specified volume should exist
                                        • absent
   storage_pool_name                                   Required only when requested state=='present'.
   -                                                   Name of the storage pool wherein the volume should reside.
   thin_provision                       Choices:       Whether the volume should be thin provisioned.
   boolean                              • no ←         Thin volumes can only be created when raid_level=="raidDiskPool".
                                        • yes          Generally, use of thin-provisioning is not recommended due to performance impacts.
                                                       This is the thin volume expansion policy.
                                                       When thin_volume_expansion_policy=="automatic" and thin_volume_growth_alert_threshold is exceed the thin_volume_max_repo_size will be
   thin_volume_expansion_policy         Choices:       automatically expanded.
   -                                    • automatic ←  When thin_volume_expansion_policy=="manual" and thin_volume_growth_alert_threshold is exceeded the storage system will wait for manual
   added in 2.8                         • manual       intervention.
                                                       The thin volume_expansion policy can not be modified on existing thin volumes in this module.
                                                       Generally speaking you should almost always use thin_volume_expansion_policy=="automatic.
   thin_volume_growth_alert_threshold                  This is the thin provision repository utilization threshold (in percent).
   -                                  Default:         When the percentage of used storage of the maximum repository size exceeds this value then a alert will be issued and the
   added in 2.8                       95               thin_volume_expansion_policy will be executed.
                                                       Values must be between or equal to 10 and 99.
                                                       This is the maximum amount the thin volume repository will be allowed to grow.
   thin_volume_max_repo_size          Default:         Only has significance when thin_volume_expansion_policy=="automatic".
   -                                  "same as size    When the percentage thin_volume_repo_size of thin_volume_max_repo_size exceeds thin_volume_growth_alert_threshold then a warning will be
                                      (in size_unit)"  issued and the storage array will execute the thin_volume_expansion_policy policy.
                                                       Expansion operations when thin_volume_expansion_policy=="automatic" will increase the maximum repository size.
                                                       This value (in size_unit) sets the allocated space for the thin provisioned repository.
   thin_volume_repo_size                               Initial value must between or equal to 4gb and 256gb in increments of 4gb.
   -                                                   During expansion operations the increase must be between or equal to 4gb and 256gb in increments of 4gb.
                                                       This option has no effect during expansion if thin_volume_expansion_policy=="automatic".
                                                       Generally speaking you should almost always use thin_volume_expansion_policy=="automatic.
   validate_certs                       Choices:
   boolean                              • no           Should https certificates be validated?
                                        • yes ←
   wait_for_initialization              Choices:
   boolean                              • no ←         Forces the module to wait for expansion operations to complete before continuing.
   added in 2.8                         • yes
                                                       Label for the workload defined by the metadata.
   workload_name                                       When workload_name and metadata are specified then the defined workload will be added to the storage array.
   -                                                   When workload_name exists on the storage array but the metadata is different then the workload definition will be updated. (Changes will
   added in 2.8                                        update all associated volumes!)
                                                       Existing workloads can be retrieved using netapp_e_facts.
   write_cache_enable                   Choices:
   boolean                              • no           Indicates whether write-back caching should be enabled for the volume.
   added in 2.8                         • yes ←

NOTES                   *netapp_e_volume-notes*

   Note

     • The E-Series Ansible modules require either an instance of the Web Services Proxy (WSP), to be available to manage the storage-system, or an E-Series storage-system that supports the
       Embedded Web Services API.
     • Embedded Web Services is currently available on the E2800, E5700, EF570, and newer hardware models.
     • netapp_e_storage_system may be utilized for configuring the systems managed by a WSP instance.

EXAMPLES                   *netapp_e_volume-examples*

 - name: Create simple volume with workload tags (volume meta data)
   netapp_e_volume:
     ssid: "{{ ssid }}"
     api_url: "{{ netapp_api_url }}"
     api_username: "{{ netapp_api_username }}"
     api_password: "{{ netapp_api_password }}"
     validate_certs: "{{ netapp_api_validate_certs }}"
     state: present
     name: volume
     storage_pool_name: storage_pool
     size: 300
     size_unit: gb
     workload_name: volume_tag
     metadata:
       key1: value1
       key2: value2
 - name: Create a thin volume
   netapp_e_volume:
     ssid: "{{ ssid }}"
     api_url: "{{ netapp_api_url }}"
     api_username: "{{ netapp_api_username }}"
     api_password: "{{ netapp_api_password }}"
     validate_certs: "{{ netapp_api_validate_certs }}"
     state: present
     name: volume1
     storage_pool_name: storage_pool
     size: 131072
     size_unit: gb
     thin_provision: true
     thin_volume_repo_size: 32
     thin_volume_max_repo_size: 1024
 - name: Expand thin volume's virtual size
   netapp_e_volume:
     ssid: "{{ ssid }}"
     api_url: "{{ netapp_api_url }}"
     api_username: "{{ netapp_api_username }}"
     api_password: "{{ netapp_api_password }}"
     validate_certs: "{{ netapp_api_validate_certs }}"
     state: present
     name: volume1
     storage_pool_name: storage_pool
     size: 262144
     size_unit: gb
     thin_provision: true
     thin_volume_repo_size: 32
     thin_volume_max_repo_size: 1024
 - name: Expand thin volume's maximum repository size
   netapp_e_volume:
     ssid: "{{ ssid }}"
     api_url: "{{ netapp_api_url }}"
     api_username: "{{ netapp_api_username }}"
     api_password: "{{ netapp_api_password }}"
     validate_certs: "{{ netapp_api_validate_certs }}"
     state: present
     name: volume1
     storage_pool_name: storage_pool
     size: 262144
     size_unit: gb
     thin_provision: true
     thin_volume_repo_size: 32
     thin_volume_max_repo_size: 2048
 - name: Delete volume
   netapp_e_volume:
     ssid: "{{ ssid }}"
     api_url: "{{ netapp_api_url }}"
     api_username: "{{ netapp_api_username }}"
     api_password: "{{ netapp_api_password }}"
     validate_certs: "{{ netapp_api_validate_certs }}"
     state: absent
     name: volume

RETURN VALUES                   *netapp_e_volume-return values*

   Common return values are documented here, the following are the fields unique to this module:

    Key   Returned                                                                                    Description
   msg             State of volume
   string always   Sample:
                   Standard volume [workload_vol_1] has been created.

STATUS                   *netapp_e_volume-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Kevin Hulquest (@hulquest)
     • Nathan Swartz (@ndswartz)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *netapp_e_volume-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/netapp_e_volume_module.html
