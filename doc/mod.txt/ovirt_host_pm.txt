SYNOPSIS                   *ovirt_host_pm*

     • Module to manage power management of hosts in oVirt/RHV.

REQUIREMENTS                   *ovirt_host_pm-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • ovirt-engine-sdk-python >= 4.3.0

PARAMETERS                   *ovirt_host_pm-parameters*

       Parameter     Choices/Defaults                                                                            Comments
   address                            Address of the power management interface.
   -
   auth
   dictionary /                       Dictionary with values needed to create HTTP/HTTPS connection to oVirt:
   required
                                      A PEM file containing the trusted CA certificates.
        ca_file                       The certificate presented by the server will be verified using these CA certificates.
        string                        If ca_file parameter is not set, system wide CA certificate store is used.
                                      Default value is set by OVIRT_CAFILE environment variable.
        headers                       Dictionary of HTTP headers to be added to each API call.
        dictionary
        hostname                      A string containing the hostname of the server, usually something like `server.example.com`.
        string                        Default value is set by OVIRT_HOSTNAME environment variable.
                                      Either url or hostname is required.
        insecure       Choices:
        boolean        • no           A boolean flag that indicates if the server TLS certificate and host name should be checked.
                       • yes
        kerberos       Choices:
        boolean        • no           A boolean flag indicating if Kerberos authentication should be used instead of the default basic authentication.
                       • yes
        password                      The password of the user.
        string /                      Default value is set by OVIRT_PASSWORD environment variable.
        required
        token                         Token to be used instead of login with username/password.
        string                        Default value is set by OVIRT_TOKEN environment variable.
        url                           A string containing the API URL of the server, usually something like `https://server.example.com/ovirt-engine/api`.
        string                        Default value is set by OVIRT_URL environment variable.
                                      Either url or hostname is required.
        username                      The name of the user, something like [email protected].
        string /                      Default value is set by OVIRT_USERNAME environment variable.
        required
   encrypt_options     Choices:       If true options will be encrypted when send to agent.
   boolean             • no           aliases: encrypt
                       • yes
   fetch_nested        Choices:       If True the module will fetch additional data from the API.
   boolean             • no           It will fetch IDs of the VMs disks, snapshots, etc. User can configure to fetch other attributes of the nested entities by specifying nested_attributes.
                       • yes
   name                               Name of the host to manage.
   - / required                       aliases: host
   nested_attributes                  Specifies list of the attributes which should be fetched from the API.
   list                               This parameter apply only when fetch_nested is true.
   options                            Dictionary of additional fence agent options (including Power Management slot).
   -                                  Additional information about options can be found at https://github.com/ClusterLabs/fence-agents/blob/master/doc/FenceAgentAPI.md.
   order
   -                                  Integer value specifying, by default it's added at the end.
   added in 2.5
   password                           Password of the user specified in username parameter.
   -
   poll_interval     Default:         Number of the seconds the module waits until another poll request on entity status is sent.
   integer           3
   port                               Power management interface port.
   -
   state               Choices:
   -                   • present ←    Should the host be present/absent.
                       • absent
   timeout           Default:         The amount of time in seconds the module should wait for the instance to get into desired state.
   integer           180
   type                               Type of the power management. oVirt/RHV predefined values are drac5, ipmilan, rsa, bladecenter, alom, apc, apc_snmp, eps, wti, rsb, cisco_ucs, drac7, hpblade,
   -                                  ilo, ilo2, ilo3, ilo4, ilo_ssh, but user can have defined custom type.
   username                           Username to be used to connect to power management interface.
   -
   wait                Choices:
   boolean             • no           yes if the module should wait for the entity to get into desired state.
                       • yes ←

NOTES                   *ovirt_host_pm-notes*

   Note

     • In order to use this module you have to install oVirt Python SDK. To ensure it’s installed with correct version you can create the following task: pip: name=ovirt-engine-sdk-python
       version=4.3.0

EXAMPLES                   *ovirt_host_pm-examples*

 # Examples don't contain auth parameter for simplicity,
 # look at ovirt_auth module to see how to reuse authentication:

 # Add fence agent to host 'myhost'
 - ovirt_host_pm:
     name: myhost
     address: 1.2.3.4
     options:
       myoption1: x
       myoption2: y
     username: admin
     password: admin
     port: 3333
     type: ipmilan

 # Add fence agent to host 'myhost' using 'slot' option
 - ovirt_host_pm:
     name: myhost
     address: 1.2.3.4
     options:
       myoption1: x
       myoption2: y
       slot: myslot
     username: admin
     password: admin
     port: 3333
     type: ipmilan


 # Remove ipmilan fence agent with address 1.2.3.4 on host 'myhost'
 - ovirt_host_pm:
     state: absent
     name: myhost
     address: 1.2.3.4
     type: ipmilan

RETURN VALUES                   *ovirt_host_pm-return values*

   Common return values are documented here, the following are the fields unique to this module:

      Key     Returned                                                                                  Description
              On
   agent      success  Dictionary of all the agent attributes. Agent attributes can be found on your oVirt/RHV instance at following url:
   dictionary if agent http://ovirt.github.io/ovirt-engine-api-model/master/#types/agent.
              is
              found.
              On
   id         success  ID of the agent which is managed
   string     if agent Sample:
              is       7de90f31-222c-436c-a1ca-7e655bd5b60c
              found.

STATUS                   *ovirt_host_pm-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Ondra Machacek (@machacekondra)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *ovirt_host_pm-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/ovirt_host_pm_module.html
