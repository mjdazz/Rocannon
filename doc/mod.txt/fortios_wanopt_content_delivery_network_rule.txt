SYNOPSIS                   *fortios_wanopt_content_delivery_network_rule*

     • This module is able to configure a FortiGate or FortiOS (FOS) device by allowing the user to set and modify wanopt feature and content_delivery_network_rule category. Examples include all
       parameters and values need to be adjusted to datasources before usage. Tested with FOS v6.0.5

REQUIREMENTS                   *fortios_wanopt_content_delivery_network_rule-requirements*

   The below requirements are needed on the host that executes this module.

     • fortiosapi>=0.9.8

PARAMETERS                   *fortios_wanopt_content_delivery_network_rule-parameters*

                Parameter               Choices/Defaults                                                                   Comments
   host                                                   FortiOS or FortiGate IP address.
   string
   https                                  Choices:
   boolean                                • no            Indicates if the requests towards FortiGate must use HTTPS protocol.
                                          • yes ←
   password                             Default:          FortiOS or FortiGate password.
   string                               ""
   ssl_verify                             Choices:
   boolean                                • no            Ensures FortiGate certificate must be verified by a proper CA.
                                          • yes ←
   state                                  Choices:
   string / required                      • present       Indicates whether to create or remove the object.
                                          • absent
   username                                               FortiOS or FortiGate username.
   string
   vdom                                 Default:          Virtual domain, among those defined previously. A vdom is a virtual instance of the FortiGate that can be configured and used as a
   string                               "root"            different unit.
   wanopt_content_delivery_network_rule Default:          Configure WAN optimization content delivery network rules.
   dictionary                           null
       category                           Choices:
       string                             • vcache        Content delivery network rule category.
                                          • youtube
       comment                                            Comment about this CDN-rule.
       string
       host_domain_name_suffix                            Suffix portion of the fully qualified domain name (eg. fortinet.com in "www.fortinet.com").
       list
            name                                          Suffix portion of the fully qualified domain name.
            string / required
       name                                               Name of table.
       string / required
       request_cache_control              Choices:
       string                             • enable        Enable/disable HTTP request cache control.
                                          • disable
       response_cache_control             Choices:
       string                             • enable        Enable/disable HTTP response cache control.
                                          • disable
       response_expires                   Choices:
       string                             • enable        Enable/disable HTTP response cache expires.
                                          • disable
       rules                                              WAN optimization content delivery network rule entries.
       list
            content_id                                    Content ID settings.
            dictionary
                 end_direction            Choices:
                 string                   • forward       Search direction from end-str match.
                                          • backward
                 end_skip                                 Number of characters in URL to skip after end-str has been matched.
                 integer
                 end_str                                  String from which to end search.
                 string
                 range_str                                Name of content ID within the start string and end string.
                 string
                 start_direction          Choices:
                 string                   • forward       Search direction from start-str match.
                                          • backward
                 start_skip                               Number of characters in URL to skip after start-str has been matched.
                 integer
                 start_str                                String from which to start search.
                 string
                                          Choices:
                                          • path
                                          • parameter
                                          • referrer
                 target                   • youtube-map
                 string                   • youtube-id    Option in HTTP header or URL parameter to match.
                                          • youku-id
                                          • hls-manifest
                                          • dash-manifest
                                          • hls-fragment
                                          • dash-fragment
            match_entries                                 List of entries to match.
            list
                 id                                       Rule ID.
                 integer / required
                 pattern                                  Pattern string for matching target (Referrer or URL pattern, eg. "a", "a"c", ""a"", "a"c"e", and """).
                 list
                     string                               Pattern strings.
                     string / required
                                          Choices:
                                          • path
                 target                   • parameter
                 string                   • referrer      Option in HTTP header or URL parameter to match.
                                          • youtube-map
                                          • youtube-id
                                          • youku-id
            match_mode                    Choices:
            string                        • all           Match criteria for collecting content ID.
                                          • any
            name                                          WAN optimization content delivery network rule name.
            string / required
            skip_entries                                  List of entries to skip.
            list
                 id                                       Rule ID.
                 integer / required
                 pattern                                  Pattern string for matching target (Referrer or URL pattern, eg. "a", "a"c", ""a"", "a"c"e", and """).
                 list
                     string                               Pattern strings.
                     string / required
                                          Choices:
                                          • path
                 target                   • parameter
                 string                   • referrer      Option in HTTP header or URL parameter to match.
                                          • youtube-map
                                          • youtube-id
                                          • youku-id
            skip_rule_mode                Choices:
            string                        • all           Skip mode when evaluating skip-rules.
                                          • any
       status                             Choices:
       string                             • enable        Enable/disable WAN optimization content delivery network rules.
                                          • disable
       text_response_vcache               Choices:
       string                             • enable        Enable/disable caching of text responses.
                                          • disable
       updateserver                       Choices:
       string                             • enable        Enable/disable update server.
                                          • disable

NOTES                   *fortios_wanopt_content_delivery_network_rule-notes*

   Note

     • Requires fortiosapi library developed by Fortinet
     • Run as a local_action in your playbook

EXAMPLES                   *fortios_wanopt_content_delivery_network_rule-examples*

 - hosts: localhost
   vars:
    host: "192.168.122.40"
    username: "admin"
    password: ""
    vdom: "root"
    ssl_verify: "False"
   tasks:
   - name: Configure WAN optimization content delivery network rules.
     fortios_wanopt_content_delivery_network_rule:
       host:  "{{ host }}"
       username: "{{ username }}"
       password: "{{ password }}"
       vdom:  "{{ vdom }}"
       https: "False"
       state: "present"
       wanopt_content_delivery_network_rule:
         category: "vcache"
         comment: "Comment about this CDN-rule."
         host_domain_name_suffix:
          -
             name: "default_name_6"
         name: "default_name_7"
         request_cache_control: "enable"
         response_cache_control: "enable"
         response_expires: "enable"
         rules:
          -
             content_id:
                 end_direction: "forward"
                 end_skip: "14"
                 end_str: "<your_own_value>"
                 range_str: "<your_own_value>"
                 start_direction: "forward"
                 start_skip: "18"
                 start_str: "<your_own_value>"
                 target: "path"
             match_entries:
              -
                 id:  "22"
                 pattern:
                  -
                     string: "<your_own_value>"
                 target: "path"
             match_mode: "all"
             name: "default_name_27"
             skip_entries:
              -
                 id:  "29"
                 pattern:
                  -
                     string: "<your_own_value>"
                 target: "path"
             skip_rule_mode: "all"
         status: "enable"
         text_response_vcache: "enable"
         updateserver: "enable"

RETURN VALUES                   *fortios_wanopt_content_delivery_network_rule-return values*

   Common return values are documented here, the following are the fields unique to this module:

       Key     Returned                                                                                  Description
   build                Build number of the fortigate image
   string      always   Sample:
                        1547
   http_method          Last method used to provision the content into FortiGate
   string      always   Sample:
                        PUT
   http_status          Last result given by FortiGate on last operation applied
   string      always   Sample:
                        200
   mkey                 Master key (id) used in the last call to FortiGate
   string      success  Sample:
                        id
   name                 Name of the table used to fulfill the request
   string      always   Sample:
                        urlfilter
   path                 Path of the table used to fulfill the request
   string      always   Sample:
                        webfilter
   revision             Internal revision number
   string      always   Sample:
                        17.0.2.10658
   serial               Serial number of the unit
   string      always   Sample:
                        FGVMEVYYQT3AB5352
   status               Indication of the operation's result
   string      always   Sample:
                        success
   vdom                 Virtual domain used
   string      always   Sample:
                        root
   version              Version of the FortiGate
   string      always   Sample:
                        v5.6.3

STATUS                   *fortios_wanopt_content_delivery_network_rule-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Miguel Angel Munoz (@mamunozgonzalez)
     • Nicolas Thomas (@thomnico)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *fortios_wanopt_content_delivery_network_rule-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/fortios_wanopt_content_delivery_network_rule_module.html
