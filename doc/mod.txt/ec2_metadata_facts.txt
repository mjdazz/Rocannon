SYNOPSIS                   *ec2_metadata_facts*

     • This module fetches data from the instance metadata endpoint in ec2 as per https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html. The module must be called from
       within the EC2 instance itself.

NOTES                   *ec2_metadata_facts-notes*

   Note

     • Parameters to filter on ec2_metadata_facts may be added later.

EXAMPLES                   *ec2_metadata_facts-examples*

 # Gather EC2 metadata facts
 - ec2_metadata_facts:

 - debug:
     msg: "This instance is a t1.micro"
   when: ansible_ec2_instance_type == "t1.micro"

RETURNED FACTS                   *ec2_metadata_facts-returned facts*

   Facts returned by this module are added/updated in the hostvars host facts and can be referenced by name just like any other host fact. They do not need to be registered in order to use them.

                               Fact                             Returned                                                         Description
   ansible_ec2_ami_id                                                    The AMI ID used to launch the instance.
   string                                                                Sample:
                                                                         ami-XXXXXXXX
                                                                         If you started more than one instance at the same time, this value indicates the order in which the instance was launched.
   ansible_ec2_ami_launch_index                                          The value of the first instance launched is 0.
   string                                                                Sample:
                                                                         0
                                                                         The path to the AMI manifest file in Amazon S3. If you used an Amazon EBS-backed AMI to launch the instance, the returned
   ansible_ec2_ami_manifest_path                                         result is unknown.
   string                                                                Sample:
                                                                         (unknown)
                                                                         The AMI IDs of any instances that were rebundled to create this AMI. This value will only exist if the AMI manifest file
   ansible_ec2_ancestor_ami_ids                                          contained an ancestor-amis key.
   string                                                                Sample:
                                                                         (unknown)
   ansible_ec2_block_device_mapping_ami                                  The virtual device that contains the root/boot file system.
   string                                                                Sample:
                                                                         /dev/sda1
                                                                         The virtual devices associated with Amazon EBS volumes, if any are present. Amazon EBS volumes are only available in
   ansible_ec2_block_device_mapping_ebsN                                 metadata if they were present at launch time or when the instance was last started. The N indicates the index of the Amazon
   string                                                                EBS volume (such as ebs1 or ebs2).
                                                                         Sample:
                                                                         /dev/xvdb
                                                                         The virtual devices associated with ephemeral devices, if any are present. The N indicates the index of the ephemeral
   ansible_ec2_block_device_mapping_ephemeralN                           volume.
   string                                                                Sample:
                                                                         /dev/xvdc
                                                                         The virtual devices or partitions associated with the root devices, or partitions on the virtual device, where the root (/
   ansible_ec2_block_device_mapping_root                                 or C) file system is associated with the given instance.
   string                                                                Sample:
                                                                         /dev/sda1
   ansible_ec2_block_device_mapping_swap                                 The virtual devices associated with swap. Not always present.
   string                                                                Sample:
                                                                         /dev/sda2
   ansible_ec2_fws_instance_monitoring                                   Value showing whether the customer has enabled detailed one-minute monitoring in CloudWatch.
   string                                                                Sample:
                                                                         enabled
                                                                         The private IPv4 DNS hostname of the instance. In cases where multiple network interfaces are present, this refers to the
   ansible_ec2_hostname                                                  eth0 device (the device for which the device number is 0).
   string                                                                Sample:
                                                                         ip-10-0-0-1.ec2.internal
   ansible_ec2_iam_info                                                  If there is an IAM role associated with the instance, contains information about the last time the instance profile was
   complex                                                               updated, including the instance's LastUpdated date, InstanceProfileArn, and InstanceProfileId. Otherwise, not present.
   ansible_ec2_iam_info_instanceprofilearn                               The IAM instance profile ARN.
   string                                                                Sample:
                                                                         arn:aws:iam::<account id>:instance-profile/<role name>
   ansible_ec2_iam_info_instanceprofileid                                IAM instance profile ID.
   string
   ansible_ec2_iam_info_lastupdated                                      IAM info last updated time.
   string                                                                Sample:
                                                                         2017-05-12T02:42:27Z
   ansible_ec2_iam_instance_profile_role                                 IAM instance role.
   string                                                                Sample:
                                                                         role_name
   ansible_ec2_iam_security_credentials_                                 If there is an IAM role associated with the instance, role-name is the name of the role, and role-name contains the
   string                                                                temporary security credentials associated with the role. Otherwise, not present.
   ansible_ec2_iam_security_credentials__accesskeyid                     IAM role access key ID.
   string
   ansible_ec2_iam_security_credentials__code                            IAM code.
   string                                                                Sample:
                                                                         Success
   ansible_ec2_iam_security_credentials__expiration                      IAM role credentials expiration time.
   string                                                                Sample:
                                                                         2017-05-12T09:11:41Z
   ansible_ec2_iam_security_credentials__lastupdated                     IAM role last updated time.
   string                                                                Sample:
                                                                         2017-05-12T02:40:44Z
   ansible_ec2_iam_security_credentials__secretaccesskey                 IAM role secret access key.
   string
   ansible_ec2_iam_security_credentials__token                           IAM role token.
   string
   ansible_ec2_iam_security_credentials__type                            IAM role type.
   string                                                                Sample:
                                                                         AWS-HMAC
   ansible_ec2_instance_action                                           Notifies the instance that it should reboot in preparation for bundling.
   string                                                                Sample:
                                                                         none
   ansible_ec2_instance_id                                               The ID of this instance.
   string                                                                Sample:
                                                                         i-XXXXXXXXXXXXXXXXX
   ansible_ec2_instance_identity_document                                JSON containing instance attributes, such as instance-id, private IP address, etc.
   string
   ansible_ec2_instance_identity_document_accountid                      Sample:
   string                                                                012345678901
   ansible_ec2_instance_identity_document_architecture                   Instance system architecture.
   string                                                                Sample:
                                                                         x86_64
   ansible_ec2_instance_identity_document_availabilityzone               The Availability Zone in which the instance launched.
   string                                                                Sample:
                                                                         us-east-1a
   ansible_ec2_instance_identity_document_billingproducts                Billing products for this instance.
   string
   ansible_ec2_instance_identity_document_devpayproductcodes             Product codes for the launched AMI.
   string
   ansible_ec2_instance_identity_document_imageid                        The AMI ID used to launch the instance.
   string                                                                Sample:
                                                                         ami-01234567
   ansible_ec2_instance_identity_document_instanceid                     The ID of this instance.
   string                                                                Sample:
                                                                         i-0123456789abcdef0
   ansible_ec2_instance_identity_document_instancetype                   The type of instance.
   string                                                                Sample:
                                                                         m4.large
   ansible_ec2_instance_identity_document_kernelid                       The ID of the kernel launched with this instance, if applicable.
   string
   ansible_ec2_instance_identity_document_pendingtime                    The instance pending time.
   string                                                                Sample:
                                                                         2017-05-11T20:51:20Z
                                                                         The private IPv4 address of the instance. In cases where multiple network interfaces are present, this refers to the eth0
   ansible_ec2_instance_identity_document_privateip                      device (the device for which the device number is 0).
   string                                                                Sample:
                                                                         10.0.0.1
   ansible_ec2_instance_identity_document_ramdiskid                      The ID of the RAM disk specified at launch time, if applicable.
   string
   ansible_ec2_instance_identity_document_region                         The Region in which the instance launched.
   string                                                                Sample:
                                                                         us-east-1
   ansible_ec2_instance_identity_document_version                        Identity document version.
   string                                                                Sample:
                                                                         2010-08-31
   ansible_ec2_instance_identity_pkcs7                                   Used to verify the document's authenticity and content against the signature.
   string
   ansible_ec2_instance_identity_rsa2048                                 Used to verify the document's authenticity and content against the signature.
   string
   ansible_ec2_instance_identity_signature                               Data that can be used by other parties to verify its origin and authenticity.
   string
   ansible_ec2_instance_type                                             The type of instance.
   string                                                                Sample:
                                                                         m4.large
                                                                         The private IPv4 DNS hostname of the instance. In cases where multiple network interfaces are present, this refers to the
   ansible_ec2_local_hostname                                            eth0 device (the device for which the device number is 0).
   string                                                                Sample:
                                                                         ip-10-0-0-1.ec2.internal
                                                                         The private IPv4 address of the instance. In cases where multiple network interfaces are present, this refers to the eth0
   ansible_ec2_local_ipv4                                                device (the device for which the device number is 0).
   string                                                                Sample:
                                                                         10.0.0.1
                                                                         The instance's media access control (MAC) address. In cases where multiple network interfaces are present, this refers to
   ansible_ec2_mac                                                       the eth0 device (the device for which the device number is 0).
   string                                                                Sample:
                                                                         00:11:22:33:44:55
   ansible_ec2_metrics_vhostmd                                           Metrics.
   string
                                                                         The unique device number associated with that interface. The device number corresponds to the device name; for example, a
   ansible_ec2_network_interfaces_macs__device_number                    device-number of 2 is for the eth2 device. This category corresponds to the DeviceIndex and device-index fields that are
   string                                                                used by the Amazon EC2 API and the EC2 commands for the AWS CLI.
                                                                         Sample:
                                                                         0
   ansible_ec2_network_interfaces_macs__interface_id                     The elastic network interface ID.
   string                                                                Sample:
                                                                         eni-12345678
   ansible_ec2_network_interfaces_macs__ipv4_associations_               The private IPv4 addresses that are associated with each public-ip address and assigned to that interface.
   string
   ansible_ec2_network_interfaces_macs__ipv6s                            The IPv6 addresses associated with the interface. Returned only for instances launched into a VPC.
   string
   ansible_ec2_network_interfaces_macs__local_hostname                   The interface's local hostname.
   string
   ansible_ec2_network_interfaces_macs__local_ipv4s                      The private IPv4 addresses associated with the interface.
   string
   ansible_ec2_network_interfaces_macs__mac                              The instance's MAC address.
   string                                                                Sample:
                                                                         00:11:22:33:44:55
                                                                         The ID of the owner of the network interface. In multiple-interface environments, an interface can be attached by a third
   ansible_ec2_network_interfaces_macs__owner_id                         party, such as Elastic Load Balancing. Traffic on an interface is always billed to the interface owner.
   string                                                                Sample:
                                                                         01234567890
                                                                         The interface's public DNS (IPv4). If the instance is in a VPC, this category is only returned if the enableDnsHostnames
   ansible_ec2_network_interfaces_macs__public_hostname                  attribute is set to true.
   string                                                                Sample:
                                                                         ec2-1-2-3-4.compute-1.amazonaws.com
   ansible_ec2_network_interfaces_macs__public_ipv4s                     The Elastic IP addresses associated with the interface. There may be multiple IPv4 addresses on an instance.
   string                                                                Sample:
                                                                         1.2.3.4
   ansible_ec2_network_interfaces_macs__security_group_ids               The IDs of the security groups to which the network interface belongs. Returned only for instances launched into a VPC.
   string                                                                Sample:
                                                                         sg-01234567,sg-01234568
   ansible_ec2_network_interfaces_macs__security_groups                  Security groups to which the network interface belongs. Returned only for instances launched into a VPC.
   string                                                                Sample:
                                                                         secgroup1,secgroup2
   ansible_ec2_network_interfaces_macs__subnet_id                        The ID of the subnet in which the interface resides. Returned only for instances launched into a VPC.
   string                                                                Sample:
                                                                         subnet-01234567
   ansible_ec2_network_interfaces_macs__subnet_ipv4_cidr_block           The IPv4 CIDR block of the subnet in which the interface resides. Returned only for instances launched into a VPC.
   string                                                                Sample:
                                                                         10.0.1.0/24
   ansible_ec2_network_interfaces_macs__subnet_ipv6_cidr_blocks          The IPv6 CIDR block of the subnet in which the interface resides. Returned only for instances launched into a VPC.
   string
   ansible_ec2_network_interfaces_macs__vpc_id                           The ID of the VPC in which the interface resides. Returned only for instances launched into a VPC.
   string                                                                Sample:
                                                                         vpc-0123456
   ansible_ec2_network_interfaces_macs__vpc_ipv4_cidr_block              The IPv4 CIDR block of the VPC in which the interface resides. Returned only for instances launched into a VPC.
   string                                                                Sample:
                                                                         10.0.0.0/16
   ansible_ec2_network_interfaces_macs__vpc_ipv4_cidr_blocks             The IPv4 CIDR block of the VPC in which the interface resides. Returned only for instances launched into a VPC.
   string                                                                Sample:
                                                                         10.0.0.0/16
   ansible_ec2_network_interfaces_macs__vpc_ipv6_cidr_blocks             The IPv6 CIDR block of the VPC in which the interface resides. Returned only for instances launched into a VPC.
   string
   ansible_ec2_placement_availability_zone                               The Availability Zone in which the instance launched.
   string                                                                Sample:
                                                                         us-east-1a
   ansible_ec2_placement_region                                          The Region in which the instance launched.
   string                                                                Sample:
                                                                         us-east-1
   ansible_ec2_product_codes                                             Product codes associated with the instance, if any.
   string                                                                Sample:
                                                                         aw0evgkw8e5c1q413zgy5pjce
   ansible_ec2_profile                                                   EC2 instance hardware profile.
   string                                                                Sample:
                                                                         default-hvm
                                                                         The instance's public DNS. If the instance is in a VPC, this category is only returned if the enableDnsHostnames attribute
   ansible_ec2_public_hostname                                           is set to true.
   string                                                                Sample:
                                                                         ec2-1-2-3-4.compute-1.amazonaws.com
                                                                         The public IPv4 address. If an Elastic IP address is associated with the instance, the value returned is the Elastic IP
   ansible_ec2_public_ipv4                                               address.
   string                                                                Sample:
                                                                         1.2.3.4
   ansible_ec2_public_key                                                Public key. Only available if supplied at instance launch time.
   string
   ansible_ec2_ramdisk_id                                                The ID of the RAM disk specified at launch time, if applicable.
   string
   ansible_ec2_reservation_id                                            The ID of the reservation.
   string                                                                Sample:
                                                                         r-0123456789abcdef0
                                                                         The names of the security groups applied to the instance. After launch, you can only change the security groups of instances
   ansible_ec2_security_groups                                           running in a VPC. Such changes are reflected here and in network/interfaces/macs/mac/security-groups.
   string                                                                Sample:
                                                                         securitygroup1,securitygroup2
   ansible_ec2_services_domain                                           The domain for AWS resources for the region; for example, amazonaws.com for us-east-1.
   string                                                                Sample:
                                                                         amazonaws.com
                                                                         The partition that the resource is in. For standard AWS regions, the partition is aws. If you have resources in other
   ansible_ec2_services_partition                                        partitions, the partition is aws-partitionname. For example, the partition for resources in the China (Beijing) region is
   string                                                                aws-cn.
                                                                         Sample:
                                                                         aws
                                                                         The approximate time, in UTC, that the operating system for your Spot instance will receive the shutdown signal. This item
   ansible_ec2_spot_termination_time                                     is present and contains a time value only if the Spot instance has been marked for termination by Amazon EC2. The
   string                                                                termination-time item is not set to a time if you terminated the Spot instance yourself.
                                                                         Sample:
                                                                         2015-01-05T18:02:00Z
   ansible_ec2_user_data                                                 The instance user data.
   string                                                                Sample:
                                                                         #!/bin/bash

STATUS                   *ec2_metadata_facts-status*

     • This module is guaranteed to have backward compatible interface changes going forward. [stableinterface]
     • This module is maintained by the Ansible Core Team. [core]

RED HAT SUPPORT                   *ec2_metadata_facts-red hat support*

     • Silviu Dicu (@silviud)
     • Vinay Dandekar (@roadmapper)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *ec2_metadata_facts-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/ec2_metadata_facts_module.html
