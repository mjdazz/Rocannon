SYNOPSIS                   *win_credential*

     • Used to create and remove Windows Credentials in the Credential Manager.
     • This module can manage both standard username/password credentials as well as certificate credentials.

PARAMETERS                   *win_credential-parameters*

     Parameter      Choices/Defaults                                                                               Comments
   alias                                 Adds an alias for the credential.
   string                                Typically this is the NetBIOS name of a host if name is set to the DNS name.
   attributes                            A list of dicts that set application specific attributes for a credential.
   -                                     When set, existing attributes will be compared to the list as a whole, any differences means all attributes will be replaced.
     data                                The value for the attribute.
     string
     data_format   Choices:              Controls the input type for data.
     string        • base64              If text, data is a text string that is UTF-16LE encoded to bytes.
                   • text ←              If base64, data is a base64 string that is base64 decoded to bytes.
     name                                The key for the attribute.
     string /                            This is not a unique identifier as multiple attributes can have the same key.
     required
   comment                               A user defined comment for the credential.
   string
                                         The target that identifies the server or servers that the credential is to be used for.
   name                                  If the value can be a NetBIOS name, DNS server name, DNS host name suffix with a wildcard character ("), a NetBIOS of DNS domain name that contains a
   string /                              wildcard character sequence, or an asterisk.
   required                              See TargetName in https://docs.microsoft.com/en-us/windows/desktop/api/wincred/ns-wincred-_credentiala for more details on what this value can be.
                                         This is used with type to produce a unique credential.
   persistence     Choices:              Defines the persistence of the credential.
   string          • enterprise          If local, the credential will persist for all logons of the same user on the same host.
                   • local ←             enterprise is the same as local but the credential is visible to the same domain user when running on other hosts and not just localhost.
                                         The secret for the credential.
   secret                                When omitted, then no secret is used for the credential if a new credentials is created.
   string                                When type is a password type, this is the password for username.
                                         When type is a certificate type, this is the pin for the certificate.
   secret_format   Choices:              Controls the input type for secret.
   string          • base64              If text, secret is a text string that is UTF-16LE encoded to bytes.
                   • text ←              If base64, secret is a base64 string that is base64 decoded to bytes.
   state           Choices:              When absent, the credential specified by name and type is removed.
   string          • absent              When present, the credential specified by name and type is removed.
                   • present ←
                   Choices:              The type of credential to store.
   type            • domain_certificate  This is used with name to produce a unique credential.
   string /        • domain_password     When the type is a domain type, the credential is used by Microsoft authentication packages like Negotiate.
   required        • generic_certificate When the type is a generic type, the credential is not used by any particular authentication package.
                   • generic_password    It is recommended to use a domain type as only authentication providers can access the secret.
   update_secret   Choices:              When always, the secret will always be updated if they differ.
   string          • always ←            When on_create, the secret will only be checked/updated when it is first created.
                   • on_create           If the secret cannot be retrieved and this is set to always, the module will always result in a change.
                                         When type is a password type, then this is the username to store for the credential.
   username                              When type is a credential type, then this is the thumbprint as a hex string of the certificate to use.
   string                                When type=domain_password, this should be in the form of a Netlogon (DOMAIN\Username) or a UPN ([email protected]).
                                         If using a certificate thumbprint, the certificate must exist in the CurrentUser\My certificate store for the executing user.

NOTES                   *win_credential-notes*

   Note

     • This module requires to be run with become so it can access the user’s credential store.
     • There can only be one credential per host and type. if a second credential is defined that uses the same host and type, then the original credential is overwritten.

SEE ALSO                   *win_credential-see also*

   See also

   win_user_right – Manage Windows User Rights
   The official documentation on the win_user_right module.

   win_whoami – Get information about the current user and process
   The official documentation on the win_whoami module.

EXAMPLES                   *win_credential-examples*

 - name: Create a local only credential
   win_credential:
     name: server.domain.com
     type: domain_password
     username: DOMAIN\username
     secret: Password01
     state: present

 - name: Remove a credential
   win_credential:
     name: server.domain.com
     type: domain_password
     state: absent

 - name: Create a credential with full values
   win_credential:
     name: server.domain.com
     type: domain_password
     alias: server
     username: [email protected]
     secret: Password01
     comment: Credential for server.domain.com
     persistence: enterprise
     attributes:
     - name: Source
       data: Ansible
     - name: Unique Identifier
       data: Y3VzdG9tIGF0dHJpYnV0ZQ==
       data_format: base64

 - name: Create a certificate credential
   win_credential:
     name: '".domain.com'
     type: domain_certificate
     username: 0074CC4F200D27DC3877C24A92BA8EA21E6C7AF4
     state: present

 - name: Create a generic credential
   win_credential:
     name: smbhost
     type: generic_password
     username: smbuser
     secret: smbuser
     state: present

 - name: Remove a generic credential
   win_credential:
     name: smbhost
     type: generic_password
     state: absent

STATUS                   *win_credential-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Jordan Borean (@jborean93)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *win_credential-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/win_credential_module.html
