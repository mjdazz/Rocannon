SYNOPSIS                   *bigip_gtm_virtual_server*

     • Manages F5 BIG-IP GTM virtual servers. A GTM server can have many virtual servers associated with it. They are arranged in much the same way that pool members are to pools.

PARAMETERS                   *bigip_gtm_virtual_server-parameters*

            Parameter          Choices/Defaults                                                                       Comments
   address                                      Specifies the IP Address of the virtual server.
   string                                       When creating a new GTM virtual server, this parameter is required.
   added in 2.6
   availability_requirements                    Specifies, if you activate more than one health monitor, the number of health monitors that must receive successful responses in order for the link
   dictionary                                   to be considered available.
   added in 2.6
        at_least                                Specifies the minimum number of active health monitors that must be successful before the link is considered up.
        integer                                 This parameter is only relevant when a type of at_least is used.
                                                This parameter will be ignored if a type of either all or require is used.
                                                Specifies the number of probers that should be used when running probes.
        number_of_probers                       When creating a new virtual server, if this parameter is specified, then the number_of_probes parameter must also be specified.
        integer                                 The value of this parameter should always be higher than, or equal to, the value of number_of_probers.
                                                This parameter is only relevant when a type of require is used.
                                                This parameter will be ignored if a type of either all or at_least is used.
                                                Specifies the minimum number of probes that must succeed for this server to be declared up.
        number_of_probes                        When creating a new virtual server, if this parameter is specified, then the number_of_probers parameter must also be specified.
        integer                                 The value of this parameter should always be lower than, or equal to, the value of number_of_probers.
                                                This parameter is only relevant when a type of require is used.
                                                This parameter will be ignored if a type of either all or at_least is used.
                                 Choices:
        type                     • all          Monitor rule type when monitors is specified.
        string                   • at_least     When creating a new virtual, if this value is not specified, the default of 'all' will be used.
                                 • require
                                                Specifies resource thresholds or limit requirements at the server level.
   limits                                       When you enable one or more limit settings, the system then uses that data to take servers in and out of service.
   dictionary                                   You can define limits for any or all of the limit settings. However, when a server does not meet the resource threshold limit requirement, the system
   added in 2.6                                 marks the entire server as unavailable and directs load-balancing traffic to another resource.
                                                The limit settings available depend on the type of server.
        bits_enabled             Choices:       Whether the bits limit is enabled or not.
        boolean                  • no           This parameter allows you to switch on or off the effect of the limit.
                                 • yes
        bits_limit                              Specifies the maximum allowable data throughput rate, in bits per second, for the virtual servers on the server.
        integer                                 If the network traffic volume exceeds this limit, the system marks the server as unavailable.
        connections_enabled      Choices:       Whether the current connections limit is enabled or not.
        boolean                  • no           This parameter allows you to switch on or off the effect of the limit.
                                 • yes
        connections_limit                       Specifies the maximum number of concurrent connections, combined, for all of the virtual servers on the server.
        integer                                 If the connections exceed this limit, the system marks the server as unavailable.
        packets_enabled          Choices:       Whether the packets limit is enabled or not.
        boolean                  • no           This parameter allows you to switch on or off the effect of the limit.
                                 • yes
        packets_limit                           Specifies the maximum allowable data transfer rate, in packets per second, for the virtual servers on the server.
        integer                                 If the network traffic volume exceeds this limit, the system marks the server as unavailable.
   link
   string                                       Specifies a link to assign to the server or virtual server.
   added in 2.6
   monitors                                     Specifies the health monitors that the system currently uses to monitor this resource.
   list                                         When availability_requirements.type is require, you may only have a single monitor in the monitors list.
   added in 2.6
   name
   string                                       Specifies the name of the virtual server.
   added in 2.6
   partition                   Default:
   string                      "Common"         Device partition to manage resources on.
   added in 2.6
   port                                         Specifies the service port number for the virtual server or pool member. For example, the HTTP service is typically port 80.
   integer                                      To specify all ports, use an ".
                                                When creating a new GTM virtual server, if this parameter is not specified, a default of " will be used.
   provider
   dictionary                                   A dict object containing connection details.
   added in 2.5
        auth_provider                           Configures the auth provider for to obtain authentication tokens from the remote device.
        string                                  This option is really used when working with BIG-IQ devices.
        password                                The password for the user account used to connect to the BIG-IP.
        string / required                       You may omit this option by setting the environment variable F5_PASSWORD.
                                                aliases: pass, pwd
        server                                  The BIG-IP host.
        string / required                       You may omit this option by setting the environment variable F5_SERVER.
        server_port            Default:         The BIG-IP server port.
        integer                443              You may omit this option by setting the environment variable F5_SERVER_PORT.
        ssh_keyfile                             Specifies the SSH keyfile to use to authenticate the connection to the remote device. This argument is only used for cli transports.
        path                                    You may omit this option by setting the environment variable ANSIBLE_NET_SSH_KEYFILE.
        timeout                                 Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded
        integer                                 before the operation is completed, the module will error.
        transport                Choices:
        string                   • cli          Configures the transport connection to use when connecting to the remote device.
                                 • rest ←
        user                                    The username to connect to the BIG-IP with. This user must have administrative privileges on the device.
        string / required                       You may omit this option by setting the environment variable F5_USER.
        validate_certs           Choices:       If no, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.
        boolean                  • no           You may omit this option by setting the environment variable F5_VALIDATE_CERTS.
                                 • yes ←
   server_name
   string                                       Specifies the name of the server that the virtual server is associated with.
   added in 2.6
                                 Choices:
   state                         • present ←    When present, ensures that the resource exists.
   string                        • absent       When absent, ensures the resource is removed.
                                 • enabled
                                 • disabled
   translation_address                          Specifies the translation IP address for the virtual server.
   string                                       To unset this parameter, provide an empty string ("") as a value.
   added in 2.6                                 When creating a new GTM virtual server, if this parameter is not specified, a default of :: will be used.
   translation_port                             Specifies the translation port number or service name for the virtual server.
   string                                       To specify all ports, use an ".
   added in 2.6                                 When creating a new GTM virtual server, if this parameter is not specified, a default of " will be used.
   virtual_server_dependencies                  Specifies the virtual servers on which the current virtual server depends.
   list                                         If any of the specified servers are unavailable, the current virtual server is also listed as unavailable.
   added in 2.6
        server                                  Server which the dependant virtual server is part of.
        string / required
        virtual_server                          Virtual server to depend on.
        string / required

NOTES                   *bigip_gtm_virtual_server-notes*

   Note

     • For more information on using Ansible to manage F5 Networks devices see https://www.ansible.com/integrations/networks/f5.
     • Requires BIG-IP software version >= 12.
     • The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the
       bigip_config module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.

EXAMPLES                   *bigip_gtm_virtual_server-examples*

 - name: Enable virtual server
   bigip_gtm_virtual_server:
     server_name: server1
     name: my-virtual-server
     state: enabled
     provider:
       user: admin
       password: secret
       server: lb.mydomain.com
   delegate_to: localhost

RETURN VALUES                   *bigip_gtm_virtual_server-return values*

   Common return values are documented here, the following are the fields unique to this module:

               Key             Returned                                                                          Description
   address                              The new address of the resource.
   string                      changed  Sample:
                                        1.2.3.4
   availability_requirements            The new availability requirement configurations for the resource.
   dictionary                  changed  Sample:
                                        {'type': 'all'}
   limits                               The new limit configurations for the resource.
   dictionary                  changed  Sample:
                                        {'bits_enabled': True, 'bits_limit': 100}
   link                                 The new link value for the resource.
   string                      changed  Sample:
                                        /Common/my-link
   monitors                             The new list of monitors for the resource.
   list                        changed  Sample:
                                        ['/Common/monitor1', '/Common/monitor2']
   port                                 The new port of the resource.
   integer                     changed  Sample:
                                        500
   server_name                          The server name associated with the virtual server.
   string                      changed  Sample:
                                        /Common/my-gtm-server
   translation_address                  The new translation address of the resource.
   integer                     changed  Sample:
                                        500
   translation_port                     The new translation port of the resource.
   integer                     changed  Sample:
                                        500
   virtual_server_dependencies          The new list of virtual server dependencies for the resource
   list                        changed  Sample:
                                        ['/Common/vs1', '/Common/vs2']

STATUS                   *bigip_gtm_virtual_server-status*

     • This module is guaranteed to have backward compatible interface changes going forward. [stableinterface]
     • This module is maintained by an Ansible Partner. [certified]

     • Tim Rupp (@caphrim007)
     • Wojciech Wypior (@wojtek0806)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *bigip_gtm_virtual_server-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/bigip_gtm_virtual_server_module.html
