SYNOPSIS                   *nxos_snapshot*

     • Create snapshots of the running states of selected features, add new show commands for snapshot creation, delete and compare existing snapshots.

PARAMETERS                   *nxos_snapshot-parameters*

          Parameter        Choices/Defaults                                                                         Comments
                             Choices:
                             • add
   action                    • compare      Define what snapshot action the module would perform.
   - / required              • create
                             • delete
                             • delete_all
                             Choices:
   compare_option            • summary      Snapshot options to be used when action=compare.
   -                         • ipv4routes
                             • ipv6routes
   comparison_results_file                  Name of the file where snapshots comparison will be stored when action=compare.
   -
   description                              Snapshot description to be used when action=create.
   -
   element_key1                             Specify the tags used to distinguish among row entries, to be used when action=add.
   -
   element_key2                             Specify the tags used to distinguish among row entries, to be used when action=add.
   -
   path                    Default:         Specify the path of the file where new created snapshot or snapshots comparison will be stored, to be used when action=create and
   -                       "./"             save_snapshot_locally=true or action=compare.
                                            Deprecated
                                            Starting with Ansible 2.5 we recommend using connection: network_cli.
                                            This option is only required if you are using NX-API.
   provider                                 For more information please see the NXOS Platform Options guide.
   dictionary
                                            ═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

                                            A dict object containing connection details.
       auth_pass                            Specifies the password to use if required to enter privileged mode on the remote device. If authorize is false, then this argument does nothing. If the
       string                               value is not specified in the task, the value of environment variable ANSIBLE_NET_AUTH_PASS will be used instead.
       added in 2.5.3
       authorize             Choices:       Instructs the module to enter privileged mode on the remote device before sending any commands. If not specified, the device will attempt to execute all
       boolean               • no ←         commands in non-privileged mode. If the value is not specified in the task, the value of environment variable ANSIBLE_NET_AUTHORIZE will be used instead.
       added in 2.5.3        • yes
       host                                 Specifies the DNS host name or address for connecting to the remote device over the specified transport. The value of host is used as the destination
       string / required                    address for the transport.
       password                             Specifies the password to use to authenticate the connection to the remote device. This is a common argument used for either cli or nxapi transports. If
       string                               the value is not specified in the task, the value of environment variable ANSIBLE_NET_PASSWORD will be used instead.
       port                Default:         Specifies the port to use when building the connection to the remote device. This value applies to either cli or nxapi. The port value will default to
       integer             "0 (use common   the appropriate transport common port if none is provided in the task. (cli=22, http=80, https=443).
                           port)"
       ssh_keyfile                          Specifies the SSH key to use to authenticate the connection to the remote device. This argument is only used for the cli transport. If the value is not
       string                               specified in the task, the value of environment variable ANSIBLE_NET_SSH_KEYFILE will be used instead.
       timeout             Default:         Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before
       integer             10               the operation is completed, the module will error. NX-API can be slow to return on long-running commands (sh mac, sh bgp, etc).
       transport             Choices:       Configures the transport connection to use when connecting to the remote device. The transport argument supports connectivity to the device over cli
       string / required     • cli ←        (ssh) or nxapi.
                             • nxapi
       use_proxy             Choices:
       boolean               • no           If no, the environment variables http_proxy and https_proxy will be ignored.
       added in 2.5          • yes ←
       use_ssl               Choices:
       boolean               • no ←         Configures the transport to use SSL if set to yes only when the transport=nxapi, otherwise this value is ignored.
                             • yes
       username                             Configures the username to use to authenticate the connection to the remote device. This value is used to authenticate either the CLI login or the nxapi
       string                               authentication depending on which transport is used. If the value is not specified in the task, the value of environment variable ANSIBLE_NET_USERNAME
                                            will be used instead.
       validate_certs        Choices:       If no, SSL certificates will not be validated. This should only be used on personally controlled sites using self-signed certificates. If the transport
       boolean               • no           argument is not nxapi, this value is ignored.
                             • yes ←
   row_id                                   Specifies the tag of each row entry of the show command's XML output, to be used when action=add.
   -
   save_snapshot_locally     Choices:
   boolean                   • no ←         Specify to locally store a new created snapshot, to be used when action=create.
                             • yes
   section                                  Used to name the show command output, to be used when action=add.
   -
   show_command                             Specify a new show command, to be used when action=add.
   -
   snapshot1                                First snapshot to be used when action=compare.
   -
   snapshot2                                Second snapshot to be used when action=compare.
   -
   snapshot_name                            Snapshot name, to be used when action=create or action=delete.
   -

NOTES                   *nxos_snapshot-notes*

   Note

     • Tested against NXOSv 7.3.(0)D1(1) on VIRL
     • transport=cli may cause timeout errors.
     • The element_key1 and element_key2 parameter specify the tags used to distinguish among row entries. In most cases, only the element_key1 parameter needs to specified to be able to
       distinguish among row entries.
     • action=compare will always store a comparison report on a local file.
     • For information on using CLI and NX-API see the NXOS Platform Options guide
     • For more information on using Ansible to manage network devices see the Ansible Network Guide
     • For more information on using Ansible to manage Cisco devices see the Cisco integration page.

EXAMPLES                   *nxos_snapshot-examples*

 # Create a snapshot and store it locally
 - nxos_snapshot:
     action: create
     snapshot_name: test_snapshot
     description: Done with Ansible
     save_snapshot_locally: true
     path: /home/user/snapshots/

 # Delete a snapshot
 - nxos_snapshot:
     action: delete
     snapshot_name: test_snapshot

 # Delete all existing snapshots
 - nxos_snapshot:
     action: delete_all

 # Add a show command for snapshots creation
 - nxos_snapshot:
     section: myshow
     show_command: show ip interface brief
     row_id: ROW_intf
     element_key1: intf-name

 # Compare two snapshots
 - nxos_snapshot:
     action: compare
     snapshot1: pre_snapshot
     snapshot2: post_snapshot
     comparison_results_file: compare_snapshots.txt
     compare_option: summary
     path: '../snapshot_reports/'

RETURN VALUES                   *nxos_snapshot-return values*

   Common return values are documented here, the following are the fields unique to this module:

     Key      Returned                                                                                   Description
   commands              commands sent to the device
   list     verbose mode Sample:
                         ['snapshot create post_snapshot Post-snapshot']

STATUS                   *nxos_snapshot-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Network Team. [network]

RED HAT SUPPORT                   *nxos_snapshot-red hat support*

     • Gabriele Gerbino (@GGabriele)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *nxos_snapshot-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/nxos_snapshot_module.html
