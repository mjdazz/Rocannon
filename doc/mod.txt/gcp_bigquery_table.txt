SYNOPSIS                   *gcp_bigquery_table*

     • A Table that belongs to a Dataset .

REQUIREMENTS                   *gcp_bigquery_table-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.6
     • requests >= 2.18.4
     • google-auth >= 1.3.0

PARAMETERS                   *gcp_bigquery_table-parameters*

                Parameter                Choices/Defaults                                                                   Comments
                                          Choices:
   auth_kind                              • application    The type of credential used.
   string / required                      • machineaccount
                                          • serviceaccount
   clustering                                              One or more fields on which data should be clustered. Only top-level, non-repeated, simple-type fields are supported. When you cluster a
   list                                                    table using multiple columns, the order of columns you specify is important. The order of the specified columns determines the sort order
   added in 2.9                                            of the data.
   dataset                                                 Name of the dataset.
   string
   description                                             A user-friendly description of the dataset.
   string
   encryption_configuration                                Custom encryption configuration.
   dictionary
    kms_key_name                                           Describes the Cloud KMS encryption key that will be used to protect destination BigQuery table. The BigQuery Service Account associated
    string                                                 with your project requires access to this encryption key.
   env_type                                                Specifies which Ansible environment you're running this module within.
   string                                                  This should not be set unless you know what you're doing.
                                                           This only alters the User Agent string for any API requests.
   expiration_time                                         The time when this table expires, in milliseconds since the epoch. If not present, the table will persist indefinitely.
   integer
   external_data_configuration                             Describes the data format, location, and other properties of a table stored outside of BigQuery. By defining these properties, the data
   dictionary                                              source can then be queried as if it were a standard BigQuery table.
    autodetect                            Choices:
    boolean                               • no             Try to detect schema and format options automatically. Any option specified explicitly will be honored.
                                          • yes
    bigtable_options                                       Additional options if sourceFormat is set to BIGTABLE.
    dictionary
     column_families                                       List of column families to expose in the table schema along with their types.
     list
           columns                                         Lists of columns that should be exposed as individual fields as opposed to a list of (column name, value) pairs.
           list
                 encoding                                  The encoding of the values when the type is not STRING.
                 string                                    Some valid choices include: "TEXT", "BINARY"
                 field_name                                If the qualifier is not a valid BigQuery field identifier, a valid identifier must be provided as the column field name and is used as
                 string                                    field name in queries.
                 only_read_latest         Choices:
                 boolean                  • no             If this is set, only the latest version of value in this column are exposed .
                                          • yes
                 qualifier_string                          Qualifier of the column.
                 string / required
                 type                                      The type to convert the value in cells of this column.
                 string                                    Some valid choices include: "BYTES", "STRING", "INTEGER", "FLOAT", "BOOLEAN"
           encoding                                        The encoding of the values when the type is not STRING.
           string                                          Some valid choices include: "TEXT", "BINARY"
           family_id                                       Identifier of the column family.
           string
           only_read_latest               Choices:
           boolean                        • no             If this is set only the latest version of value are exposed for all columns in this column family .
                                          • yes
           type                                            The type to convert the value in cells of this column family.
           string                                          Some valid choices include: "BYTES", "STRING", "INTEGER", "FLOAT", "BOOLEAN"
     ignore_unspecified_column_families   Choices:
     boolean                              • no             If field is true, then the column families that are not specified in columnFamilies list are not exposed in the table schema .
                                          • yes
     read_rowkey_as_string                Choices:
     boolean                              • no             If field is true, then the rowkey column families will be read and converted to string.
                                          • yes
    compression                                            The compression type of the data source.
    string                                                 Some valid choices include: "GZIP", "NONE"
    csv_options                                            Additional properties to set if sourceFormat is set to CSV.
    dictionary
     allow_jagged_rows                    Choices:
     boolean                              • no             Indicates if BigQuery should accept rows that are missing trailing optional columns .
                                          • yes
     allow_quoted_newlines                Choices:
     boolean                              • no             Indicates if BigQuery should allow quoted data sections that contain newline characters in a CSV file .
                                          • yes
     encoding                                              The character encoding of the data.
     string                                                Some valid choices include: "UTF-8", "ISO-8859-1"
     field_delimiter                                       The separator for fields in a CSV file.
     string
     quote                                                 The value that is used to quote data sections in a CSV file.
     string
     skip_leading_rows                  Default:           The number of rows at the top of a CSV file that BigQuery will skip when reading the data.
     integer                            "0"
    google_sheets_options                                  Additional options if sourceFormat is set to GOOGLE_SHEETS.
    dictionary
     skip_leading_rows                  Default:           The number of rows at the top of a Google Sheet that BigQuery will skip when reading the data.
     integer                            "0"
    ignore_unknown_values                 Choices:
    boolean                               • no             Indicates if BigQuery should allow extra values that are not represented in the table schema .
                                          • yes
    max_bad_records                     Default:           The maximum number of bad records that BigQuery can ignore when reading data .
    integer                             "0"
    schema                                                 The schema for the data. Schema is required for CSV and JSON formats.
    dictionary
     fields                                                Describes the fields in a table.
     list
           description                                     The field description.
           string
           fields                                          Describes the nested schema fields if the type property is set to RECORD .
           list
           mode                                            Field mode.
           string                                          Some valid choices include: "NULLABLE", "REQUIRED", "REPEATED"
           name                                            Field name.
           string
           type                                            Field data type.
           string                                          Some valid choices include: "STRING", "BYTES", "INTEGER", "FLOAT", "TIMESTAMP", "DATE", "TIME", "DATETIME", "RECORD"
    source_format                                          The data format.
    string                                                 Some valid choices include: "CSV", "GOOGLE_SHEETS", "NEWLINE_DELIMITED_JSON", "AVRO", "DATASTORE_BACKUP", "BIGTABLE"
                                                           The fully-qualified URIs that point to your data in Google Cloud.
    source_uris                                            For Google Cloud Storage URIs: Each URI can contain one '"' wildcard character and it must come after the 'bucket' name. Size limits
    list                                                   related to load jobs apply to external data sources. For Google Cloud Bigtable URIs: Exactly one URI can be specified and it has be a
                                                           fully specified and valid HTTPS URL for a Google Cloud Bigtable table. For Google Cloud Datastore backups, exactly one URI can be
                                                           specified. Also, the '"' wildcard character is not allowed.
   friendly_name                                           A descriptive name for this table.
   string
   labels                                                  The labels associated with this dataset. You can use these to organize and group your datasets .
   dictionary
   name                                                    Name of the table.
   string
   num_rows
   integer                                                 The number of rows of data in this table, excluding any data in the streaming buffer.
   added in 2.9
   project                                                 The Google Cloud Platform project to use.
   string
   schema                                                  Describes the schema of this table.
   dictionary
    fields                                                 Describes the fields in a table.
    list
     description                                           The field description. The maximum length is 1,024 characters.
     string
     fields                                                Describes the nested schema fields if the type property is set to RECORD.
     list
     mode                                                  The field mode.
     string                                                Some valid choices include: "NULLABLE", "REQUIRED", "REPEATED"
     name                                                  The field name.
     string
     type                                                  The field data type.
     string                                                Some valid choices include: "STRING", "BYTES", "INTEGER", "FLOAT", "TIMESTAMP", "DATE", "TIME", "DATETIME", "RECORD"
   scopes                                                  Array of scopes to be used.
   list
   service_account_contents                                The contents of a Service Account JSON file, either in a dictionary or as a JSON string that represents it.
   jsonarg
   service_account_email                                   An optional service account email address if machineaccount is selected and the user does not wish to use the default email.
   string
   service_account_file                                    The path of a Service Account JSON file if serviceaccount is selected as type.
   path
   state                                  Choices:
   string                                 • present ←      Whether the given object should exist in GCP
                                          • absent
   table_reference                                         Reference describing the ID of this table.
   dictionary
    dataset_id                                             The ID of the dataset containing this table.
    string
    project_id                                             The ID of the project containing this table.
    string
    table_id                                               The ID of the the table.
    string
   time_partitioning                                       If specified, configures time-based partitioning for this table.
   dictionary
    expiration_ms                                          Number of milliseconds for which to keep the storage for a partition.
    integer
    field                                                  If not set, the table is partitioned by pseudo column, referenced via either '_PARTITIONTIME' as TIMESTAMP type, or '_PARTITIONDATE' as
    string                                                 DATE type. If field is specified, the table is instead partitioned by this field. The field must be a top-level TIMESTAMP or DATE field.
    added in 2.9                                           Its mode must be NULLABLE or REQUIRED.
    type                                                   The only type supported is DAY, which will generate one partition per day.
    string                                                 Some valid choices include: "DAY"
   view                                                    The view definition.
   dictionary
    use_legacy_sql                        Choices:
    boolean                               • no             Specifies whether to use BigQuery's legacy SQL for this view .
                                          • yes
    user_defined_function_resources                        Describes user-defined function resources used in the query.
    list
     inline_code                                           An inline resource that contains code for a user-defined function (UDF). Providing a inline code resource is equivalent to providing a URI
     string                                                for a file containing the same code.
     resource_uri                                          A code resource to load from a Google Cloud Storage URI (gs://bucket/path).
     string

NOTES                   *gcp_bigquery_table-notes*

   Note

     • for authentication, you can set service_account_file using the c(gcp_service_account_file) env variable.
     • for authentication, you can set service_account_contents using the c(GCP_SERVICE_ACCOUNT_CONTENTS) env variable.
     • For authentication, you can set service_account_email using the GCP_SERVICE_ACCOUNT_EMAIL env variable.
     • For authentication, you can set auth_kind using the GCP_AUTH_KIND env variable.
     • For authentication, you can set scopes using the GCP_SCOPES env variable.
     • Environment variables values will only be used if the playbook values are not set.
     • The service_account_email and service_account_file options are mutually exclusive.

EXAMPLES                   *gcp_bigquery_table-examples*

 - name: create a dataset
   gcp_bigquery_dataset:
     name: example_dataset
     dataset_reference:
       dataset_id: example_dataset
     project: "{{ gcp_project }}"
     auth_kind: "{{ gcp_cred_kind }}"
     service_account_file: "{{ gcp_cred_file }}"
     state: present
   register: dataset

 - name: create a table
   gcp_bigquery_table:
     name: example_table
     dataset: example_dataset
     table_reference:
       dataset_id: example_dataset
       project_id: test_project
       table_id: example_table
     project: test_project
     auth_kind: serviceaccount
     service_account_file: "/tmp/auth.pem"
     state: present

RETURN VALUES                   *gcp_bigquery_table-return values*

   Common return values are documented here, the following are the fields unique to this module:

                   Key                 Returned                                                                      Description
   clustering                          success  One or more fields on which data should be clustered. Only top-level, non-repeated, simple-type fields are supported. When you cluster a table using
   list                                         multiple columns, the order of columns you specify is important. The order of the specified columns determines the sort order of the data.
   creationTime                        success  The time when this dataset was created, in milliseconds since the epoch.
   integer
   dataset                             success  Name of the dataset.
   string
   description                         success  A user-friendly description of the dataset.
   string
   encryptionConfiguration             success  Custom encryption configuration.
   complex
     kmsKeyName                        success  Describes the Cloud KMS encryption key that will be used to protect destination BigQuery table. The BigQuery Service Account associated with your
     string                                     project requires access to this encryption key.
   expirationTime                      success  The time when this table expires, in milliseconds since the epoch. If not present, the table will persist indefinitely.
   integer
   externalDataConfiguration           success  Describes the data format, location, and other properties of a table stored outside of BigQuery. By defining these properties, the data source can
   complex                                      then be queried as if it were a standard BigQuery table.
     autodetect                        success  Try to detect schema and format options automatically. Any option specified explicitly will be honored.
     boolean
     bigtableOptions                   success  Additional options if sourceFormat is set to BIGTABLE.
     complex
       columnFamilies                  success  List of column families to expose in the table schema along with their types.
       complex
             columns                   success  Lists of columns that should be exposed as individual fields as opposed to a list of (column name, value) pairs.
             complex
                   encoding            success  The encoding of the values when the type is not STRING.
                   string
                   fieldName           success  If the qualifier is not a valid BigQuery field identifier, a valid identifier must be provided as the column field name and is used as field name in
                   string                       queries.
                   onlyReadLatest      success  If this is set, only the latest version of value in this column are exposed .
                   boolean
                   qualifierString     success  Qualifier of the column.
                   string
                   type                success  The type to convert the value in cells of this column.
                   string
             encoding                  success  The encoding of the values when the type is not STRING.
             string
             familyId                  success  Identifier of the column family.
             string
             onlyReadLatest            success  If this is set only the latest version of value are exposed for all columns in this column family .
             boolean
             type                      success  The type to convert the value in cells of this column family.
             string
       ignoreUnspecifiedColumnFamilies success  If field is true, then the column families that are not specified in columnFamilies list are not exposed in the table schema .
       boolean
       readRowkeyAsString              success  If field is true, then the rowkey column families will be read and converted to string.
       boolean
     compression                       success  The compression type of the data source.
     string
     csvOptions                        success  Additional properties to set if sourceFormat is set to CSV.
     complex
       allowJaggedRows                 success  Indicates if BigQuery should accept rows that are missing trailing optional columns .
       boolean
       allowQuotedNewlines             success  Indicates if BigQuery should allow quoted data sections that contain newline characters in a CSV file .
       boolean
       encoding                        success  The character encoding of the data.
       string
       fieldDelimiter                  success  The separator for fields in a CSV file.
       string
       quote                           success  The value that is used to quote data sections in a CSV file.
       string
       skipLeadingRows                 success  The number of rows at the top of a CSV file that BigQuery will skip when reading the data.
       integer
     googleSheetsOptions               success  Additional options if sourceFormat is set to GOOGLE_SHEETS.
     complex
       skipLeadingRows                 success  The number of rows at the top of a Google Sheet that BigQuery will skip when reading the data.
       integer
     ignoreUnknownValues               success  Indicates if BigQuery should allow extra values that are not represented in the table schema .
     boolean
     maxBadRecords                     success  The maximum number of bad records that BigQuery can ignore when reading data .
     integer
     schema                            success  The schema for the data. Schema is required for CSV and JSON formats.
     complex
       fields                          success  Describes the fields in a table.
       complex
             description               success  The field description.
             string
             fields                    success  Describes the nested schema fields if the type property is set to RECORD .
             list
             mode                      success  Field mode.
             string
             name                      success  Field name.
             string
             type                      success  Field data type.
             string
     sourceFormat                      success  The data format.
     string
                                                The fully-qualified URIs that point to your data in Google Cloud.
     sourceUris                                 For Google Cloud Storage URIs: Each URI can contain one '"' wildcard character and it must come after the 'bucket' name. Size limits related to load
     list                              success  jobs apply to external data sources. For Google Cloud Bigtable URIs: Exactly one URI can be specified and it has be a fully specified and valid HTTPS
                                                URL for a Google Cloud Bigtable table. For Google Cloud Datastore backups, exactly one URI can be specified. Also, the '"' wildcard character is not
                                                allowed.
   friendlyName                        success  A descriptive name for this table.
   string
   id                                  success  An opaque ID uniquely identifying the table.
   string
   labels                              success  The labels associated with this dataset. You can use these to organize and group your datasets .
   dictionary
   lastModifiedTime                    success  The time when this table was last modified, in milliseconds since the epoch.
   integer
   location                            success  The geographic location where the table resides. This value is inherited from the dataset.
   string
   name                                success  Name of the table.
   string
   numBytes                            success  The size of this table in bytes, excluding any data in the streaming buffer.
   integer
   numLongTermBytes                    success  The number of bytes in the table that are considered "long-term storage".
   integer
   numRows                             success  The number of rows of data in this table, excluding any data in the streaming buffer.
   integer
   requirePartitionFilter              success  If set to true, queries over this table require a partition filter that can be used for partition elimination to be specified.
   boolean
   schema                              success  Describes the schema of this table.
   complex
     fields                            success  Describes the fields in a table.
     complex
       description                     success  The field description. The maximum length is 1,024 characters.
       string
       fields                          success  Describes the nested schema fields if the type property is set to RECORD.
       list
       mode                            success  The field mode.
       string
       name                            success  The field name.
       string
       type                            success  The field data type.
       string
   streamingBuffer                     success  Contains information regarding this table's streaming buffer, if one is present. This field will be absent if the table is not being streamed to or
   complex                                      if there is no data in the streaming buffer.
     estimatedBytes                    success  A lower-bound estimate of the number of bytes currently in the streaming buffer.
     integer
     estimatedRows                     success  A lower-bound estimate of the number of rows currently in the streaming buffer.
     integer
     oldestEntryTime                   success  Contains the timestamp of the oldest entry in the streaming buffer, in milliseconds since the epoch, if the streaming buffer is available.
     integer
   tableReference                      success  Reference describing the ID of this table.
   complex
     datasetId                         success  The ID of the dataset containing this table.
     string
     projectId                         success  The ID of the project containing this table.
     string
     tableId                           success  The ID of the the table.
     string
   timePartitioning                    success  If specified, configures time-based partitioning for this table.
   complex
     expirationMs                      success  Number of milliseconds for which to keep the storage for a partition.
     integer
     field                                      If not set, the table is partitioned by pseudo column, referenced via either '_PARTITIONTIME' as TIMESTAMP type, or '_PARTITIONDATE' as DATE type. If
     string                            success  field is specified, the table is instead partitioned by this field. The field must be a top-level TIMESTAMP or DATE field. Its mode must be NULLABLE
                                                or REQUIRED.
     type                              success  The only type supported is DAY, which will generate one partition per day.
     string
   type                                success  Describes the table type.
   string
   view                                success  The view definition.
   complex
     useLegacySql                      success  Specifies whether to use BigQuery's legacy SQL for this view .
     boolean
     userDefinedFunctionResources      success  Describes user-defined function resources used in the query.
     complex
       inlineCode                      success  An inline resource that contains code for a user-defined function (UDF). Providing a inline code resource is equivalent to providing a URI for a file
       string                                   containing the same code.
       resourceUri                     success  A code resource to load from a Google Cloud Storage URI (gs://bucket/path).
       string

STATUS                   *gcp_bigquery_table-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Google Inc. (@googlecloudplatform)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *gcp_bigquery_table-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/gcp_bigquery_table_module.html
