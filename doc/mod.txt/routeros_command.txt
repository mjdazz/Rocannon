SYNOPSIS                   *routeros_command*

     • Sends arbitrary commands to an RouterOS node and returns the results read from the device. This module includes an argument that will cause the module to wait for a specific condition before
       returning or timing out if the condition is not met.

PARAMETERS                   *routeros_command-parameters*

   Parameter Choices/Defaults                                                                                Comments
   commands                   List of commands to send to the remote RouterOS device over the configured provider. The resulting output from the command is returned. If the wait_for argument is
   - /                        provided, the module is not returned until the condition is satisfied or the number of retries has expired.
   required
   interval  Default:         Configures the interval in seconds to wait between retries of the command. If the command does not pass the specified conditions, the interval indicates how long to
   -         1                wait before trying the command again.
   match       Choices:       The match argument is used in conjunction with the wait_for argument to specify the match policy. Valid values are all or any. If the value is set to all then all
   -           • any          conditionals in the wait_for must be satisfied. If the value is set to any then only one of the values must be satisfied.
               • all ←
   retries   Default:         Specifies the number of retries a command should by tried before it is considered failed. The command is run on the target device every retry and evaluated against the
   -         10               wait_for conditions.
   wait_for                   List of conditions to evaluate against the output of the command. The task will wait for each condition to be true before moving forward. If the conditional is not
   -                          true within the configured number of retries, the task fails. See examples.

EXAMPLES                   *routeros_command-examples*

 tasks:
   - name: run command on remote devices
     routeros_command:
       commands: /system routerboard print

   - name: run command and check to see if output contains routeros
     routeros_command:
       commands: /system resource print
       wait_for: result[0] contains MikroTik

   - name: run multiple commands on remote nodes
     routeros_command:
       commands:
         - /system routerboard print
         - /system identity print

   - name: run multiple commands and evaluate the output
     routeros_command:
       commands:
         - /system routerboard print
         - /interface ethernet print
       wait_for:
         - result[0] contains x86
         - result[1] contains ether1

RETURN VALUES                   *routeros_command-return values*

   Common return values are documented here, the following are the fields unique to this module:

          Key                                 Returned                                                                               Description
   failed_conditions                                                            The list of conditionals that have failed
   list              failed                                                     Sample:
                                                                                ['...', '...']
   stdout                                                                       The set of responses from the commands
   list              always apart from low level errors (such as action plugin) Sample:
                                                                                ['...', '...']
   stdout_lines                                                                 The value of stdout split into a list
   list              always apart from low level errors (such as action plugin) Sample:
                                                                                [['...', '...'], ['...'], ['...']]

STATUS                   *routeros_command-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Egor Zaitsev (@heuels)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *routeros_command-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/routeros_command_module.html
