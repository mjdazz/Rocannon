SYNOPSIS                   *azure_rm_webappslot*

     • Create, update and delete Azure Web App slot.

REQUIREMENTS                   *azure_rm_webappslot-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • azure >= 2.0.0

PARAMETERS                   *azure_rm_webappslot-parameters*

           Parameter          Choices/Defaults                                                                         Comments
   ad_user                                       Active Directory username. Use when authenticating with an Active Directory user rather than service principal.
   string
   adfs_authority_url
   string                                        Azure AD authority url. Use when authenticating with Username/password, and has your own ADFS authority.
   added in 2.6
   api_profile               Default:            Selects an API profile to use when communicating with Azure services. Default value of latest is appropriate for public clouds; future values will
   string                    "latest"            allow use with Azure Stack.
   added in 2.5
   app_settings                                  Configure web app slot application settings. Suboptions are in key value pair format.
   -
                               Choices:
   app_state                   • started ←       Start/Stop/Restart the slot.
   string                      • stopped
                               • restarted
   append_tags                 Choices:          Use to control if tags field is canonical or just appends to existing tags.
   boolean                     • no              When canonical, any tags not found in the tags parameter will be removed from the object's metadata.
                               • yes ←
                                                 Controls the source of the credentials to use for authentication.
                               Choices:          If not specified, ANSIBLE_AZURE_AUTH_SOURCE environment variable will be used and default to auto if variable is not defined.
                               • auto            auto will follow the default precedence of module parameters -> environment variables -> default profile in credential file ~/.azure/credentials.
   auth_source                 • cli             When set to cli, the credentials will be sources from the default Azure CLI profile.
   string                      • credential_file Can also be set via the ANSIBLE_AZURE_AUTH_SOURCE environment variable.
   added in 2.5                • env             When set to msi, the host machine must be an azure resource with an enabled MSI extension. subscription_id or the environment variable
                               • msi             AZURE_SUBSCRIPTION_ID can be used to identify the subscription ID if the resource is granted access to more than one subscription, otherwise the
                                                 first subscription is chosen.
                                                 The msi was added in Ansible 2.6.
   auto_swap_slot_name                           Used to configure target slot name to auto swap, or disable auto swap.
   -                                             Set it target slot name to auto swap.
                                                 Set it to False to disable auto slot swap.
   cert_validation_mode        Choices:          Controls the certificate validation behavior for Azure endpoints. By default, all modules will validate the server certificate, but when an HTTPS
   string                      • ignore          proxy is in use, or against Azure Stack, it may be necessary to disable this behavior by passing ignore. Can also be set via credential file profile
   added in 2.5                • validate        or the AZURE_CERT_VALIDATION environment variable.
   client_id                                     Azure client ID. Use when authenticating with a Service Principal.
   string
   cloud_environment         Default:            For cloud environments other than the US public cloud, the environment name (as defined by Azure Python SDK, eg, AzureChinaCloud,
   string                    "AzureCloud"        AzureUSGovernment), or a metadata discovery endpoint URL (required for Azure Stack). Can also be set via credential file profile or the
   added in 2.4                                  AZURE_CLOUD_ENVIRONMENT environment variable.
   configuration_source                          Source slot to clone configurations from when creating slot. Use webapp's name to refer to the production slot.
   -
   container_settings                            Web app slot container settings.
   -
    name                                         Name of container, for example imagename:tag.
    -
    registry_server_password                     The container registry server password.
    -
    registry_server_url                          Container registry server URL, for example mydockerregistry.io.
    -
    registry_server_user                         The container registry server user name.
    -
   deployment_source                             Deployment source for git.
   -
    branch                                       The branch name of the repository.
    -
    url                                          Repository URL of deployment source.
    -
   frameworks                                    Set of run time framework settings. Each setting is a dictionary.
   -                                             See https://docs.microsoft.com/en-us/azure/app-service/app-service-web-overview for more info.
                               Choices:          Name of the framework.
                               • java            Supported framework list for Windows web app and Linux web app is different.
                               • net_framework   Windows web apps support java, net_framework, php, python, and node from June 2018.
    name                       • php             Windows web apps support multiple framework at same time.
    -                          • python          Linux web apps support java, ruby, php, dotnetcore, and node from June 2018.
                               • ruby            Linux web apps support only one framework.
                               • dotnetcore      Java framework is mutually exclusive with others.
                               • node
    settings                                     List of settings of the framework.
    -
      java_container                             Name of Java container. This is supported by specific framework java onlys, for example Tomcat, Jetty.
      -
      java_container_version                     Version of Java container. This is supported by specific framework java only.
      -                                          For Tomcat, for example 8.0, 8.5, 9.0. For Jetty, for example 9.1, 9.3.
                                                 Version of the framework. For Linux web app supported value, see https://aka.ms/linux-stacks for more info.
                                                 net_framework supported value sample, v4.0 for .NET 4.6 and v3.0 for .NET 3.5.
                                                 php supported value sample, 5.5, 5.6, 7.0.
    version                                      python supported value sample, 5.5, 5.6, 7.0.
    -                                            node supported value sample, 6.6, 6.9.
                                                 dotnetcore supported value sample, 1.0, 1.1, 1.2.
                                                 ruby supported value sample, 2.3.
                                                 java supported value sample, 1.9 for Windows web app. 1.8 for Linux web app.
   location                                      Resource location. If not set, location from the resource group will be used as default.
   -
   name                                          Unique name of the deployment slot to create or update.
   - / required
   password                                      Active Directory user password. Use when authenticating with an Active Directory user rather than service principal.
   string
   profile                                       Security profile found in ~/.azure/credentials file.
   string
   purge_app_settings          Choices:
   boolean                     • no              Purge any existing application settings. Replace slot application settings with app_settings.
                               • yes
   resource_group                                Name of the resource group to which the resource belongs.
   - / required
   secret                                        Azure client secret. Use when authenticating with a Service Principal.
   string
   startup_file                                  The slot startup file.
   -                                             This only applies for Linux web app slot.
   state                       Choices:          State of the Web App deployment slot.
   -                           • absent          Use present to create or update a slot and absent to delete it.
                               • present ←
   subscription_id                               Your Azure subscription Id.
   string
   swap                                          Swap deployment slots of a web app.
   -
                               Choices:          Swap types.
    action                     • preview ←       preview is to apply target slot settings on source slot first.
    -                          • swap            swap is to complete swapping.
                               • reset           reset is to reset the swap.
    preserve_vnet              Choices:
    boolean                    • no              True to preserve virtual network to the slot during swap. Otherwise False.
                               • yes ←
    target_slot                                  Name of target slot to swap. If set to None, then swap with production slot.
    -
   tags                                          Dictionary of string:string pairs to assign as metadata to the object.
   dictionary                                    Metadata tags on the object will be updated with any provided values.
                                                 To remove tags set append_tags option to false.
   tenant                                        Azure tenant ID. Use when authenticating with a Service Principal.
   string
   webapp_name                                   Web app name which this deployment slot belongs to.
   - / required

NOTES                   *azure_rm_webappslot-notes*

   Note

     • For authentication with Azure you can pass parameters, set environment variables, use a profile stored in ~/.azure/credentials, or log in before you run your tasks or playbook with az login.
     • Authentication is also possible using a service principal or Active Directory user.
     • To authenticate via service principal, pass subscription_id, client_id, secret and tenant or set environment variables AZURE_SUBSCRIPTION_ID, AZURE_CLIENT_ID, AZURE_SECRET and AZURE_TENANT.
     • To authenticate via Active Directory user, pass ad_user and password, or set AZURE_AD_USER and AZURE_PASSWORD in the environment.
     • Alternatively, credentials can be stored in ~/.azure/credentials. This is an ini file containing a [default] section and the following keys: subscription_id, client_id, secret and tenant or
       subscription_id, ad_user and password. It is also possible to add additional profiles. Specify the profile by passing profile or setting AZURE_PROFILE in the environment.

SEE ALSO                   *azure_rm_webappslot-see also*

   See also

   Sign in with Azure CLI
   How to authenticate using the az login command.

EXAMPLES                   *azure_rm_webappslot-examples*

 - name: Create a webapp slot
   azure_rm_webappslot:
     resource_group: myResourceGroup
     webapp_name: myJavaWebApp
     name: stage
     configuration_source: myJavaWebApp
     app_settings:
       testkey: testvalue

 - name: swap the slot with production slot
   azure_rm_webappslot:
     resource_group: myResourceGroup
     webapp_name: myJavaWebApp
     name: stage
     swap:
       action: swap

 - name: stop the slot
   azure_rm_webappslot:
     resource_group: myResourceGroup
     webapp_name: myJavaWebApp
     name: stage
     app_state: stopped

 - name: udpate a webapp slot app settings
   azure_rm_webappslot:
     resource_group: myResourceGroup
     webapp_name: myJavaWebApp
     name: stage
     app_settings:
       testkey: testvalue2

 - name: udpate a webapp slot frameworks
   azure_rm_webappslot:
     resource_group: myResourceGroup
     webapp_name: myJavaWebApp
     name: stage
     frameworks:
       - name: "node"
         version: "10.1"

RETURN VALUES                   *azure_rm_webappslot-return values*

   Common return values are documented here, the following are the fields unique to this module:

    Key   Returned                                                                                    Description
   id              ID of current slot.
   string always   Sample:
                   /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myResourceGroup/providers/Microsoft.Web/sites/testapp/slots/stage1

STATUS                   *azure_rm_webappslot-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Yunge Zhu(@yungezz)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *azure_rm_webappslot-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/azure_rm_webappslot_module.html
