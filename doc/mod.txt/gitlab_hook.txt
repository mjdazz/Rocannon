SYNOPSIS                   *gitlab_hook*

     • Adds, updates and removes project hook

   Aliases: gitlab_hooks

REQUIREMENTS                   *gitlab_hook-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • python-gitlab python module <= 1.12.1

PARAMETERS                   *gitlab_hook-parameters*

         Parameter       Choices/Defaults                                                                          Comments
   api_password                           The password to use for authentication against the API
   string
   api_token                              GitLab token for logging in.
   string                                 aliases: private_token, access_token
   added in 2.8
   api_url                                The resolvable endpoint for the API
   string
   api_username                           The username to use for authentication against the API
   string
   hook_url                               The url that you want GitLab to post to, this is used as the primary key for updates and deletion.
   string / required
   hook_validate_certs     Choices:       Whether GitLab will do SSL verification when triggering the hook.
   boolean                 • no ←         aliases: enable_ssl_verification
                           • yes
   issues_events           Choices:
   boolean                 • no ←         Trigger hook on issues events.
                           • yes
   job_events              Choices:
   boolean                 • no ←         Trigger hook on job events.
                           • yes
   merge_requests_events   Choices:
   boolean                 • no ←         Trigger hook on merge requests events.
                           • yes
   note_events             Choices:
   boolean                 • no ←         Trigger hook on note events or when someone adds a comment.
                           • yes
   pipeline_events         Choices:
   boolean                 • no ←         Trigger hook on pipeline events.
                           • yes
   project                                Id or Full path of the project in the form of group/name.
   string / required
   push_events             Choices:
   boolean                 • no           Trigger hook on push events.
                           • yes ←
   state                   Choices:       When present the hook will be updated to match the input or created if it doesn't exist.
   string / required       • present ←    When absent hook will be deleted if it exists.
                           • absent
   tag_push_events         Choices:
   boolean                 • no ←         Trigger hook on tag push events.
                           • yes
   token                                  Secret token to validate hook messages at the receiver.
   string                                 If this is present it will always result in a change as it cannot be retrieved from GitLab.
                                          Will show up in the X-GitLab-Token HTTP request header.
   validate_certs          Choices:
   boolean                 • no           Whether or not to validate SSL certs when supplying a https endpoint.
                           • yes ←
   wiki_page_events        Choices:
   boolean                 • no ←         Trigger hook on wiki events.
                           • yes

EXAMPLES                   *gitlab_hook-examples*

 - name: "Adding a project hook"
   gitlab_hook:
     api_url: https://gitlab.example.com/
     api_token: "{{ access_token }}"
     project: "my_group/my_project"
     hook_url: "https://my-ci-server.example.com/gitlab-hook"
     state: present
     push_events: yes
     tag_push_events: yes
     hook_validate_certs: no
     token: "my-super-secret-token-that-my-ci-server-will-check"

 - name: "Delete the previous hook"
   gitlab_hook:
     api_url: https://gitlab.example.com/
     api_token: "{{ access_token }}"
     project: "my_group/my_project"
     hook_url: "https://my-ci-server.example.com/gitlab-hook"
     state: absent

 - name: "Delete a hook by numeric project id"
   gitlab_hook:
     api_url: https://gitlab.example.com/
     api_token: "{{ access_token }}"
     project: 10
     hook_url: "https://my-ci-server.example.com/gitlab-hook"
     state: absent

RETURN VALUES                   *gitlab_hook-return values*

   Common return values are documented here, the following are the fields unique to this module:

      Key     Returned                                                                                  Description
   error               the error message returned by the GitLab API
   string     failed   Sample:
                       400: path is already in use
   hook       always   API object
   dictionary
   msg                 Success or failure message
   string     always   Sample:
                       Success
   result     always   json parsed response from the server
   dictionary

STATUS                   *gitlab_hook-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Marcus Watkins (@marwatk)
     • Guillaume Martinez (@Lunik)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *gitlab_hook-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/gitlab_hook_module.html
