SYNOPSIS                   *slxos_command*

     • Sends arbitrary commands to an SLX node and returns the results read from the device. This module includes an argument that will cause the module to wait for a specific condition before
       returning or timing out if the condition is not met.
     • This module does not support running commands in configuration mode. Please use slxos_config to configure SLX-OS devices.

PARAMETERS                   *slxos_command-parameters*

   Parameter Choices/Defaults                                                                                Comments
   commands                   List of commands to send to the remote SLX-OS device over the configured provider. The resulting output from the command is returned. If the wait_for argument is
   - /                        provided, the module is not returned until the condition is satisfied or the number of retries has expired.
   required
   interval  Default:         Configures the interval in seconds to wait between retries of the command. If the command does not pass the specified conditions, the interval indicates how long to
   -         1                wait before trying the command again.
   match       Choices:       The match argument is used in conjunction with the wait_for argument to specify the match policy. Valid values are all or any. If the value is set to all then all
   -           • any          conditionals in the wait_for must be satisfied. If the value is set to any then only one of the values must be satisfied.
               • all ←
   retries   Default:         Specifies the number of retries a command should by tried before it is considered failed. The command is run on the target device every retry and evaluated against the
   -         10               wait_for conditions.
   wait_for                   List of conditions to evaluate against the output of the command. The task will wait for each condition to be true before moving forward. If the conditional is not
   -                          true within the configured number of retries, the task fails. See examples.

NOTES                   *slxos_command-notes*

   Note

     • Tested against SLX-OS 17s.1.02
     • If a command sent to the device requires answering a prompt, it is possible to pass a dict containing command, answer and prompt. See examples.

EXAMPLES                   *slxos_command-examples*

 tasks:
   - name: run show version on remote devices
     slxos_command:
       commands: show version

   - name: run show version and check to see if output contains SLX
     slxos_command:
       commands: show version
       wait_for: result[0] contains SLX

   - name: run multiple commands on remote nodes
     slxos_command:
       commands:
         - show version
         - show interfaces

   - name: run multiple commands and evaluate the output
     slxos_command:
       commands:
         - show version
         - show interface status
       wait_for:
         - result[0] contains SLX
         - result[1] contains Eth
   - name: run command that requires answering a prompt
     slxos_command:
       commands:
         - command: 'clear sessions'
           prompt: 'This operation will logout all the user sessions. Do you want to continue (yes/no)?:'
           answer: y

RETURN VALUES                   *slxos_command-return values*

   Common return values are documented here, the following are the fields unique to this module:

          Key                                 Returned                                                                               Description
   failed_conditions                                                            The list of conditionals that have failed
   list              failed                                                     Sample:
                                                                                ['...', '...']
   stdout                                                                       The set of responses from the commands
   list              always apart from low level errors (such as action plugin) Sample:
                                                                                ['...', '...']
   stdout_lines                                                                 The value of stdout split into a list
   list              always apart from low level errors (such as action plugin) Sample:
                                                                                [['...', '...'], ['...'], ['...']]

STATUS                   *slxos_command-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Lindsay Hill (@LindsayHill)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *slxos_command-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/slxos_command_module.html
