SYNOPSIS                   *na_ontap_aggregate*

     • Create, delete, or manage aggregates on ONTAP.

REQUIREMENTS                   *na_ontap_aggregate-requirements*

   The below requirements are needed on the host that executes this module.

     • A physical or virtual clustered Data ONTAP system. The modules support Data ONTAP 9.1 and onward
     • Ansible 2.6
     • Python2 netapp-lib (2017.10.30) or later. Install using ‘pip install netapp-lib’
     • Python3 netapp-lib (2018.11.13) or later. Install using ‘pip install netapp-lib’
     • To enable http on the cluster you must run the following commands ‘set -privilege advanced;’ ‘system services web modify -http-enabled true;’

PARAMETERS                   *na_ontap_aggregate-parameters*

      Parameter    Choices/Defaults                                                                             Comments
                                    Number of disks to place into the aggregate, including parity disks.
   disk_count                       The disks in this newly-created aggregate come from the spare disk pool.
   -                                The smallest disks in this pool join the aggregate first, unless the disk-size argument is provided.
                                    Either disk-count or disks must be supplied. Range [0..2^31-1].
                                    Required when state=present.
   disk_size
   -                                Disk size to use in 4K block size. Disks within 10% of specified size will be used.
   added in 2.7
                     Choices:
                     • ATA
                     • BSAS
   disk_type         • FCAL
   -                 • FSAS         Type of disk to use to build aggregate
   added in 2.7      • LUN
                     • MSATA
                     • SAS
                     • SSD
                     • VMDISK
   disks                            Specific list of disks to use for the new aggregate.
   list                             To create a "mirrored" aggregate with a specific list of disks, both 'disks' and 'mirror_disks' options must be supplied. Additionally, the same number of disks
   added in 2.8                     must be supplied in both lists.
   from_name
   -                                Name of the aggregate to be renamed.
   added in 2.7
   hostname
   string /                         The hostname or IP address of the ONTAP instance.
   required
   http_port                        Override the default port (80 or 443) with this port
   integer
   https             Choices:
   boolean           • no ←         Enable and disable https
                     • yes
   is_mirrored       Choices:       Specifies that the new aggregate be mirrored (have two plexes).
   boolean           • no           If set to true, then the indicated disks will be split across the two plexes. By default, the new aggregate will not be mirrored.
   added in 2.8      • yes          This option cannot be used when a specific list of disks is supplied with either the 'disks' or 'mirror_disks' options.
   mirror_disks
   list                             List of mirror disks to use. It must contain the same number of disks specified in 'disks'.
   added in 2.8
   name                             The name of the aggregate to manage.
   - / required
   nodes                            Node(s) for the aggregate to be created on. If no node specified, mgmt lif home will be used.
   -                                If multiple nodes specified an aggr stripe will be made.
   ontapi                           The ontap api version to use
   integer
   password                         Password for the specified user.
   string /                         aliases: pass
   required
   raid_size
   -                                Sets the maximum number of drives per raid group.
   added in 2.7
   raid_type         Choices:
   -                 • raid4        Specifies the type of RAID groups to use in the new aggregate.
   added in 2.7      • raid_dp
                     • raid_tec
   service_state     Choices:
   -                 • online       Whether the specified aggregate should be enabled or disabled. Creates aggregate if doesnt exist.
                     • offline
   spare_pool        Choices:
   -                 • Pool0        Specifies the spare pool from which to select spare disks to use in creation of a new aggregate.
   added in 2.8      • Pool1
   state             Choices:
   -                 • present ←    Whether the specified aggregate should exist or not.
                     • absent
   time_out        Default:         time to wait for aggregate creation in seconds
   -               100              default is set to 100 seconds
   added in 2.8
   unmount_volumes   Choices:       If set to "TRUE", this option specifies that all of the volumes hosted by the given aggregate are to be unmounted
   boolean           • no           before the offline operation is executed.
                     • yes          By default, the system will reject any attempt to offline an aggregate that hosts one or more online volumes.
                     Choices:       REST API if supported by the target system for all the resources and attributes the module requires. Otherwise will revert to ZAPI.
   use_rest          • Never        Always -- will always use the REST API
   string            • Always       Never -- will always use the ZAPI
                     • Auto ←       Auto -- will try to use the REST Api
   username                         This can be a Cluster-scoped or SVM-scoped account, depending on whether a Cluster-level or SVM-level API is required. For more information, please read the
   string /                         documentation https://mysupport.netapp.com/NOW/download/software/nmsdk/9.4/.
   required                         aliases: user
   validate_certs    Choices:       If set to no, the SSL certificates will not be validated.
   boolean           • no           This should only set to False used on personally controlled sites using self-signed certificates.
                     • yes ←
   wait_for_online   Choices:       Set this parameter to 'true' for synchronous execution during create (wait until aggregate status is online)
   boolean           • no ←         Set this parameter to 'false' for asynchronous execution
   added in 2.8      • yes          For asynchronous, execution exits as soon as the request is sent, without checking aggregate status

NOTES                   *na_ontap_aggregate-notes*

   Note

     • The modules prefixed with na\_ontap are built to support the ONTAP storage platform.

EXAMPLES                   *na_ontap_aggregate-examples*

 - name: Create Aggregates and wait 5 minutes until aggregate is online
   na_ontap_aggregate:
     state: present
     service_state: online
     name: ansibleAggr
     disk_count: 1
     wait_for_online: True
     time_out: 300
     hostname: "{{ netapp_hostname }}"
     username: "{{ netapp_username }}"
     password: "{{ netapp_password }}"

 - name: Manage Aggregates
   na_ontap_aggregate:
     state: present
     service_state: offline
     unmount_volumes: true
     name: ansibleAggr
     disk_count: 1
     hostname: "{{ netapp_hostname }}"
     username: "{{ netapp_username }}"
     password: "{{ netapp_password }}"

 - name: Rename Aggregates
   na_ontap_aggregate:
     state: present
     service_state: online
     from_name: ansibleAggr
     name: ansibleAggr2
     disk_count: 1
     hostname: "{{ netapp_hostname }}"
     username: "{{ netapp_username }}"
     password: "{{ netapp_password }}"

 - name: Delete Aggregates
   na_ontap_aggregate:
     state: absent
     service_state: offline
     unmount_volumes: true
     name: ansibleAggr
     hostname: "{{ netapp_hostname }}"
     username: "{{ netapp_username }}"
     password: "{{ netapp_password }}"

STATUS                   *na_ontap_aggregate-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by an Ansible Partner. [certified]

     • NetApp Ansible Team (@carchi8py) <ng-ansibleteam@netapp.com>

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *na_ontap_aggregate-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/na_ontap_aggregate_module.html
