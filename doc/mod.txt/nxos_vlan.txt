DEPRECATED                   *nxos_vlan*

                         Removed in Ansible:
                  version: 2.13
        Why:      Updated modules released with more functionality
    Alternative:  nxos_vlans

SYNOPSIS                   *nxos_vlan-synopsis*

     • Manages VLAN configurations on NX-OS switches.

PARAMETERS                   *nxos_vlan-parameters*

         Parameter       Choices/Defaults                                                                          Comments
   admin_state             Choices:
   string                  • up ←         Manage the VLAN administrative state of the VLAN equivalent to shut/no shut in VLAN config mode.
                           • down
   aggregate
   list                                   List of VLANs definitions.
   added in 2.5
   associated_interfaces                  This is a intent option and checks the operational state of the for given vlan name for associated interfaces. If the value in the associated_interfaces
   list                                   does not match with the operational state of vlan interfaces on device it will result in failure.
   added in 2.5
   delay                 Default:         Time in seconds to wait before checking for the operational state on remote device. This wait is applicable for operational state arguments.
   integer               10
   interfaces
   list                                   List of interfaces that should be associated to the VLAN or keyword 'default'.
   added in 2.5
   mapped_vni                             The Virtual Network Identifier (VNI) ID that is mapped to the VLAN. Valid values are integer and keyword 'default'. Range 4096-16773119.
   string
   mode                    Choices:
   string                  • ce ←         Set VLAN mode to classical ethernet or fabricpath. This is a valid option for Nexus 5000 and 7000 series.
   added in 2.4            • fabricpath
   name                                   Name of VLAN or keyword 'default'.
   string
                                          Deprecated
                                          Starting with Ansible 2.5 we recommend using connection: network_cli.
                                          This option is only required if you are using NX-API.
   provider                               For more information please see the NXOS Platform Options guide.
   dictionary
                                          ═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

                                          A dict object containing connection details.
      auth_pass                           Specifies the password to use if required to enter privileged mode on the remote device. If authorize is false, then this argument does nothing. If the
      string                              value is not specified in the task, the value of environment variable ANSIBLE_NET_AUTH_PASS will be used instead.
      added in 2.5.3
      authorize            Choices:       Instructs the module to enter privileged mode on the remote device before sending any commands. If not specified, the device will attempt to execute all
      boolean              • no ←         commands in non-privileged mode. If the value is not specified in the task, the value of environment variable ANSIBLE_NET_AUTHORIZE will be used instead.
      added in 2.5.3       • yes
      host                                Specifies the DNS host name or address for connecting to the remote device over the specified transport. The value of host is used as the destination
      string / required                   address for the transport.
      password                            Specifies the password to use to authenticate the connection to the remote device. This is a common argument used for either cli or nxapi transports. If
      string                              the value is not specified in the task, the value of environment variable ANSIBLE_NET_PASSWORD will be used instead.
      port               Default:         Specifies the port to use when building the connection to the remote device. This value applies to either cli or nxapi. The port value will default to the
      integer            "0 (use common   appropriate transport common port if none is provided in the task. (cli=22, http=80, https=443).
                         port)"
      ssh_keyfile                         Specifies the SSH key to use to authenticate the connection to the remote device. This argument is only used for the cli transport. If the value is not
      string                              specified in the task, the value of environment variable ANSIBLE_NET_SSH_KEYFILE will be used instead.
      timeout            Default:         Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the
      integer            10               operation is completed, the module will error. NX-API can be slow to return on long-running commands (sh mac, sh bgp, etc).
      transport            Choices:       Configures the transport connection to use when connecting to the remote device. The transport argument supports connectivity to the device over cli (ssh)
      string / required    • cli ←        or nxapi.
                           • nxapi
      use_proxy            Choices:
      boolean              • no           If no, the environment variables http_proxy and https_proxy will be ignored.
      added in 2.5         • yes ←
      use_ssl              Choices:
      boolean              • no ←         Configures the transport to use SSL if set to yes only when the transport=nxapi, otherwise this value is ignored.
                           • yes
      username                            Configures the username to use to authenticate the connection to the remote device. This value is used to authenticate either the CLI login or the nxapi
      string                              authentication depending on which transport is used. If the value is not specified in the task, the value of environment variable ANSIBLE_NET_USERNAME will
                                          be used instead.
      validate_certs       Choices:       If no, SSL certificates will not be validated. This should only be used on personally controlled sites using self-signed certificates. If the transport
      boolean              • no           argument is not nxapi, this value is ignored.
                           • yes ←
   purge                   Choices:       Purge VLANs not defined in the aggregate parameter. This parameter can be used without aggregate as well.
   boolean                 • no ←         Removal of Vlan 1 is not allowed and will be ignored by purge.
                           • yes
   state                   Choices:
   string                  • present ←    Manage the state of the resource.
                           • absent
   vlan_id                                Single VLAN ID.
   integer
   vlan_range                             Range of VLANs such as 2-10 or 2,5,10-15, etc.
   string
   vlan_state              Choices:
   string                  • active ←     Manage the vlan operational state of the VLAN
                           • suspend

NOTES                   *nxos_vlan-notes*

   Note

     • For information on using CLI and NX-API see the NXOS Platform Options guide
     • For more information on using Ansible to manage network devices see the Ansible Network Guide
     • For more information on using Ansible to manage Cisco devices see the Cisco integration page.

EXAMPLES                   *nxos_vlan-examples*

 - name: Ensure a range of VLANs are not present on the switch
   nxos_vlan:
     vlan_range: "2-10,20,50,55-60,100-150"
     state: absent

 - name: Ensure VLAN 50 exists with the name WEB and is in the shutdown state
   nxos_vlan:
     vlan_id: 50
     admin_state: down
     name: WEB

 - name: Ensure VLAN is NOT on the device
   nxos_vlan:
     vlan_id: 50
     state: absent

 - name: Add interfaces to VLAN and check intent (config + intent)
   nxos_vlan:
     vlan_id: 100
     interfaces:
       - Ethernet2/1
       - Ethernet2/5
     associated_interfaces:
       - Ethernet2/1
       - Ethernet2/5

 - name: Check interfaces assigned to VLAN
   nxos_vlan:
     vlan_id: 100
     associated_interfaces:
       - Ethernet2/1
       - Ethernet2/5

 - name: Create aggregate of vlans
   nxos_vlan:
     aggregate:
       - { vlan_id: 4000, mode: ce }
       - { vlan_id: 4001, name: vlan-4001 }

 - name: purge vlans - removes all other vlans except the ones mentioned in aggregate)
   nxos_vlan:
     aggregate:
       - vlan_id: 1
       - vlan_id: 4001
     purge: yes

RETURN VALUES                   *nxos_vlan-return values*

   Common return values are documented here, the following are the fields unique to this module:

     Key    Returned                                                                                   Description
   commands          Set of command strings to send to the remote device
   list     always   Sample:
                     ['vlan 20', 'vlan 55', 'vn-segment 5000']

STATUS                   *nxos_vlan-status*

     • This module will be removed in version 2.13. [deprecated]
     • For more information see DEPRECATED.

     • Jason Edelman (@jedelman8)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *nxos_vlan-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/nxos_vlan_module.html
