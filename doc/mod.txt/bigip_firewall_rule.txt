SYNOPSIS                   *bigip_firewall_rule*

     • Manages firewall rules in an AFM firewall policy. New rules will always be added to the end of the policy. Rules can be re-ordered using the bigip_security_policy module. Rules can also be
       pre-ordered using the bigip_security_policy module and then later updated using the bigip_firewall_rule module.

PARAMETERS                   *bigip_firewall_rule-parameters*

      Parameter       Choices/Defaults                                                                             Comments
                                          Specifies the action for the firewall rule.
                                          When accept, allows packets with the specified source, destination, and protocol to pass through the firewall. Packets that match the rule, and are
                                          accepted, traverse the system as if the firewall is not present.
                      Choices:            When drop, drops packets with the specified source, destination, and protocol. Dropping a packet is a silent action with no notification to the source or
   action             • accept            destination systems. Dropping the packet causes the connection to be retried until the retry threshold is reached.
   string             • drop              When reject, rejects packets with the specified source, destination, and protocol. When a packet is rejected the firewall sends a destination unreachable
                      • reject            message to the sender.
                      • accept-decisively When accept-decisively, allows packets with the specified source, destination, and protocol to pass through the firewall, and does not require any further
                                          processing by any of the further firewalls. Packets that match the rule, and are accepted, traverse the system as if the firewall is not present. If the
                                          Rule List is applied to a virtual server, management IP, or self IP firewall rule, then Accept Decisively is equivalent to Accept.
                                          When creating a new rule, if this parameter is not provided, the default is reject.
   description                            The rule description.
   string
                                          Specifies packet destinations to which the rule applies.
   destination                            Leaving this field blank applies the rule to all addresses and all ports.
   list                                   You can specify the following destination items. An IPv4 or IPv6 address, an IPv4 or IPv6 address range, geographic location, VLAN, address list, port,
                                          port range, port list or address list.
                                          You can specify a mix of different types of items for the source address.
     address                              Specifies a specific IP address.
     string
     address_list                         Specifies an existing address list.
     string
     address_range                        Specifies an address range.
     string
     country                              Specifies a country code.
     string
     port                                 Specifies a single numeric port.
     integer                              This option is only valid when protocol is tcp(6) or udp(17).
     port_list                            Specifes an existing port list.
     string                               This option is only valid when protocol is tcp(6) or udp(17).
     port_range                           Specifies a range of ports, which is two port values separated by a hyphen. The port to the left of the hyphen should be less than the port to the right.
     string                               This option is only valid when protocol is tcp(6) or udp(17).
   icmp_message                           Specifies the Internet Control Message Protocol (ICMP) or ICMPv6 message type and code that the rule uses.
   list                                   This parameter is only relevant when protocol is either icmp(1) or icmpv6(58).
                                          Specifies the code returned in response to the specified ICMP message type.
                                          You can specify codes, each set appropriate to the associated type, such as No Code (0) (associated with Echo Reply (0)) and Host Unreachable (1)
     code                                 (associated with Destination Unreachable (3)), or you can specify any to indicate that the system applies the rule for all codes in response to that
     string                               specific ICMP message.
                                          You can also specify an arbitrary code.
                                          The ICMP protocol contains definitions for the existing message code and number pairs.
                                          Specifies the type of ICMP message.
     type                                 You can specify control messages, such as Echo Reply (0) and Destination Unreachable (3), or you can specify any to indicate that the system applies the
     string                               rule for all ICMP messages.
                                          You can also specify an arbitrary ICMP message.
                                          The ICMP protocol contains definitions for the existing message type and number pairs.
   irule                                  Specifies an iRule that is applied to the firewall rule.
   string                                 An iRule can be started when the firewall rule matches traffic.
   logging            Choices:            Specifies whether logging is enabled or disabled for the firewall rule.
   boolean            • no                When creating a new rule, if this parameter is not specified, the default if no.
                      • yes
   name
   string /                               Specifies the name of the rule.
   required
   parent_policy                          The policy which contains the rule to be managed.
   string                                 One of either parent_policy or parent_rule_list is required.
   parent_rule_list                       The rule list which contains the rule to be managed.
   string                                 One of either parent_policy or parent_rule_list is required.
   partition        Default:              Device partition to manage resources on.
   string           "Common"
   protocol                               Specifies the protocol to which the rule applies.
   string                                 Protocols may be specified by either their name or numeric value.
                                          A special protocol value any can be specified to match any protocol. The numeric equivalent of this protocol is 255.
   provider
   dictionary                             A dict object containing connection details.
   added in 2.5
     auth_provider                        Configures the auth provider for to obtain authentication tokens from the remote device.
     string                               This option is really used when working with BIG-IQ devices.
     password                             The password for the user account used to connect to the BIG-IP.
     string /                             You may omit this option by setting the environment variable F5_PASSWORD.
     required                             aliases: pass, pwd
     server                               The BIG-IP host.
     string /                             You may omit this option by setting the environment variable F5_SERVER.
     required
     server_port    Default:              The BIG-IP server port.
     integer        443                   You may omit this option by setting the environment variable F5_SERVER_PORT.
     ssh_keyfile                          Specifies the SSH keyfile to use to authenticate the connection to the remote device. This argument is only used for cli transports.
     path                                 You may omit this option by setting the environment variable ANSIBLE_NET_SSH_KEYFILE.
     timeout                              Specifies the timeout in seconds for communicating with the network device for either connecting or sending commands. If the timeout is exceeded before the
     integer                              operation is completed, the module will error.
     transport        Choices:
     string           • cli               Configures the transport connection to use when connecting to the remote device.
                      • rest ←
     user                                 The username to connect to the BIG-IP with. This user must have administrative privileges on the device.
     string /                             You may omit this option by setting the environment variable F5_USER.
     required
     validate_certs   Choices:            If no, SSL certificates are not validated. Use this only on personally controlled sites using self-signed certificates.
     boolean          • no                You may omit this option by setting the environment variable F5_VALIDATE_CERTS.
                      • yes ←
                                          Specifies an existing rule list to use in the rule.
   rule_list                              This parameter is mutually exclusive with many of the other individual-rule specific settings. This includes logging, action, source, destination, irule',
   string                                 protocol and logging.
                                          This parameter is only used when parent_policy is specified, otherwise it is ignored.
   schedule                               Specifies a schedule for the firewall rule.
   string                                 You configure schedules to define days and times when the firewall rule is made active.
                                          Specifies packet sources to which the rule applies.
   source                                 Leaving this field blank applies the rule to all addresses and all ports.
   list                                   You can specify the following source items. An IPv4 or IPv6 address, an IPv4 or IPv6 address range, geographic location, VLAN, address list, port, port
                                          range, port list or address list.
                                          You can specify a mix of different types of items for the source address.
     address                              Specifies a specific IP address.
     string
     address_list                         Specifies an existing address list.
     string
     address_range                        Specifies an address range.
     string
     country                              Specifies a country code.
     string
     port                                 Specifies a single numeric port.
     integer                              This option is only valid when protocol is tcp(6) or udp(17).
     port_list                            Specifes an existing port list.
     string                               This option is only valid when protocol is tcp(6) or udp(17).
     port_range                           Specifies a range of ports, which is two port values separated by a hyphen. The port to the left of the hyphen should be less than the port to the right.
     string                               This option is only valid when protocol is tcp(6) or udp(17).
     vlan                                 Specifies VLANs to which the rule applies.
     string                               The VLAN source refers to the packet's source.
   state              Choices:            When state is present, ensures that the rule exists.
   string             • present ←         When state is absent, ensures that the rule is removed.
                      • absent
                      Choices:            Indicates the activity state of the rule or rule list.
   status             • enabled           When disabled, specifies that the rule or rule list does not apply at all.
   string             • disabled          When enabled, specifies that the system applies the firewall rule or rule list to the given context and addresses.
                      • scheduled         When scheduled, specifies that the system applies the rule or rule list according to the specified schedule.
                                          When creating a new rule, if this parameter is not provided, the default is enabled.

NOTES                   *bigip_firewall_rule-notes*

   Note

     • For more information on using Ansible to manage F5 Networks devices see https://www.ansible.com/integrations/networks/f5.
     • Requires BIG-IP software version >= 12.
     • The F5 modules only manipulate the running configuration of the F5 product. To ensure that BIG-IP specific configuration persists to disk, be sure to include at least one task that uses the
       bigip_config module to save the running configuration. Refer to the module’s documentation for the correct usage of the module to save your running configuration.

EXAMPLES                   *bigip_firewall_rule-examples*

 - name: Create a new rule in the foo firewall policy
   bigip_firewall_rule:
     name: foo
     parent_policy: policy1
     protocol: tcp
     source:
       - address: 1.2.3.4
       - address: "::1"
       - address_list: foo-list1
       - address_range: 1.1.1.1-2.2.2.2
       - vlan: vlan1
       - country: US
       - port: 22
       - port_list: port-list1
       - port_range: 80-443
     destination:
       - address: 1.2.3.4
       - address: "::1"
       - address_list: foo-list1
       - address_range: 1.1.1.1-2.2.2.2
       - country: US
       - port: 22
       - port_list: port-list1
       - port_range: 80-443
     irule: irule1
     action: accept
     logging: yes
     provider:
       password: secret
       server: lb.mydomain.com
       user: admin
   delegate_to: localhost

 - name: Create an ICMP specific rule
   bigip_firewall_rule:
     name: foo
     protocol: icmp
     icmp_message:
       type: 0
     source:
       - country: US
     action: drop
     logging: yes
     provider:
       password: secret
       server: lb.mydomain.com
       user: admin
   delegate_to: localhost

 - name: Add a new policy rule that uses an existing rule list
   bigip_firewall_rule:
     name: foo
     parent_policy: foo_policy
     rule_list: rule-list1
     provider:
       password: secret
       server: lb.mydomain.com
       user: admin
   delegate_to: localhost

RETURN VALUES                   *bigip_firewall_rule-return values*

   Common return values are documented here, the following are the fields unique to this module:

         Key        Returned                                                                               Description
   action                    The action for the firewall rule.
   string           changed  Sample:
                             drop
   description               The rule description.
   string           changed  Sample:
                             MyRule
   destination               The packet destinations to which the rule applies.
   complex          changed  Sample:
                             hash/dictionary of values
      address                A specific IP address.
      string        changed  Sample:
                             192.168.1.1
      address_list           An existing address list.
      string        changed  Sample:
                             foo-list1
      address_range          The address range.
      string        changed  Sample:
                             1.1.1.1-2.2.2.2
      country                A country code.
      string        changed  Sample:
                             US
      port                   Single numeric port.
      integer       changed  Sample:
                             8080
      port_list              An existing port list.
      string        changed  Sample:
                             port-list1
      port_range             The port range.
      string        changed  Sample:
                             80-443
   icmp_message              The (ICMP) or ICMPv6 message type and code that the rule uses.
   complex          changed  Sample:
                             hash/dictionary of values
      code                   The code returned in response to the specified ICMP message type.
      string        changed  Sample:
                             1
      type          changed  The type of ICMP message.
      string
   irule                     The iRule that is applied to the firewall rule.
   string           changed  Sample:
                             _sys_auth_radius
   logging                   Enable or Disable logging for the firewall rule.
   boolean          changed  Sample:
                             True
   name                      Name of the rule.
   string           changed  Sample:
                             FooRule
   parent_policy             The policy which contains the rule to be managed.
   string           changed  Sample:
                             FooPolicy
   parent_rule_list          The rule list which contains the rule to be managed.
   string           changed  Sample:
                             FooRuleList
   protocol                  The protocol to which the rule applies.
   string           changed  Sample:
                             any
   rule_list                 An existing rule list to use in the parent policy.
   string           changed  Sample:
                             rule-list-1
   schedule                  The schedule for the firewall rule.
   string           changed  Sample:
                             Foo_schedule
   source                    The packet sources to which the rule applies
   complex          changed  Sample:
                             hash/dictionary of values
      address                A specific IP address.
      string        changed  Sample:
                             192.168.1.1
      address_list           An existing address list.
      string        changed  Sample:
                             foo-list1
      address_range          The address range.
      string        changed  Sample:
                             1.1.1.1-2.2.2.2
      country                A country code.
      string        changed  Sample:
                             US
      port                   Single numeric port.
      integer       changed  Sample:
                             8080
      port_list              An existing port list.
      string        changed  Sample:
                             port-list1
      port_range             The port range.
      string        changed  Sample:
                             80-443
      vlan                   Source VLANs for the packets.
      string        changed  Sample:
                             vlan1
   status                    The activity state of the rule or rule list.
   string           changed  Sample:
                             scheduled

STATUS                   *bigip_firewall_rule-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by an Ansible Partner. [certified]

     • Tim Rupp (@caphrim007)
     • Wojciech Wypior (@wojtek0806)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *bigip_firewall_rule-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/bigip_firewall_rule_module.html
