SYNOPSIS                   *purefa_user*

     • Create, modify or delete local users on a Pure Storage FlashArray.

REQUIREMENTS                   *purefa_user-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • purestorage

PARAMETERS                   *purefa_user-parameters*

       Parameter      Choices/Defaults                                                                             Comments
   api                 Choices:          Define whether to create an API token for this user
   boolean             • no ←            Token can be exposed using the debug module
                       • yes
   api_token                             FlashArray API token for admin privileged user.
   string / required
   fa_url                                FlashArray management IPv4 address or Hostname.
   string / required
   name                                  The name of the local user account
   string
   old_password                          If changing an existing password, you must provide the old password for security
   string
   password                              Password for the local user.
   string
                       Choices:
   role                • readonly        Sets the local user's access level to the array
   string              • storage_admin
                       • array_admin
   state               Choices:
   string              • absent          Create, delete or update local user account
                       • present ←

NOTES                   *purefa_user-notes*

   Note

     • This module requires the purestorage Python library
     • You must set PUREFA_URL and PUREFA_API environment variables if fa_url and api_token arguments are not passed to the module directly

EXAMPLES                   *purefa_user-examples*

 - name: Create new user ansible with API token
   purefa_user:
     name: ansible
     password: apassword
     role: storage_admin
     api: true
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592
   register: result

   debug:
     msg: "API Token: {{ result['user_info']['user_api'] }}"

 - name: Change role type for existing user
   purefa_user:
     name: ansible
     role: array_admin
     state: update
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

 - name: Change password type for existing user (NOT IDEMPOTENT)
   purefa_user:
     name: ansible
     password: anewpassword
     old_password: apassword
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592

 - name: Change API token for existing user
   purefa_user:
     name: ansible
     api: true
     state: update
     fa_url: 10.10.10.2
     api_token: e31060a7-21fc-e277-6240-25983c6c4592
   register: result

   debug:
     msg: "API Token: {{ result['user_info']['user_api'] }}"

STATUS                   *purefa_user-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Pure Storage Ansible Team (@sdodsley) <pure-ansible-team@purestorage.com>

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *purefa_user-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/purefa_user_module.html
