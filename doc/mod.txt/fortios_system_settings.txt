SYNOPSIS                   *fortios_system_settings*

     • This module is able to configure a FortiGate or FortiOS (FOS) device by allowing the user to set and modify system feature and settings category. Examples include all parameters and values
       need to be adjusted to datasources before usage. Tested with FOS v6.0.5

REQUIREMENTS                   *fortios_system_settings-requirements*

   The below requirements are needed on the host that executes this module.

     • fortiosapi>=0.9.8

PARAMETERS                   *fortios_system_settings-parameters*

              Parameter                Choices/Defaults                                                                     Comments
   host                                                     FortiOS or FortiGate IP address.
   string
   https                             Choices:
   boolean                           • no                   Indicates if the requests towards FortiGate must use HTTPS protocol.
                                     • yes ←
   password                        Default:                 FortiOS or FortiGate password.
   string                          ""
   ssl_verify                        Choices:
   boolean                           • no                   Ensures FortiGate certificate must be verified by a proper CA.
   added in 2.9                      • yes ←
   system_settings                 Default:                 Configure VDOM settings.
   dictionary                      null
    allow_linkdown_path              Choices:
    string                           • enable               Enable/disable link down path.
                                     • disable
    allow_subnet_overlap             Choices:
    string                           • enable               Enable/disable allowing interface subnets to use overlapping IP addresses.
                                     • disable
    asymroute                        Choices:
    string                           • enable               Enable/disable IPv4 asymmetric routing.
                                     • disable
    asymroute6                       Choices:
    string                           • enable               Enable/disable asymmetric IPv6 routing.
                                     • disable
    asymroute6_icmp                  Choices:
    string                           • enable               Enable/disable asymmetric ICMPv6 routing.
                                     • disable
    asymroute_icmp                   Choices:
    string                           • enable               Enable/disable ICMP asymmetric routing.
                                     • disable
    bfd                              Choices:
    string                           • enable               Enable/disable Bi-directional Forwarding Detection (BFD) on all interfaces.
                                     • disable
    bfd_desired_min_tx                                      BFD desired minimal transmit interval (1 - 100000 ms).
    integer
    bfd_detect_mult                                         BFD detection multiplier (1 - 50).
    integer
    bfd_dont_enforce_src_port        Choices:
    string                           • enable               Enable to not enforce verifying the source port of BFD Packets.
                                     • disable
    bfd_required_min_rx                                     BFD required minimal receive interval (1 - 100000 ms).
    integer
    block_land_attack                Choices:
    string                           • disable              Enable/disable blocking of land attacks.
                                     • enable
    central_nat                      Choices:
    string                           • enable               Enable/disable central NAT.
                                     • disable
    comments                                                VDOM comments.
    string
    compliance_check                 Choices:
    string                           • enable               Enable/disable PCI DSS compliance checking.
                                     • disable
    default_voip_alg_mode            Choices:
    string                           • proxy-based          Configure how the FortiGate handles VoIP traffic when a policy that accepts the traffic doesn't include a VoIP profile.
                                     • kernel-helper-based
    deny_tcp_with_icmp               Choices:
    string                           • enable               Enable/disable denying TCP by sending an ICMP communication prohibited packet.
                                     • disable
    device                                                  Interface to use for management access for NAT mode. Source system.interface.name.
    string
    dhcp6_server_ip                                         DHCPv6 server IPv6 address.
    string
    dhcp_proxy                       Choices:
    string                           • enable               Enable/disable the DHCP Proxy.
                                     • disable
    dhcp_server_ip                                          DHCP Server IPv4 address.
    string
    discovered_device_timeout                               Timeout for discovered devices (1 - 365 days).
    integer
    ecmp_max_paths                                          Maximum number of Equal Cost Multi-Path (ECMP) next-hops. Set to 1 to disable ECMP routing (1 - 100).
    integer
    email_portal_check_dns           Choices:
    string                           • disable              Enable/disable using DNS to validate email addresses collected by a captive portal.
                                     • enable
                                     Choices:
    firewall_session_dirty           • check-all            Select how to manage sessions affected by firewall policy configuration changes.
    string                           • check-new
                                     • check-policy-option
    fw_session_hairpin               Choices:
    string                           • enable               Enable/disable checking for a matching policy each time hairpin traffic goes through the FortiGate.
                                     • disable
    gateway                                                 Transparent mode IPv4 default gateway IP address.
    string
    gateway6                                                Transparent mode IPv4 default gateway IP address.
    string
    gui_advanced_policy              Choices:
    string                           • enable               Enable/disable advanced policy configuration on the GUI.
                                     • disable
    gui_allow_unnamed_policy         Choices:
    string                           • enable               Enable/disable the requirement for policy naming on the GUI.
                                     • disable
    gui_antivirus                    Choices:
    string                           • enable               Enable/disable AntiVirus on the GUI.
                                     • disable
    gui_ap_profile                   Choices:
    string                           • enable               Enable/disable FortiAP profiles on the GUI.
                                     • disable
    gui_application_control          Choices:
    string                           • enable               Enable/disable application control on the GUI.
                                     • disable
    gui_default_policy_columns                              Default columns to display for policy lists on GUI.
    list
               name                                         Select column name.
               string / required
    gui_dhcp_advanced                Choices:
    string                           • enable               Enable/disable advanced DHCP options on the GUI.
                                     • disable
    gui_dlp                          Choices:
    string                           • enable               Enable/disable DLP on the GUI.
                                     • disable
    gui_dns_database                 Choices:
    string                           • enable               Enable/disable DNS database settings on the GUI.
                                     • disable
    gui_dnsfilter                    Choices:
    string                           • enable               Enable/disable DNS Filtering on the GUI.
                                     • disable
    gui_domain_ip_reputation         Choices:
    string                           • enable               Enable/disable Domain and IP Reputation on the GUI.
                                     • disable
    gui_dos_policy                   Choices:
    string                           • enable               Enable/disable DoS policies on the GUI.
                                     • disable
    gui_dynamic_profile_display      Choices:
    string                           • enable               Enable/disable RADIUS Single Sign On (RSSO) on the GUI.
                                     • disable
    gui_dynamic_routing              Choices:
    string                           • enable               Enable/disable dynamic routing on the GUI.
                                     • disable
    gui_email_collection             Choices:
    string                           • enable               Enable/disable email collection on the GUI.
                                     • disable
    gui_endpoint_control             Choices:
    string                           • enable               Enable/disable endpoint control on the GUI.
                                     • disable
    gui_endpoint_control_advanced    Choices:
    string                           • enable               Enable/disable advanced endpoint control options on the GUI.
                                     • disable
    gui_explicit_proxy               Choices:
    string                           • enable               Enable/disable the explicit proxy on the GUI.
                                     • disable
    gui_fortiap_split_tunneling      Choices:
    string                           • enable               Enable/disable FortiAP split tunneling on the GUI.
                                     • disable
    gui_fortiextender_controller     Choices:
    string                           • enable               Enable/disable FortiExtender on the GUI.
                                     • disable
    gui_icap                         Choices:
    string                           • enable               Enable/disable ICAP on the GUI.
                                     • disable
    gui_implicit_policy              Choices:
    string                           • enable               Enable/disable implicit firewall policies on the GUI.
                                     • disable
    gui_ips                          Choices:
    string                           • enable               Enable/disable IPS on the GUI.
                                     • disable
    gui_load_balance                 Choices:
    string                           • enable               Enable/disable server load balancing on the GUI.
                                     • disable
    gui_local_in_policy              Choices:
    string                           • enable               Enable/disable Local-In policies on the GUI.
                                     • disable
    gui_local_reports                Choices:
    string                           • enable               Enable/disable local reports on the GUI.
                                     • disable
    gui_multicast_policy             Choices:
    string                           • enable               Enable/disable multicast firewall policies on the GUI.
                                     • disable
    gui_multiple_interface_policy    Choices:
    string                           • enable               Enable/disable adding multiple interfaces to a policy on the GUI.
                                     • disable
    gui_multiple_utm_profiles        Choices:
    string                           • enable               Enable/disable multiple UTM profiles on the GUI.
                                     • disable
    gui_nat46_64                     Choices:
    string                           • enable               Enable/disable NAT46 and NAT64 settings on the GUI.
                                     • disable
    gui_object_colors                Choices:
    string                           • enable               Enable/disable object colors on the GUI.
                                     • disable
    gui_policy_based_ipsec           Choices:
    string                           • enable               Enable/disable policy-based IPsec VPN on the GUI.
                                     • disable
    gui_policy_learning              Choices:
    string                           • enable               Enable/disable firewall policy learning mode on the GUI.
                                     • disable
    gui_replacement_message_groups   Choices:
    string                           • enable               Enable/disable replacement message groups on the GUI.
                                     • disable
    gui_spamfilter                   Choices:
    string                           • enable               Enable/disable Antispam on the GUI.
                                     • disable
    gui_sslvpn_personal_bookmarks    Choices:
    string                           • enable               Enable/disable SSL-VPN personal bookmark management on the GUI.
                                     • disable
    gui_sslvpn_realms                Choices:
    string                           • enable               Enable/disable SSL-VPN realms on the GUI.
                                     • disable
    gui_switch_controller            Choices:
    string                           • enable               Enable/disable the switch controller on the GUI.
                                     • disable
    gui_threat_weight                Choices:
    string                           • enable               Enable/disable threat weight on the GUI.
                                     • disable
    gui_traffic_shaping              Choices:
    string                           • enable               Enable/disable traffic shaping on the GUI.
                                     • disable
    gui_voip_profile                 Choices:
    string                           • enable               Enable/disable VoIP profiles on the GUI.
                                     • disable
    gui_vpn                          Choices:
    string                           • enable               Enable/disable VPN tunnels on the GUI.
                                     • disable
    gui_waf_profile                  Choices:
    string                           • enable               Enable/disable Web Application Firewall on the GUI.
                                     • disable
    gui_wan_load_balancing           Choices:
    string                           • enable               Enable/disable SD-WAN on the GUI.
                                     • disable
    gui_wanopt_cache                 Choices:
    string                           • enable               Enable/disable WAN Optimization and Web Caching on the GUI.
                                     • disable
    gui_webfilter                    Choices:
    string                           • enable               Enable/disable Web filtering on the GUI.
                                     • disable
    gui_webfilter_advanced           Choices:
    string                           • enable               Enable/disable advanced web filtering on the GUI.
                                     • disable
    gui_wireless_controller          Choices:
    string                           • enable               Enable/disable the wireless controller on the GUI.
                                     • disable
    http_external_dest               Choices:
    string                           • fortiweb             Offload HTTP traffic to FortiWeb or FortiCache.
                                     • forticache
    ike_dn_format                    Choices:
    string                           • with-space           Configure IKE ASN.1 Distinguished Name format conventions.
                                     • no-space
    ike_quick_crash_detect           Choices:
    string                           • enable               Enable/disable IKE quick crash detection (RFC 6290).
                                     • disable
    ike_session_resume               Choices:
    string                           • enable               Enable/disable IKEv2 session resumption (RFC 5723).
                                     • disable
    implicit_allow_dns               Choices:
    string                           • enable               Enable/disable implicitly allowing DNS traffic.
                                     • disable
    inspection_mode                  Choices:
    string                           • proxy                Inspection mode (proxy-based or flow-based).
                                     • flow
    ip                                                      IP address and netmask.
    string
    ip6                                                     IPv6 address prefix for NAT mode.
    string
    link_down_access                 Choices:
    string                           • enable               Enable/disable link down access traffic.
                                     • disable
                                     Choices:
    lldp_transmission                • enable               Enable/disable Link Layer Discovery Protocol (LLDP) for this VDOM or apply global settings to this VDOM.
    string                           • disable
                                     • global
    mac_ttl                                                 Duration of MAC addresses in Transparent mode (300 - 8640000 sec).
    integer
    manageip                                                Transparent mode IPv4 management IP address and netmask.
    string
    manageip6                                               Transparent mode IPv6 management IP address and netmask.
    string
    multicast_forward                Choices:
    string                           • enable               Enable/disable multicast forwarding.
                                     • disable
    multicast_skip_policy            Choices:
    string                           • enable               Enable/disable allowing multicast traffic through the FortiGate without a policy check.
                                     • disable
    multicast_ttl_notchange          Choices:
    string                           • enable               Enable/disable preventing the FortiGate from changing the TTL for forwarded multicast packets.
                                     • disable
    ngfw_mode                        Choices:
    string                           • profile-based        Next Generation Firewall (NGFW) mode.
                                     • policy-based
    opmode                           Choices:
    string                           • nat                  Firewall operation mode (NAT or Transparent).
                                     • transparent
    prp_trailer_action               Choices:
    string                           • enable               Enable/disable action to take on PRP trailer.
                                     • disable
    sccp_port                                               TCP port the SCCP proxy monitors for SCCP traffic (0 - 65535).
    integer
    ses_denied_traffic               Choices:
    string                           • enable               Enable/disable including denied session in the session table.
                                     • disable
    sip_helper                       Choices:               Enable/disable the SIP session helper to process SIP sessions unless SIP sessions are accepted by the SIP application layer gateway
    string                           • enable               (ALG).
                                     • disable
    sip_nat_trace                    Choices:
    string                           • enable               Enable/disable recording the original SIP source IP address when NAT is used.
                                     • disable
    sip_ssl_port                                            TCP port the SIP proxy monitors for SIP SSL/TLS traffic (0 - 65535).
    integer
    sip_tcp_port                                            TCP port the SIP proxy monitors for SIP traffic (0 - 65535).
    integer
    sip_udp_port                                            UDP port the SIP proxy monitors for SIP traffic (0 - 65535).
    integer
    snat_hairpin_traffic             Choices:
    string                           • enable               Enable/disable source NAT (SNAT) for hairpin traffic.
                                     • disable
    ssl_ssh_profile                                         Profile for SSL/SSH inspection. Source firewall.ssl-ssh-profile.name.
    string
    status                           Choices:
    string                           • enable               Enable/disable this VDOM.
                                     • disable
    strict_src_check                 Choices:
    string                           • enable               Enable/disable strict source verification.
                                     • disable
    tcp_session_without_syn          Choices:
    string                           • enable               Enable/disable allowing TCP session without SYN flags.
                                     • disable
    utf8_spam_tagging                Choices:
    string                           • enable               Enable/disable converting antispam tags to UTF-8 for better non-ASCII character support.
                                     • disable
                                     Choices:
    v4_ecmp_mode                     • source-ip-based
    string                           • weight-based         IPv4 Equal-cost multi-path (ECMP) routing and load balancing mode.
                                     • usage-based
                                     • source-dest-ip-based
                                     Choices:
    vpn_stats_log                    • ipsec
    string                           • pptp                 Enable/disable periodic VPN log statistics for one or more types of VPN. Separate names with a space.
                                     • l2tp
                                     • ssl
    vpn_stats_period                                        Period to send VPN log statistics (60 - 86400 sec).
    integer
    wccp_cache_engine                Choices:
    string                           • enable               Enable/disable WCCP cache engine.
                                     • disable
   username                                                 FortiOS or FortiGate username.
   string
   vdom                            Default:                 Virtual domain, among those defined previously. A vdom is a virtual instance of the FortiGate that can be configured and used as a
   string                          "root"                   different unit.

NOTES                   *fortios_system_settings-notes*

   Note

     • Requires fortiosapi library developed by Fortinet
     • Run as a local_action in your playbook

EXAMPLES                   *fortios_system_settings-examples*

 - hosts: localhost
   vars:
    host: "192.168.122.40"
    username: "admin"
    password: ""
    vdom: "root"
    ssl_verify: "False"
   tasks:
   - name: Configure VDOM settings.
     fortios_system_settings:
       host:  "{{ host }}"
       username: "{{ username }}"
       password: "{{ password }}"
       vdom:  "{{ vdom }}"
       https: "False"
       system_settings:
         allow_linkdown_path: "enable"
         allow_subnet_overlap: "enable"
         asymroute: "enable"
         asymroute_icmp: "enable"
         asymroute6: "enable"
         asymroute6_icmp: "enable"
         bfd: "enable"
         bfd_desired_min_tx: "10"
         bfd_detect_mult: "11"
         bfd_dont_enforce_src_port: "enable"
         bfd_required_min_rx: "13"
         block_land_attack: "disable"
         central_nat: "enable"
         comments: "<your_own_value>"
         compliance_check: "enable"
         default_voip_alg_mode: "proxy-based"
         deny_tcp_with_icmp: "enable"
         device: "<your_own_value> (source system.interface.name)"
         dhcp_proxy: "enable"
         dhcp_server_ip: "<your_own_value>"
         dhcp6_server_ip: "<your_own_value>"
         discovered_device_timeout: "24"
         ecmp_max_paths: "25"
         email_portal_check_dns: "disable"
         firewall_session_dirty: "check-all"
         fw_session_hairpin: "enable"
         gateway: "<your_own_value>"
         gateway6: "<your_own_value>"
         gui_advanced_policy: "enable"
         gui_allow_unnamed_policy: "enable"
         gui_antivirus: "enable"
         gui_ap_profile: "enable"
         gui_application_control: "enable"
         gui_default_policy_columns:
          -
             name: "default_name_37"
         gui_dhcp_advanced: "enable"
         gui_dlp: "enable"
         gui_dns_database: "enable"
         gui_dnsfilter: "enable"
         gui_domain_ip_reputation: "enable"
         gui_dos_policy: "enable"
         gui_dynamic_profile_display: "enable"
         gui_dynamic_routing: "enable"
         gui_email_collection: "enable"
         gui_endpoint_control: "enable"
         gui_endpoint_control_advanced: "enable"
         gui_explicit_proxy: "enable"
         gui_fortiap_split_tunneling: "enable"
         gui_fortiextender_controller: "enable"
         gui_icap: "enable"
         gui_implicit_policy: "enable"
         gui_ips: "enable"
         gui_load_balance: "enable"
         gui_local_in_policy: "enable"
         gui_local_reports: "enable"
         gui_multicast_policy: "enable"
         gui_multiple_interface_policy: "enable"
         gui_multiple_utm_profiles: "enable"
         gui_nat46_64: "enable"
         gui_object_colors: "enable"
         gui_policy_based_ipsec: "enable"
         gui_policy_learning: "enable"
         gui_replacement_message_groups: "enable"
         gui_spamfilter: "enable"
         gui_sslvpn_personal_bookmarks: "enable"
         gui_sslvpn_realms: "enable"
         gui_switch_controller: "enable"
         gui_threat_weight: "enable"
         gui_traffic_shaping: "enable"
         gui_voip_profile: "enable"
         gui_vpn: "enable"
         gui_waf_profile: "enable"
         gui_wan_load_balancing: "enable"
         gui_wanopt_cache: "enable"
         gui_webfilter: "enable"
         gui_webfilter_advanced: "enable"
         gui_wireless_controller: "enable"
         http_external_dest: "fortiweb"
         ike_dn_format: "with-space"
         ike_quick_crash_detect: "enable"
         ike_session_resume: "enable"
         implicit_allow_dns: "enable"
         inspection_mode: "proxy"
         ip: "<your_own_value>"
         ip6: "<your_own_value>"
         link_down_access: "enable"
         lldp_transmission: "enable"
         mac_ttl: "90"
         manageip: "<your_own_value>"
         manageip6: "<your_own_value>"
         multicast_forward: "enable"
         multicast_skip_policy: "enable"
         multicast_ttl_notchange: "enable"
         ngfw_mode: "profile-based"
         opmode: "nat"
         prp_trailer_action: "enable"
         sccp_port: "99"
         ses_denied_traffic: "enable"
         sip_helper: "enable"
         sip_nat_trace: "enable"
         sip_ssl_port: "103"
         sip_tcp_port: "104"
         sip_udp_port: "105"
         snat_hairpin_traffic: "enable"
         ssl_ssh_profile: "<your_own_value> (source firewall.ssl-ssh-profile.name)"
         status: "enable"
         strict_src_check: "enable"
         tcp_session_without_syn: "enable"
         utf8_spam_tagging: "enable"
         v4_ecmp_mode: "source-ip-based"
         vpn_stats_log: "ipsec"
         vpn_stats_period: "114"
         wccp_cache_engine: "enable"

RETURN VALUES                   *fortios_system_settings-return values*

   Common return values are documented here, the following are the fields unique to this module:

       Key     Returned                                                                                  Description
   build                Build number of the fortigate image
   string      always   Sample:
                        1547
   http_method          Last method used to provision the content into FortiGate
   string      always   Sample:
                        PUT
   http_status          Last result given by FortiGate on last operation applied
   string      always   Sample:
                        200
   mkey                 Master key (id) used in the last call to FortiGate
   string      success  Sample:
                        id
   name                 Name of the table used to fulfill the request
   string      always   Sample:
                        urlfilter
   path                 Path of the table used to fulfill the request
   string      always   Sample:
                        webfilter
   revision             Internal revision number
   string      always   Sample:
                        17.0.2.10658
   serial               Serial number of the unit
   string      always   Sample:
                        FGVMEVYYQT3AB5352
   status               Indication of the operation's result
   string      always   Sample:
                        success
   vdom                 Virtual domain used
   string      always   Sample:
                        root
   version              Version of the FortiGate
   string      always   Sample:
                        v5.6.3

STATUS                   *fortios_system_settings-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Miguel Angel Munoz (@mamunozgonzalez)
     • Nicolas Thomas (@thomnico)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *fortios_system_settings-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/fortios_system_settings_module.html
