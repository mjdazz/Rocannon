SYNOPSIS                   *zabbix_maintenance*

     • This module will let you create Zabbix maintenance windows.

REQUIREMENTS                   *zabbix_maintenance-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.6
     • zabbix-api >= 0.5.4

PARAMETERS                   *zabbix_maintenance-parameters*

         Parameter          Choices/Defaults                                                                          Comments
   collect_data             Choices:
   boolean                  • no               Type of maintenance. With data collection, or without.
                            • yes ←
   desc                   Default:             Short description of maintenance window.
   string                 "Created by Ansible"
   host_groups                                 Host groups to manage maintenance window for.
   list / elements=string                      Required option when state=present and host_names is not used.
                                               aliases: host_group
   host_names                                  Hosts to manage maintenance window for.
   list / elements=string                      Required option when state=present and host_groups is not used.
                                               aliases: host_name
   http_login_password                         Basic Auth password
   string
   http_login_user                             Basic Auth login
   string / required
   login_password                              Zabbix user password.
   string / required
   login_user                                  Zabbix user name.
   string / required
   minutes                Default:             Length of maintenance window in minutes.
   integer                10
   name                                        Unique name of maintenance window.
   string / required
   server_url                                  URL of Zabbix server, with protocol (http or https). url is an alias for server_url.
   string / required                           aliases: url
   state                    Choices:
   string                   • present ←        Create or remove a maintenance window. Maintenance window to remove is identified by name.
                            • absent
   timeout                Default:             The timeout of API request (seconds).
   integer                10
   validate_certs           Choices:
   boolean                  • no               If set to False, SSL certificates will not be validated. This should only be used on personally controlled sites using self-signed certificates.
   added in 2.5             • yes ←

NOTES                   *zabbix_maintenance-notes*

   Note

     • Useful for setting hosts in maintenance mode before big update, and removing maintenance window after update.
     • Module creates maintenance window from now() to now() + minutes, so if Zabbix server’s time and host’s time are not synchronized, you will get strange results.
     • Install required module with ‘pip install zabbix-api’ command.
     • If you use login_password=zabbix, the word “zabbix” is replaced by “""""” in all module output, because login_password uses no_log. See this FAQ for more information.

EXAMPLES                   *zabbix_maintenance-examples*

 - name: Create a named maintenance window for host www1 for 90 minutes
   zabbix_maintenance:
     name: Update of www1
     host_name: www1.example.com
     state: present
     minutes: 90
     server_url: https://monitoring.example.com
     login_user: ansible
     login_password: pAsSwOrD

 - name: Create a named maintenance window for host www1 and host groups Office and Dev
   zabbix_maintenance:
     name: Update of www1
     host_name: www1.example.com
     host_groups:
       - Office
       - Dev
     state: present
     server_url: https://monitoring.example.com
     login_user: ansible
     login_password: pAsSwOrD

 - name: Create a named maintenance window for hosts www1 and db1, without data collection.
   zabbix_maintenance:
     name: update
     host_names:
       - www1.example.com
       - db1.example.com
     state: present
     collect_data: False
     server_url: https://monitoring.example.com
     login_user: ansible
     login_password: pAsSwOrD

 - name: Remove maintenance window by name
   zabbix_maintenance:
     name: Test1
     state: absent
     server_url: https://monitoring.example.com
     login_user: ansible
     login_password: pAsSwOrD

STATUS                   *zabbix_maintenance-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Alexander Bulimov (@abulimov)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *zabbix_maintenance-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/zabbix_maintenance_module.html
