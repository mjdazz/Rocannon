SYNOPSIS                   *ovirt_external_provider*

     • Module to manage external providers in oVirt/RHV

REQUIREMENTS                   *ovirt_external_provider-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • ovirt-engine-sdk-python >= 4.3.0

PARAMETERS                   *ovirt_external_provider-parameters*

         Parameter        Choices/Defaults                                                                          Comments
   auth                                    Dictionary with values needed to create HTTP/HTTPS connection to oVirt:
   dictionary / required
                                           A PEM file containing the trusted CA certificates.
       ca_file                             The certificate presented by the server will be verified using these CA certificates.
       string                              If ca_file parameter is not set, system wide CA certificate store is used.
                                           Default value is set by OVIRT_CAFILE environment variable.
       headers                             Dictionary of HTTP headers to be added to each API call.
       dictionary
       hostname                            A string containing the hostname of the server, usually something like `server.example.com`.
       string                              Default value is set by OVIRT_HOSTNAME environment variable.
                                           Either url or hostname is required.
       insecure             Choices:
       boolean              • no           A boolean flag that indicates if the server TLS certificate and host name should be checked.
                            • yes
       kerberos             Choices:
       boolean              • no           A boolean flag indicating if Kerberos authentication should be used instead of the default basic authentication.
                            • yes
       password                            The password of the user.
       string / required                   Default value is set by OVIRT_PASSWORD environment variable.
       token                               Token to be used instead of login with username/password.
       string                              Default value is set by OVIRT_TOKEN environment variable.
       url                                 A string containing the API URL of the server, usually something like `https://server.example.com/ovirt-engine/api`.
       string                              Default value is set by OVIRT_URL environment variable.
                                           Either url or hostname is required.
       username                            The name of the user, something like [email protected].
       string / required                   Default value is set by OVIRT_USERNAME environment variable.
   authentication_keys    Default:         List of authentication keys. Each key is represented by dict like {'uuid': 'our-uuid', 'value': 'YourSecretValue=='}
   -                      []               When you will not pass these keys and there are already some of them defined in the system they will be removed.
   added in 2.6                            Applicable for os_volume.
   authentication_url                      Keystone authentication URL of the openstack provider.
   -                                       Applicable for those types: os_image, os_volume and network.
                                           aliases: auth_url
   data_center                             Name of the data center where provider should be attached.
   -                                       Applicable for those type: os_volume.
   description                             Description of the external provider.
   -
   fetch_nested             Choices:       If True the module will fetch additional data from the API.
   boolean                  • no           It will fetch IDs of the VMs disks, snapshots, etc. User can configure to fetch other attributes of the nested entities by specifying nested_attributes.
                            • yes
   name                                    Name of the external provider to manage.
   -
   nested_attributes                       Specifies list of the attributes which should be fetched from the API.
   list                                    This parameter apply only when fetch_nested is true.
                            Choices:
                            • external ←
   network_type             • neutron      Type of the external network provider either external (for example OVN) or neutron.
   -                                       Applicable if type is network.
                          Default:
                          ["external"]
   password                                Password of the user specified in username parameter.
   -                                       Applicable for all types.
   poll_interval          Default:         Number of the seconds the module waits until another poll request on entity status is sent.
   integer                3
   read_only                Choices:       Specify if the network should be read only.
   boolean                  • no           Applicable if type is network.
                            • yes
   state                    Choices:       Should the external be present or absent
   -                        • present ←    When you are using absent for os_volume, you need to make sure that SD is not attached to the data center!
                            • absent
   tenant_name                             Name of the tenant.
   -                                       Applicable for those types: os_image, os_volume and network.
                                           aliases: tenant
   timeout                Default:         The amount of time in seconds the module should wait for the instance to get into desired state.
   integer                180
                            Choices:
   type                     • os_image
   -                        • network      Type of the external provider.
                            • os_volume
                            • foreman
   url                                     URL where external provider is hosted.
   -                                       Applicable for those types: os_image, os_volume, network and foreman.
   username                                Username to be used for login to external provider.
   -                                       Applicable for all types.
   wait                     Choices:
   boolean                  • no           yes if the module should wait for the entity to get into desired state.
                            • yes ←

NOTES                   *ovirt_external_provider-notes*

   Note

     • In order to use this module you have to install oVirt Python SDK. To ensure it’s installed with correct version you can create the following task: pip: name=ovirt-engine-sdk-python
       version=4.3.0

EXAMPLES                   *ovirt_external_provider-examples*

 # Examples don't contain auth parameter for simplicity,
 # look at ovirt_auth module to see how to reuse authentication:

 # Add image external provider:
 - ovirt_external_provider:
     name: image_provider
     type: os_image
     url: http://1.2.3.4:9292
     username: admin
     password: 123456
     tenant: admin
     auth_url: http://1.2.3.4:35357/v2.0

 # Add volume external provider:
 - ovirt_external_provider:
     name: image_provider
     type: os_volume
     url: http://1.2.3.4:9292
     username: admin
     password: 123456
     tenant: admin
     auth_url: http://1.2.3.4:5000/v2.0
     authentication_keys:
       -
         uuid: "1234567-a1234-12a3-a234-123abc45678"
         value: "ABCD00000000111111222333445w=="

 # Add foreman provider:
 - ovirt_external_provider:
     name: foreman_provider
     type: foreman
     url: https://foreman.example.com
     username: admin
     password: 123456

 # Add external network provider for OVN:
 - ovirt_external_provider:
     name: ovn_provider
     type: network
     network_type: external
     url: http://1.2.3.4:9696

 # Remove image external provider:
 - ovirt_external_provider:
     state: absent
     name: image_provider
     type: os_image

RETURN VALUES                   *ovirt_external_provider-return values*

   Common return values are documented here, the following are the fields unique to this module:

              Key              Returned                                                                          Description
                              On success
                              and if
   external_host_provider     parameter  Dictionary of all the external_host_provider attributes. External provider attributes can be found on your oVirt/RHV instance at following url:
   dictionary                 'type:     http://ovirt.github.io/ovirt-engine-api-model/master/#types/external_host_provider.
                              foreman'
                              is used.
                              On success
   id                         if         ID of the external provider which is managed
   string                     external   Sample:
                              provider   7de90f31-222c-436c-a1ca-7e655bd5b60c
                              is found.
                              On success
                              and if
   openstack_image_provider   parameter  Dictionary of all the openstack_image_provider attributes. External provider attributes can be found on your oVirt/RHV instance at following url:
   dictionary                 'type:     http://ovirt.github.io/ovirt-engine-api-model/master/#types/openstack_image_provider.
                              os_image'
                              is used.
                              On success
                              and if
   openstack_network_provider parameter  Dictionary of all the openstack_network_provider attributes. External provider attributes can be found on your oVirt/RHV instance at following url:
   dictionary                 'type:     http://ovirt.github.io/ovirt-engine-api-model/master/#types/openstack_network_provider.
                              network'
                              is used.
                              On success
                              and if
   openstack_volume_provider  parameter  Dictionary of all the openstack_volume_provider attributes. External provider attributes can be found on your oVirt/RHV instance at following url:
   dictionary                 'type:     http://ovirt.github.io/ovirt-engine-api-model/master/#types/openstack_volume_provider.
                              os_volume'
                              is used.

STATUS                   *ovirt_external_provider-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Ondra Machacek (@machacekondra)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *ovirt_external_provider-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/ovirt_external_provider_module.html
