SYNOPSIS                   *sensu_client*

     • Manages Sensu client configuration.
     • For more information, refer to the Sensu documentation: https://sensuapp.org/docs/latest/reference/clients.html

PARAMETERS                   *sensu_client-parameters*

     Parameter               Choices/Defaults                                                                              Comments
                  Default:
   address        "Non-loopback IPv4 address as
   -              determined by Ruby                     An address to help identify and reach the client. This is only informational, usually an IP address or hostname.
                  Socket.ip_address_list (provided by
                  Sensu)"
   chef                                                  The chef definition scope, used to configure the Sensu Enterprise Chef integration (Sensu Enterprise users only).
   -
   deregister       Choices:
   boolean          • no ←                               If a deregistration event should be created upon Sensu client process stop.
                    • yes
   deregistration                                        The deregistration definition scope, used to configure automated Sensu client de-registration.
   -
   ec2                                                   The ec2 definition scope, used to configure the Sensu Enterprise AWS EC2 integration (Sensu Enterprise users only).
   -
   keepalive                                             The keepalive definition scope, used to configure Sensu client keepalives behavior (e.g. keepalive thresholds, etc).
   -
   keepalives       Choices:
   boolean          • no                                 If Sensu should monitor keepalives for this client.
                    • yes ←
                  Default:
   name           "System hostname as determined by Ruby A unique name for the client. The name cannot contain special characters or spaces.
   -              Socket.gethostname (provided by
                  Sensu)"
   puppet                                                The puppet definition scope, used to configure the Sensu Enterprise Puppet integration (Sensu Enterprise users only).
   -
   redact                                                Client definition attributes to redact (values) when logging and sending client keepalives.
   -
   registration                                          The registration definition scope, used to configure Sensu registration event handlers.
   -
   safe_mode        Choices:
   boolean          • no ←                               If safe mode is enabled for the client. Safe mode requires local check definitions in order to accept a check request and execute the check.
                    • yes
   servicenow                                            The servicenow definition scope, used to configure the Sensu Enterprise ServiceNow integration (Sensu Enterprise users only).
   -
   socket                                                The socket definition scope, used to configure the Sensu client socket.
   -
   state            Choices:
   -                • present ←                          Whether the client should be present or not
                    • absent
   subscriptions                                         An array of client subscriptions, a list of roles and/or responsibilities assigned to the system (e.g. webserver).
   - / required                                          These subscriptions determine which monitoring checks are executed by the client, as check requests are sent to subscriptions.
                                                         The subscriptions array items must be strings.

NOTES                   *sensu_client-notes*

   Note

     • Check mode is supported

EXAMPLES                   *sensu_client-examples*

 # Minimum possible configuration
 - name: Configure Sensu client
   sensu_client:
     subscriptions:
       - default

 # With customization
 - name: Configure Sensu client
   sensu_client:
     name: "{{ ansible_fqdn }}"
     address: "{{ ansible_default_ipv4['address'] }}"
     subscriptions:
       - default
       - webserver
     redact:
       - password
     socket:
       bind: 127.0.0.1
       port: 3030
     keepalive:
       thresholds:
         warning: 180
         critical: 300
       handlers:
         - email
       custom:
         - broadcast: irc
       occurrences: 3
   register: client
   notify:
     - Restart sensu-client

 - name: Secure Sensu client configuration file
   file:
     path: "{{ client['file'] }}"
     owner: "sensu"
     group: "sensu"
     mode: "0600"

 - name: Delete the Sensu client configuration
   sensu_client:
     state: "absent"

RETURN VALUES                   *sensu_client-return values*

   Common return values are documented here, the following are the fields unique to this module:

      Key     Returned                                                                                  Description
   config              Effective client configuration, when state is present
   dictionary success  Sample:
                       {'name': 'client', 'subscriptions': ['default']}
   file                Path to the client configuration file
   string     success  Sample:
                       /etc/sensu/conf.d/client.json

STATUS                   *sensu_client-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • David Moreau Simard (@dmsimard)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *sensu_client-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/sensu_client_module.html
