SYNOPSIS                   *fortios_voip_profile*

     • This module is able to configure a FortiGate or FortiOS (FOS) device by allowing the user to set and modify voip feature and profile category. Examples include all parameters and values need
       to be adjusted to datasources before usage. Tested with FOS v6.0.5

REQUIREMENTS                   *fortios_voip_profile-requirements*

   The below requirements are needed on the host that executes this module.

     • fortiosapi>=0.9.8

PARAMETERS                   *fortios_voip_profile-parameters*

                 Parameter                Choices/Defaults                                                                  Comments
   host                                                    FortiOS or FortiGate IP address.
   string
   https                                    Choices:
   boolean                                  • no           Indicates if the requests towards FortiGate must use HTTPS protocol.
                                            • yes ←
   password                               Default:         FortiOS or FortiGate password.
   string                                 ""
   ssl_verify                               Choices:
   boolean                                  • no           Ensures FortiGate certificate must be verified by a proper CA.
   added in 2.9                             • yes ←
   state                                    Choices:       Indicates whether to create or remove the object. This attribute was present already in previous version in a deeper level. It has been
   string                                   • present      moved out to this outer level.
   added in 2.9                             • absent
   username                                                FortiOS or FortiGate username.
   string
   vdom                                   Default:         Virtual domain, among those defined previously. A vdom is a virtual instance of the FortiGate that can be configured and used as a
   string                                 "root"           different unit.
   voip_profile                           Default:         Configure VoIP profiles.
   dictionary                             null
    comment                                                Comment.
    string
    name                                                   Profile name.
    string / required
    sccp                                                   SCCP.
    dictionary
     block_mcast                            Choices:
     string                                 • disable      Enable/disable block multicast RTP connections.
                                            • enable
     log_call_summary                       Choices:
     string                                 • disable      Enable/disable log summary of SCCP calls.
                                            • enable
     log_violations                         Choices:
     string                                 • disable      Enable/disable logging of SCCP violations.
                                            • enable
     max_calls                                             Maximum calls per minute per SCCP client (max 65535).
     integer
     status                                 Choices:
     string                                 • disable      Enable/disable SCCP.
                                            • enable
     verify_header                          Choices:
     string                                 • disable      Enable/disable verify SCCP header content.
                                            • enable
    sip                                                    SIP.
    dictionary
     ack_rate                                              ACK request rate limit (per second, per policy).
     integer
     block_ack                              Choices:
     string                                 • disable      Enable/disable block ACK requests.
                                            • enable
     block_bye                              Choices:
     string                                 • disable      Enable/disable block BYE requests.
                                            • enable
     block_cancel                           Choices:
     string                                 • disable      Enable/disable block CANCEL requests.
                                            • enable
     block_geo_red_options                  Choices:
     string                                 • disable      Enable/disable block OPTIONS requests, but OPTIONS requests still notify for redundancy.
                                            • enable
     block_info                             Choices:
     string                                 • disable      Enable/disable block INFO requests.
                                            • enable
     block_invite                           Choices:
     string                                 • disable      Enable/disable block INVITE requests.
                                            • enable
     block_long_lines                       Choices:
     string                                 • disable      Enable/disable block requests with headers exceeding max-line-length.
                                            • enable
     block_message                          Choices:
     string                                 • disable      Enable/disable block MESSAGE requests.
                                            • enable
     block_notify                           Choices:
     string                                 • disable      Enable/disable block NOTIFY requests.
                                            • enable
     block_options                          Choices:
     string                                 • disable      Enable/disable block OPTIONS requests and no OPTIONS as notifying message for redundancy either.
                                            • enable
     block_prack                            Choices:
     string                                 • disable      Enable/disable block prack requests.
                                            • enable
     block_publish                          Choices:
     string                                 • disable      Enable/disable block PUBLISH requests.
                                            • enable
     block_refer                            Choices:
     string                                 • disable      Enable/disable block REFER requests.
                                            • enable
     block_register                         Choices:
     string                                 • disable      Enable/disable block REGISTER requests.
                                            • enable
     block_subscribe                        Choices:
     string                                 • disable      Enable/disable block SUBSCRIBE requests.
                                            • enable
     block_unknown                          Choices:
     string                                 • disable      Block unrecognized SIP requests (enabled by default).
                                            • enable
     block_update                           Choices:
     string                                 • disable      Enable/disable block UPDATE requests.
                                            • enable
     bye_rate                                              BYE request rate limit (per second, per policy).
     integer
     call_keepalive                                        Continue tracking calls with no RTP for this many minutes.
     integer
     cancel_rate                                           CANCEL request rate limit (per second, per policy).
     integer
     contact_fixup                          Choices:
     string                                 • disable      Fixup contact anyway even if contact's IP:port doesn't match session's IP:port.
                                            • enable
     hnt_restrict_source_ip                 Choices:
     string                                 • disable      Enable/disable restrict RTP source IP to be the same as SIP source IP when HNT is enabled.
                                            • enable
     hosted_nat_traversal                   Choices:
     string                                 • disable      Hosted NAT Traversal (HNT).
                                            • enable
     info_rate                                             INFO request rate limit (per second, per policy).
     integer
     invite_rate                                           INVITE request rate limit (per second, per policy).
     integer
     ips_rtp                                Choices:
     string                                 • disable      Enable/disable allow IPS on RTP.
                                            • enable
     log_call_summary                       Choices:
     string                                 • disable      Enable/disable logging of SIP call summary.
                                            • enable
     log_violations                         Choices:
     string                                 • disable      Enable/disable logging of SIP violations.
                                            • enable
                                            Choices:
     malformed_header_allow                 • discard      Action for malformed Allow header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_call_id               • discard      Action for malformed Call-ID header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_contact               • discard      Action for malformed Contact header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_content_length        • discard      Action for malformed Content-Length header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_content_type          • discard      Action for malformed Content-Type header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_cseq                  • discard      Action for malformed CSeq header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_expires               • discard      Action for malformed Expires header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_from                  • discard      Action for malformed From header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_max_forwards          • discard      Action for malformed Max-Forwards header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_p_asserted_identity   • discard      Action for malformed P-Asserted-Identity header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_rack                  • discard      Action for malformed RAck header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_record_route          • discard      Action for malformed Record-Route header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_route                 • discard      Action for malformed Route header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_rseq                  • discard      Action for malformed RSeq header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_a                 • discard      Action for malformed SDP a line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_b                 • discard      Action for malformed SDP b line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_c                 • discard      Action for malformed SDP c line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_i                 • discard      Action for malformed SDP i line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_k                 • discard      Action for malformed SDP k line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_m                 • discard      Action for malformed SDP m line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_o                 • discard      Action for malformed SDP o line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_r                 • discard      Action for malformed SDP r line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_s                 • discard      Action for malformed SDP s line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_t                 • discard      Action for malformed SDP t line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_v                 • discard      Action for malformed SDP v line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_sdp_z                 • discard      Action for malformed SDP z line.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_to                    • discard      Action for malformed To header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_header_via                   • discard      Action for malformed VIA header.
     string                                 • pass
                                            • respond
                                            Choices:
     malformed_request_line                 • discard      Action for malformed request line.
     string                                 • pass
                                            • respond
     max_body_length                                       Maximum SIP message body length (0 meaning no limit).
     integer
     max_dialogs                                           Maximum number of concurrent calls/dialogs (per policy).
     integer
     max_idle_dialogs                                      Maximum number established but idle dialogs to retain (per policy).
     integer
     max_line_length                                       Maximum SIP header line length (78-4096).
     integer
     message_rate                                          MESSAGE request rate limit (per second, per policy).
     integer
     nat_trace                              Choices:
     string                                 • disable      Enable/disable preservation of original IP in SDP i line.
                                            • enable
     no_sdp_fixup                           Choices:
     string                                 • disable      Enable/disable no SDP fix-up.
                                            • enable
     notify_rate                                           NOTIFY request rate limit (per second, per policy).
     integer
     open_contact_pinhole                   Choices:
     string                                 • disable      Enable/disable open pinhole for non-REGISTER Contact port.
                                            • enable
     open_record_route_pinhole              Choices:
     string                                 • disable      Enable/disable open pinhole for Record-Route port.
                                            • enable
     open_register_pinhole                  Choices:
     string                                 • disable      Enable/disable open pinhole for REGISTER Contact port.
                                            • enable
     open_via_pinhole                       Choices:
     string                                 • disable      Enable/disable open pinhole for Via port.
                                            • enable
     options_rate                                          OPTIONS request rate limit (per second, per policy).
     integer
     prack_rate                                            PRACK request rate limit (per second, per policy).
     integer
     preserve_override                      Choices:
     string                                 • disable      Override i line to preserve original IPS .
                                            • enable
     provisional_invite_expiry_time                        Expiry time for provisional INVITE (10 - 3600 sec).
     integer
     publish_rate                                          PUBLISH request rate limit (per second, per policy).
     integer
     refer_rate                                            REFER request rate limit (per second, per policy).
     integer
     register_contact_trace                 Choices:
     string                                 • disable      Enable/disable trace original IP/port within the contact header of REGISTER requests.
                                            • enable
     register_rate                                         REGISTER request rate limit (per second, per policy).
     integer
     rfc2543_branch                         Choices:
     string                                 • disable      Enable/disable support via branch compliant with RFC 2543.
                                            • enable
     rtp                                    Choices:
     string                                 • disable      Enable/disable create pinholes for RTP traffic to traverse firewall.
                                            • enable
                                            Choices:
     ssl_algorithm                          • high         Relative strength of encryption algorithms accepted in negotiation.
     string                                 • medium
                                            • low
     ssl_auth_client                                       Require a client certificate and authenticate it with the peer/peergrp. Source user.peer.name user.peergrp.name.
     string
     ssl_auth_server                                       Authenticate the server's certificate with the peer/peergrp. Source user.peer.name user.peergrp.name.
     string
     ssl_client_certificate                                Name of Certificate to offer to server if requested. Source vpn.certificate.local.name.
     string
                                            Choices:
     ssl_client_renegotiation               • allow        Allow/block client renegotiation by server.
     string                                 • deny
                                            • secure
                                            Choices:
     ssl_max_version                        • ssl-3.0
     string                                 • tls-1.0      Highest SSL/TLS version to negotiate.
                                            • tls-1.1
                                            • tls-1.2
                                            Choices:
     ssl_min_version                        • ssl-3.0
     string                                 • tls-1.0      Lowest SSL/TLS version to negotiate.
                                            • tls-1.1
                                            • tls-1.2
     ssl_mode                               Choices:
     string                                 • no           SSL/TLS mode for encryption & decryption of traffic.
                                            • full
                                            Choices:
     ssl_pfs                                • require      SSL Perfect Forward Secrecy.
     string                                 • deny
                                            • allow
     ssl_send_empty_frags                   Choices:
     string                                 • enable       Send empty fragments to avoid attack on CBC IV (SSL 3.0 & TLS 1.0 only).
                                            • disable
     ssl_server_certificate                                Name of Certificate return to the client in every SSL connection. Source vpn.certificate.local.name.
     string
     status                                 Choices:
     string                                 • disable      Enable/disable SIP.
                                            • enable
     strict_register                        Choices:
     string                                 • disable      Enable/disable only allow the registrar to connect.
                                            • enable
     subscribe_rate                                        SUBSCRIBE request rate limit (per second, per policy).
     integer
                                            Choices:
     unknown_header                         • discard      Action for unknown SIP header.
     string                                 • pass
                                            • respond
     update_rate                                           UPDATE request rate limit (per second, per policy).
     integer
                                                           Deprecated
                                            Choices:       Starting with Ansible 2.9 we recommend using the top-level 'state' parameter.
    state                                   • present
    string                                  • absent       ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

                                                           Indicates whether to create or remove the object.

NOTES                   *fortios_voip_profile-notes*

   Note

     • Requires fortiosapi library developed by Fortinet
     • Run as a local_action in your playbook

EXAMPLES                   *fortios_voip_profile-examples*

 - hosts: localhost
   vars:
    host: "192.168.122.40"
    username: "admin"
    password: ""
    vdom: "root"
    ssl_verify: "False"
   tasks:
   - name: Configure VoIP profiles.
     fortios_voip_profile:
       host:  "{{ host }}"
       username: "{{ username }}"
       password: "{{ password }}"
       vdom:  "{{ vdom }}"
       https: "False"
       state: "present"
       voip_profile:
         comment: "Comment."
         name: "default_name_4"
         sccp:
             block_mcast: "disable"
             log_call_summary: "disable"
             log_violations: "disable"
             max_calls: "9"
             status: "disable"
             verify_header: "disable"
         sip:
             ack_rate: "13"
             block_ack: "disable"
             block_bye: "disable"
             block_cancel: "disable"
             block_geo_red_options: "disable"
             block_info: "disable"
             block_invite: "disable"
             block_long_lines: "disable"
             block_message: "disable"
             block_notify: "disable"
             block_options: "disable"
             block_prack: "disable"
             block_publish: "disable"
             block_refer: "disable"
             block_register: "disable"
             block_subscribe: "disable"
             block_unknown: "disable"
             block_update: "disable"
             bye_rate: "31"
             call_keepalive: "32"
             cancel_rate: "33"
             contact_fixup: "disable"
             hnt_restrict_source_ip: "disable"
             hosted_nat_traversal: "disable"
             info_rate: "37"
             invite_rate: "38"
             ips_rtp: "disable"
             log_call_summary: "disable"
             log_violations: "disable"
             malformed_header_allow: "discard"
             malformed_header_call_id: "discard"
             malformed_header_contact: "discard"
             malformed_header_content_length: "discard"
             malformed_header_content_type: "discard"
             malformed_header_cseq: "discard"
             malformed_header_expires: "discard"
             malformed_header_from: "discard"
             malformed_header_max_forwards: "discard"
             malformed_header_p_asserted_identity: "discard"
             malformed_header_rack: "discard"
             malformed_header_record_route: "discard"
             malformed_header_route: "discard"
             malformed_header_rseq: "discard"
             malformed_header_sdp_a: "discard"
             malformed_header_sdp_b: "discard"
             malformed_header_sdp_c: "discard"
             malformed_header_sdp_i: "discard"
             malformed_header_sdp_k: "discard"
             malformed_header_sdp_m: "discard"
             malformed_header_sdp_o: "discard"
             malformed_header_sdp_r: "discard"
             malformed_header_sdp_s: "discard"
             malformed_header_sdp_t: "discard"
             malformed_header_sdp_v: "discard"
             malformed_header_sdp_z: "discard"
             malformed_header_to: "discard"
             malformed_header_via: "discard"
             malformed_request_line: "discard"
             max_body_length: "71"
             max_dialogs: "72"
             max_idle_dialogs: "73"
             max_line_length: "74"
             message_rate: "75"
             nat_trace: "disable"
             no_sdp_fixup: "disable"
             notify_rate: "78"
             open_contact_pinhole: "disable"
             open_record_route_pinhole: "disable"
             open_register_pinhole: "disable"
             open_via_pinhole: "disable"
             options_rate: "83"
             prack_rate: "84"
             preserve_override: "disable"
             provisional_invite_expiry_time: "86"
             publish_rate: "87"
             refer_rate: "88"
             register_contact_trace: "disable"
             register_rate: "90"
             rfc2543_branch: "disable"
             rtp: "disable"
             ssl_algorithm: "high"
             ssl_auth_client: "<your_own_value> (source user.peer.name user.peergrp.name)"
             ssl_auth_server: "<your_own_value> (source user.peer.name user.peergrp.name)"
             ssl_client_certificate: "<your_own_value> (source vpn.certificate.local.name)"
             ssl_client_renegotiation: "allow"
             ssl_max_version: "ssl-3.0"
             ssl_min_version: "ssl-3.0"
             ssl_mode: "off"
             ssl_pfs: "require"
             ssl_send_empty_frags: "enable"
             ssl_server_certificate: "<your_own_value> (source vpn.certificate.local.name)"
             status: "disable"
             strict_register: "disable"
             subscribe_rate: "106"
             unknown_header: "discard"
             update_rate: "108"

RETURN VALUES                   *fortios_voip_profile-return values*

   Common return values are documented here, the following are the fields unique to this module:

       Key     Returned                                                                                  Description
   build                Build number of the fortigate image
   string      always   Sample:
                        1547
   http_method          Last method used to provision the content into FortiGate
   string      always   Sample:
                        PUT
   http_status          Last result given by FortiGate on last operation applied
   string      always   Sample:
                        200
   mkey                 Master key (id) used in the last call to FortiGate
   string      success  Sample:
                        id
   name                 Name of the table used to fulfill the request
   string      always   Sample:
                        urlfilter
   path                 Path of the table used to fulfill the request
   string      always   Sample:
                        webfilter
   revision             Internal revision number
   string      always   Sample:
                        17.0.2.10658
   serial               Serial number of the unit
   string      always   Sample:
                        FGVMEVYYQT3AB5352
   status               Indication of the operation's result
   string      always   Sample:
                        success
   vdom                 Virtual domain used
   string      always   Sample:
                        root
   version              Version of the FortiGate
   string      always   Sample:
                        v5.6.3

STATUS                   *fortios_voip_profile-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Miguel Angel Munoz (@mamunozgonzalez)
     • Nicolas Thomas (@thomnico)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *fortios_voip_profile-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/fortios_voip_profile_module.html
