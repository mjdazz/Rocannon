SYNOPSIS                   *win_whoami*

     • Designed to return the same information as the whoami /all command.
     • Also includes information missing from whoami such as logon metadata like logon rights, id, type.

NOTES                   *win_whoami-notes*

   Note

     • If running this module with a non admin user, the logon rights will be an empty list as Administrator rights are required to query LSA for the information.

SEE ALSO                   *win_whoami-see also*

   See also

   win_credential – Manages Windows Credentials in the Credential Manager
   The official documentation on the win_credential module.

   win_group_membership – Manage Windows local group membership
   The official documentation on the win_group_membership module.

   win_user_right – Manage Windows User Rights
   The official documentation on the win_user_right module.

EXAMPLES                   *win_whoami-examples*

 - name: Get whoami information
   win_whoami:

RETURN VALUES                   *win_whoami-return values*

   Common return values are documented here, the following are the fields unique to this module:

            Key              Returned                                                                            Description
   account                success        The running account SID details.
   complex
         account_name                    The account name of the account SID.
         string           success        Sample:
                                         Administrator
         domain_name                     The domain name of the account SID.
         string           success        Sample:
                                         DOMAIN
         sid                             The SID in string form.
         string           success        Sample:
                                         S-1-5-21-1654078763-769949647-2968445802-500
         type                            The type of SID.
         string           success        Sample:
                                         User
   authentication_package                The name of the authentication package used to authenticate the user in the session.
   string                 success        Sample:
                                         Negotiate
   dns_domain_name                       The DNS name of the logon session, this is an empty string if this is not set.
   string                 success        Sample:
                                         DOMAIN.COM
                                         A list of groups and attributes that the user is a member of.
   groups                                Sample:
   list                   success        [{'account_name': 'Domain Users', 'domain_name': 'DOMAIN', 'attributes': ['Mandatory', 'Enabled by default', 'Enabled'], 'sid':
                                         'S-1-5-21-1654078763-769949647-2968445802-513', 'type': 'Group'}, {'account_name': 'Administrators', 'domain_name': 'BUILTIN', 'attributes': ['Mandatory',
                                         'Enabled by default', 'Enabled', 'Owner'], 'sid': 'S-1-5-32-544', 'type': 'Alias'}]
                                         The impersonation level of the token, only valid if token_type is TokenImpersonation, see
   impersonation_level    success        https://msdn.microsoft.com/en-us/library/windows/desktop/aa379572.aspx.
   string                                Sample:
                                         SecurityAnonymous
   label                  success        The mandatory label set to the logon session.
   complex
         account_name                    The account name of the label SID.
         string           success        Sample:
                                         High Mandatory Level
         domain_name                     The domain name of the label SID.
         string           success        Sample:
                                         Mandatory Label
         sid                             The SID in string form.
         string           success        Sample:
                                         S-1-16-12288
         type                            The type of SID.
         string           success        Sample:
                                         Label
   login_domain                          The name of the domain used to authenticate the owner of the session.
   string                 success        Sample:
                                         DOMAIN
   login_time                            The logon time in ISO 8601 format
   string                 success        Sample:
                                         2017-11-27T06:24:14.3321665+10:00
   logon_id                              The unique identifier of the logon session.
   integer                success        Sample:
                                         20470143
   logon_server                          The name of the server used to authenticate the owner of the logon session.
   string                 success        Sample:
                                         DC01
   logon_type                            The logon type that identifies the logon method, see https://msdn.microsoft.com/en-us/library/windows/desktop/aa380129.aspx.
   string                 success        Sample:
                                         Network
   privileges                            A dictionary of privileges and their state on the logon token.
   dictionary             success        Sample:
                                         {'SeChangeNotifyPrivileges': 'enabled-by-default', 'SeRemoteShutdownPrivilege': 'disabled', 'SeDebugPrivilege': 'enabled'}
                          success and
                          running user   A list of logon rights assigned to the logon.
   rights                 is a member of Sample:
   list                   the local      ['SeNetworkLogonRight', 'SeInteractiveLogonRight', 'SeBatchLogonRight', 'SeRemoteInteractiveLogonRight']
                          Administrators
                          group
   token_type                            The token type to indicate whether it is a primary or impersonation token.
   string                 success        Sample:
                                         TokenPrimary
   upn                                   The user principal name of the current user.
   string                 success        Sample:
                                         [email protected]
   user_flags                            The user flags for the logon session, see UserFlags in https://msdn.microsoft.com/en-us/library/windows/desktop/aa380128.
   string                 success        Sample:
                                         Winlogon

STATUS                   *win_whoami-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Jordan Borean (@jborean93)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *win_whoami-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/win_whoami_module.html
