SYNOPSIS                   *azure_rm_cosmosdbaccount*

     • Create, update and delete instance of Azure Database Account.

REQUIREMENTS                   *azure_rm_cosmosdbaccount-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • azure >= 2.0.0

PARAMETERS                   *azure_rm_cosmosdbaccount-parameters*

                 Parameter                  Choices/Defaults                                                                  Comments
   ad_user                                                      Active Directory username. Use when authenticating with an Active Directory user rather than service principal.
   string
   adfs_authority_url
   string                                                       Azure AD authority url. Use when authenticating with Username/password, and has your own ADFS authority.
   added in 2.6
   api_profile                           Default:               Selects an API profile to use when communicating with Azure services. Default value of latest is appropriate for public clouds;
   string                                "latest"               future values will allow use with Azure Stack.
   added in 2.5
   append_tags                             Choices:             Use to control if tags field is canonical or just appends to existing tags.
   boolean                                 • no                 When canonical, any tags not found in the tags parameter will be removed from the object's metadata.
                                           • yes ←
                                                                Controls the source of the credentials to use for authentication.
                                                                If not specified, ANSIBLE_AZURE_AUTH_SOURCE environment variable will be used and default to auto if variable is not defined.
                                           Choices:             auto will follow the default precedence of module parameters -> environment variables -> default profile in credential file
   auth_source                             • auto               ~/.azure/credentials.
   string                                  • cli                When set to cli, the credentials will be sources from the default Azure CLI profile.
   added in 2.5                            • credential_file    Can also be set via the ANSIBLE_AZURE_AUTH_SOURCE environment variable.
                                           • env                When set to msi, the host machine must be an azure resource with an enabled MSI extension. subscription_id or the environment
                                           • msi                variable AZURE_SUBSCRIPTION_ID can be used to identify the subscription ID if the resource is granted access to more than one
                                                                subscription, otherwise the first subscription is chosen.
                                                                The msi was added in Ansible 2.6.
   cert_validation_mode                    Choices:             Controls the certificate validation behavior for Azure endpoints. By default, all modules will validate the server certificate, but
   string                                  • ignore             when an HTTPS proxy is in use, or against Azure Stack, it may be necessary to disable this behavior by passing ignore. Can also be
   added in 2.5                            • validate           set via credential file profile or the AZURE_CERT_VALIDATION environment variable.
   client_id                                                    Azure client ID. Use when authenticating with a Service Principal.
   string
   cloud_environment                     Default:               For cloud environments other than the US public cloud, the environment name (as defined by Azure Python SDK, eg, AzureChinaCloud,
   string                                "AzureCloud"           AzureUSGovernment), or a metadata discovery endpoint URL (required for Azure Stack). Can also be set via credential file profile or
   added in 2.4                                                 the AZURE_CLOUD_ENVIRONMENT environment variable.
   consistency_policy                                           The consistency policy for the Cosmos DB account.
   -
                                           Choices:
                                           • eventual
    default_consistency_level              • session            The default consistency level and configuration settings of the Cosmos DB account.
    -                                      • bounded_staleness  Required when state=present.
                                           • strong
                                           • consistent_prefix
    max_interval_in_seconds                                     When used with the Bounded Staleness consistency level, this value represents the time amount of staleness (in seconds) tolerated.
    integer                                                     Accepted range for this value is 5 - 86400. Required when default_consistency_policy=bounded_staleness.
    max_staleness_prefix                                        When used with the Bounded Staleness consistency level, this value represents the number of stale requests tolerated.
    integer                                                     Accepted range for this value is 1 - 2,147,483,647. Required when default_consistency_policy=bounded_staleness.
   database_account_offer_type                                  Database account offer type, for example Standard
   -                                                            Required when state=present.
   enable_automatic_failover               Choices:             Enables automatic failover of the write region in the rare event that the region is unavailable due to an outage.
   boolean                                 • no                 Automatic failover will result in a new write region for the account and is chosen based on the failover priorities configured for
                                           • yes                the account.
   enable_cassandra                        Choices:
   boolean                                 • no                 Enable Cassandra.
                                           • yes
   enable_gremlin                          Choices:
   boolean                                 • no                 Enable Gremlin.
                                           • yes
   enable_multiple_write_locations         Choices:
   boolean                                 • no                 Enables the account to write in multiple locations
                                           • yes
   enable_table                            Choices:
   boolean                                 • no                 Enable Table.
                                           • yes
   geo_rep_locations                                            An array that contains the georeplication locations enabled for the Cosmos DB account.
   list                                                         Required when state=present.
    failover_priority                                           The failover priority of the region. A failover priority of 0 indicates a write region.
    integer                                                     The maximum value for a failover priority = (total number of regions - 1).
                                                                Failover priority values must be unique for each of the regions in which the database account exists.
    name                                                        The name of the region.
    -
   ip_range_filter                                              Cosmos DB Firewall support. This value specifies the set of IP addresses or IP address ranges.
   -                                                            In CIDR form to be included as the allowed list of client IPs for a given database account.
                                                                IP addresses/ranges must be comma separated and must not contain any spaces.
   is_virtual_network_filter_enabled       Choices:
   boolean                                 • no                 Flag to indicate whether to enable/disable Virtual Network ACL rules.
                                           • yes
                                           Choices:
   kind                                    • global_document_db Indicates the type of database account. This can only be set at database account creation.
   -                                       • mongo_db
                                           • parse
   location                                                     The location of the resource group to which the resource belongs.
   -                                                            Required when state=present.
   name                                                         Cosmos DB database account name.
   - / required
   password                                                     Active Directory user password. Use when authenticating with an Active Directory user rather than service principal.
   string
   profile                                                      Security profile found in ~/.azure/credentials file.
   string
   resource_group                                               Name of an Azure resource group.
   - / required
   secret                                                       Azure client secret. Use when authenticating with a Service Principal.
   string
   state                                   Choices:             Assert the state of the Database Account.
   -                                       • absent             Use present to create or update an Database Account and absent to delete it.
                                           • present ←
   subscription_id                                              Your Azure subscription Id.
   string
   tags                                                         Dictionary of string:string pairs to assign as metadata to the object.
   dictionary                                                   Metadata tags on the object will be updated with any provided values.
                                                                To remove tags set append_tags option to false.
   tenant                                                       Azure tenant ID. Use when authenticating with a Service Principal.
   string
   virtual_network_rules                                        List of Virtual Network ACL rules configured for the Cosmos DB account.
   list
    ignore_missing_vnet_service_endpoint   Choices:
    boolean                                • no                 Create Cosmos DB account without existing virtual network service endpoint.
                                           • yes
    subnet                                                      It can be a string containing resource id of a subnet.
    -                                                           It can be a dictionary containing 'resource_group', 'virtual_network_name' and 'subnet_name'

NOTES                   *azure_rm_cosmosdbaccount-notes*

   Note

     • For authentication with Azure you can pass parameters, set environment variables, use a profile stored in ~/.azure/credentials, or log in before you run your tasks or playbook with az login.
     • Authentication is also possible using a service principal or Active Directory user.
     • To authenticate via service principal, pass subscription_id, client_id, secret and tenant or set environment variables AZURE_SUBSCRIPTION_ID, AZURE_CLIENT_ID, AZURE_SECRET and AZURE_TENANT.
     • To authenticate via Active Directory user, pass ad_user and password, or set AZURE_AD_USER and AZURE_PASSWORD in the environment.
     • Alternatively, credentials can be stored in ~/.azure/credentials. This is an ini file containing a [default] section and the following keys: subscription_id, client_id, secret and tenant or
       subscription_id, ad_user and password. It is also possible to add additional profiles. Specify the profile by passing profile or setting AZURE_PROFILE in the environment.

SEE ALSO                   *azure_rm_cosmosdbaccount-see also*

   See also

   Sign in with Azure CLI
   How to authenticate using the az login command.

EXAMPLES                   *azure_rm_cosmosdbaccount-examples*

 - name: Create Cosmos DB Account - min
   azure_rm_cosmosdbaccount:
     resource_group: myResourceGroup
     name: myDatabaseAccount
     location: westus
     geo_rep_locations:
       - name: southcentralus
         failover_priority: 0
     database_account_offer_type: Standard

 - name: Create Cosmos DB Account - max
   azure_rm_cosmosdbaccount:
     resource_group: myResourceGroup
     name: myDatabaseAccount
     location: westus
     kind: mongo_db
     geo_rep_locations:
       - name: southcentralus
         failover_priority: 0
     database_account_offer_type: Standard
     ip_range_filter: 10.10.10.10
     enable_multiple_write_locations: yes
     virtual_network_rules:
       - subnet: "/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myResourceGroup/providers/Microsoft.Network/virtualNetworks/myVi
                  rtualNetwork/subnets/mySubnet"
     consistency_policy:
       default_consistency_level: bounded_staleness
       max_staleness_prefix: 10
       max_interval_in_seconds: 1000

RETURN VALUES                   *azure_rm_cosmosdbaccount-return values*

   Common return values are documented here, the following are the fields unique to this module:

    Key   Returned                                                                                    Description
   id              The unique resource identifier of the database account.
   string always   Sample:
                   /subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/myResourceGroup/providers/Microsoft.DocumentDB/databaseAccounts/myData baseAccount

STATUS                   *azure_rm_cosmosdbaccount-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Zim Kalinowski (@zikalino)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *azure_rm_cosmosdbaccount-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/azure_rm_cosmosdbaccount_module.html
