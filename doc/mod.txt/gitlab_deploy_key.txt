SYNOPSIS                   *gitlab_deploy_key*

     • Adds, updates and removes project deploy keys

REQUIREMENTS                   *gitlab_deploy_key-requirements*

   The below requirements are needed on the host that executes this module.

     • python >= 2.7
     • python-gitlab python module <= 1.12.1

PARAMETERS                   *gitlab_deploy_key-parameters*

       Parameter     Choices/Defaults                                                                            Comments
   api_password                       The password to use for authentication against the API
   string
   api_token                          GitLab token for logging in.
   string                             aliases: private_token, access_token
   added in 2.8
   api_url                            The resolvable endpoint for the API
   string
   api_username                       The username to use for authentication against the API
   string
   can_push            Choices:
   boolean             • no ←         Whether this key can push to the project
                       • yes
   key                                Deploy key
   string / required
   project                            Id or Full path of project in the form of group/name
   string / required
   state               Choices:       When present the deploy key added to the project if it doesn't exist.
   string / required   • present ←    When absent it will be removed from the project if it exists
                       • absent
   title                              Deploy key's title
   string / required
   validate_certs      Choices:
   boolean             • no           Whether or not to validate SSL certs when supplying a https endpoint.
                       • yes ←

EXAMPLES                   *gitlab_deploy_key-examples*

 - name: "Adding a project deploy key"
   gitlab_deploy_key:
     api_url: https://gitlab.example.com/
     api_token: "{{ access_token }}"
     project: "my_group/my_project"
     title: "Jenkins CI"
     state: present
     key: "ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAIEAiPWx6WM4lhHNedGfBpPJNPpZ7yKu+dnn1SJejgt4596k6YjzGGphH2TUxwKzxcKDKKezwkpfnxPkSMkuEspGRt/aZZ9w..."

 - name: "Update the above deploy key to add push access"
   gitlab_deploy_key:
     api_url: https://gitlab.example.com/
     api_token: "{{ access_token }}"
     project: "my_group/my_project"
     title: "Jenkins CI"
     state: present
     can_push: yes

 - name: "Remove the previous deploy key from the project"
   gitlab_deploy_key:
     api_url: https://gitlab.example.com/
     api_token: "{{ access_token }}"
     project: "my_group/my_project"
     state: absent
     key: "ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAIEAiPWx6WM4lhHNedGfBpPJNPpZ7yKu+dnn1SJejgt4596k6YjzGGphH2TUxwKzxcKDKKezwkpfnxPkSMkuEspGRt/aZZ9w..."

RETURN VALUES                   *gitlab_deploy_key-return values*

   Common return values are documented here, the following are the fields unique to this module:

      Key     Returned                                                                                  Description
   deploy_key always   API object
   dictionary
   error               the error message returned by the GitLab API
   string     failed   Sample:
                       400: key is already in use
   msg                 Success or failure message
   string     always   Sample:
                       Success
   result     always   json parsed response from the server
   dictionary

STATUS                   *gitlab_deploy_key-status*

     • This module is not guaranteed to have a backwards compatible interface. [preview]
     • This module is maintained by the Ansible Community. [community]

     • Marcus Watkins (@marwatk)
     • Guillaume Martinez (@Lunik)

   Hint

   If you notice any issues in this documentation, you can edit this document to improve it.

   ══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════

MORE INFO                          *gitlab_deploy_key-moreinfo*
>
All arguments are omni-completed, but if you really want to see the online docs:
https://docs.ansible.com/ansible/latest/modules/gitlab_deploy_key_module.html
